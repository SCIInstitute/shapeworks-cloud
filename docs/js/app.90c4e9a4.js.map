{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/store/index.ts","webpack:///./src/reader/points.ts","webpack:///./src/helper.ts","webpack:///./src/components/Landmarks.vue?78bd","webpack:///./src/components/SubsetSelection.vue?d624","webpack:///./src/views/DatasetSelect.vue?ba68","webpack:///./src/components/ShapeViewer/viewer.vue?a4cd","webpack:///./src/components/DeepSSMTab.vue?1312","webpack:///./src/components/TaskInfo.vue?4984","webpack:///./src/components/Analysis/Charts.vue?b28c","webpack:///./src/views/Main.vue?00c2","webpack:///./src/reader/mapper.ts","webpack:///./src/store/methods.ts","webpack:///./src/App.vue?1025","webpack:///./src/views/Main.vue","webpack:///./src/components/ShapeViewer/viewer.vue","webpack:///./src/components/ShapeViewer/widgetSync.js","webpack:///./src/components/ShapeViewer/imageSync.js","webpack:///./src/components/ShapeViewer/methods.js","webpack:///./src/components/ShapeViewer/scripting.js","webpack:///./src/components/ShapeViewer/scripting.js?9889","webpack:///./src/components/ShapeViewer/viewer.vue?3da1","webpack:///./src/components/DataList.vue","webpack:///./src/components/DataList.vue?fa62","webpack:///./src/components/DataList.vue?82a8","webpack:///./src/components/DataList.vue?2e46","webpack:///./src/components/RenderControls.vue","webpack:///./src/components/RenderControls.vue?bc64","webpack:///./src/components/RenderControls.vue?b19a","webpack:///./src/components/RenderControls.vue?13f6","webpack:///./src/components/TabForm.vue","webpack:///./src/components/TabForm.vue?2501","webpack:///./src/components/TabForm.vue?7a3d","webpack:///./src/components/Analysis/AnalysisTab.vue","webpack:///./src/components/Analysis/Charts.vue","webpack:///./src/components/Analysis/charts.ts","webpack:///./src/components/Analysis/Charts.vue?d5a9","webpack:///./src/components/Analysis/util.ts","webpack:///./src/components/Analysis/Charts.vue?82ee","webpack:///./src/components/Analysis/Charts.vue?b98e","webpack:///./src/components/Analysis/Groups.vue","webpack:///./src/components/Analysis/Groups.vue?f5a4","webpack:///./src/components/Analysis/Groups.vue?b0c0","webpack:///./src/components/Analysis/Groups.vue?b03a","webpack:///./src/components/Analysis/Particles.vue","webpack:///./src/components/Analysis/Particles.vue?f449","webpack:///./src/components/Analysis/Particles.vue?35fe","webpack:///./src/components/Analysis/Particles.vue?3418","webpack:///./src/components/Analysis/PCA.vue","webpack:///./src/components/Analysis/PCA.vue?3de5","webpack:///./src/components/Analysis/PCA.vue?1db3","webpack:///./src/components/Analysis/PCA.vue?c111","webpack:///./src/components/Analysis/AnalysisTab.vue?df90","webpack:///./src/components/Analysis/AnalysisTab.vue?403f","webpack:///./src/components/Analysis/AnalysisTab.vue?55ad","webpack:///./src/components/InfoTab.vue","webpack:///./src/components/Landmarks.vue","webpack:///src/components/Landmarks.vue","webpack:///./src/components/Landmarks.vue?7787","webpack:///./src/components/Landmarks.vue?d419","webpack:///./src/components/Constraints.vue","webpack:///src/components/Constraints.vue","webpack:///./src/components/Constraints.vue?80b7","webpack:///./src/components/Constraints.vue?a62f","webpack:///./src/components/InfoTab.vue?704b","webpack:///./src/components/InfoTab.vue?18e9","webpack:///./src/components/InfoTab.vue?9a70","webpack:///./src/components/DeepSSMTab.vue","webpack:///./src/components/DeepSSMTab.vue?d6c4","webpack:///./src/components/DeepSSMTab.vue?cc7e","webpack:///./src/components/DeepSSMTab.vue?2a94","webpack:///./src/views/Main.vue?f516","webpack:///./src/views/Main.vue?f4eb","webpack:///./src/views/Main.vue?5d79","webpack:///./src/views/ProjectSelect.vue","webpack:///./src/components/ProjectForm.vue","webpack:///src/components/ProjectForm.vue","webpack:///./src/components/ProjectForm.vue?362f","webpack:///./src/components/ProjectForm.vue?5873","webpack:///./src/views/ProjectSelect.vue?0659","webpack:///./src/views/ProjectSelect.vue?0525","webpack:///./src/views/ProjectSelect.vue?2e31","webpack:///./src/views/DatasetSelect.vue","webpack:///./src/components/SubsetSelection.vue","webpack:///./src/components/SubsetSelection.vue?47cd","webpack:///./src/components/SubsetSelection.vue?ee6d","webpack:///./src/components/SubsetSelection.vue?5780","webpack:///./src/views/DatasetSelect.vue?377f","webpack:///./src/views/DatasetSelect.vue?6596","webpack:///./src/views/DatasetSelect.vue?ee97","webpack:///./src/router.ts","webpack:///./src/components/NavBar.vue?ef0c","webpack:///./src/components/Constraints.vue?b6d5","webpack:///./src/components/RenderControls.vue?7e04","webpack:///./src/components/TabForm.vue?cd9c","webpack:///./src/reader/shape.ts","webpack:///./src/reader/image.ts","webpack:///./src/api/auth.ts","webpack:///./src/components/Analysis/AnalysisTab.vue?5214","webpack:///./src/components/TaskInfo.vue","webpack:///./src/components/TaskInfo.vue?b628","webpack:///./src/components/TaskInfo.vue?42e0","webpack:///./src/components/TaskInfo.vue?b0e7","webpack:///./src/components/Analysis/PCA.vue?f464","webpack:///./src/api/rest.ts","webpack:///./src/App.vue","webpack:///./src/components/NavBar.vue","webpack:///./src/components/FilterSearch.vue","webpack:///./src/components/FilterSearch.vue?130e","webpack:///./src/components/FilterSearch.vue?b90a","webpack:///./src/components/FilterSearch.vue?d392","webpack:///./src/components/NavBar.vue?ca92","webpack:///./src/components/NavBar.vue?908c","webpack:///./src/components/NavBar.vue?bca4","webpack:///src/App.vue","webpack:///./src/App.vue?2ef9","webpack:///./src/App.vue?315a","webpack:///./src/plugins/vuetify.ts","webpack:///./src/main.ts","webpack:///./src/components/TabForm.vue?0e2a","webpack:///./src/components/ProjectForm.vue?322f","webpack:///./src/store/constants.ts","webpack:///./src/reader/constraints.ts","webpack:///./src/components/DataList.vue?9a82"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","loadingState","ref","renderLoading","currentError","vtkInstance","allDatasets","selectedDataset","allProjectsForDataset","selectedProject","editingProject","allSubjectsForDataset","allDataObjectsInDataset","anatomies","selectedAnatomies","selectedDataObjects","orientationIndicator","vtkAnnotatedCubeActor","newInstance","particleSize","reconstructionsForOriginalDataObjects","particlesForOriginalDataObjects","groomedShapesForOriginalDataObjects","analysis","analysisFilesShown","currentAnalysisParticlesFiles","meanAnalysisParticlesFiles","layersShown","goodBadAngles","goodBadMaxAngle","showGoodBadParticlesMode","showDifferenceFromMeanMode","cachedMarchingCubes","cachedParticleComparisonVectors","cachedParticleComparisonColors","landmarkInfo","landmarksLoading","landmarkSize","allSetLandmarks","currentLandmarkPlacement","constraintInfo","constraintsLoading","constraintsShown","allSetConstraints","currentConstraintPlacement","constraintPaintRadius","constraintPaintExclusion","currentTasks","jobProgressPoll","analysisExpandedTab","analysisAnimate","imageViewMode","imageViewIntersectMode","imageViewIntersectCropMode","imageViewAxis","imageViewSlices","x","y","z","imageViewSliceRanges","imageViewCroppedSliceRanges","imageViewWindow","imageViewWindowRange","imageViewLevel","imageViewLevelRange","deepSSMResult","deepSSMDataTab","deepSSMAugDataShown","deepSSMLoadingData","groomFormData","optimizationFormData","uniformScale","deepSSMErrorGlobalRange","deepSSMSamplePage","sortAscending","sortOption","SORT_OPTION","NAME","filters","private","readonly","url","vtkPolyData","resp","fetch","text","lines","trim","split","pointArray","map","f","parseFloat","flat","points","Float32Array","from","polyData","getPoints","setData","groupBy","xs","reduce","rv","shortDateString","date","shortFileName","file","getDistance","one","two","signed","dimSum","squaredDimSum","Math","sqrt","hexToRgb","hex","exec","parseInt","rgbToHex","rgb","components","toString","join","distance","a","b","pow","async","parseCSVFromURL","then","response","splitstring","row","isNaN","generateMapper","shape","mapper","vtkMapper","getClassName","setInputData","console","error","resetState","undefined","loadDataset","_selectedDataset$valu","id","datasetId","getDataset","getAllDatasets","searchText","router","currentRoute","params","getDatasets","sort","created","loadProjectForDataset","refreshProject","projectId","proj","getProjectFileContents","contents","file_contents","spawnJobProgressPoll","loadProjectsForDataset","getProjectsForDataset","selectProject","find","project","loadParticlesForObject","type","_selectedProject$valu","particles","getOptimizedParticlesForDataObject","loadGroomedShapeForObject","_selectedProject$valu2","groomed","getGroomedShapeForDataObject","loadReconstructedSamplesForProject","_selectedProject$valu3","getReconstructedSamplesForProject","loadDeepSSMDataForProject","results","Promise","all","getDeepSSMResultForProject","getDeepSSMAugPairsForProject","getDeepSSMTrainingPairsForProject","getDeepSSMTrainingImagesForProject","getDeepSSMTestImagesForProject","aug_pairs","training_pairs","images","test_pairs","jobAlreadyDone","action","_layers$value","_layers$value2","layer","layers","available","spawnJob","payload","_selectedProject$valu4","_await$groomProject","_await$optimizeProjec","_await$analyzeProject","_await$deepssmRunProj","filter","groomProject","optimizeProject","analyzeProject","deepssmRunProject","clearInterval","setInterval","pollJobProgress","getTasksForProject","tasks","refreshedTasks","forEach","task","abort","percent_complete","fetchJobResults","taskName","refreshedProject","layerName","loadFunction","last_cached_analysis","good_bad_angles","dataObject","fromEntries","entries","cachedLabel","includes","abortTask","switchTab","tabName","calculateComparisons","currentPoints","meanPoints","vectorValues","colorValues","currentParticle","meanParticle","pointLocations","getInputData","getData","normals","getPointData","getArrayByName","Array","keys","colorVal","location","normal","nearbyParticles","nearestParticleIndex","weight","cacheComparison","particleComparisonKey","cacheAllComparisons","comparisons","cachePrep","g","domain","compareToPoints","pointsReader","currentMesh","imageReader","particleUrl","current","compareTo","isShapeShown","subjectID","some","subject","anatomy_type","replace","toggleSubjectShown","getWidgetInfo","item","subjectName","widgetID","getLandmarkLocation","setLandmarkLocation","reassignLandmarkIDsByIndex","reassignedIds","info","index","assign","subjectRecords","domainRecords","lId","lData","reassignLandmarkNumSetValues","reassign","newInfo","lInfo","newNumSet","num_set","getLandmarks","_selectedProject$valu5","landmarks","landmarks_info","color","COLORS","landmarksObject","pointData","locationData","locations","lInfos","getConstraintLocation","setConstraintLocation","reassignConstraintNumSetValues","reassignConstraintIDsByIndex","cId","cData","cInfo","getConstraints","_selectedProject$valu6","constraints","_constraintsObject$an","constraintsObject","constraintsData","constraintsReader","constraintType","newConstraintsOfType","existingConstraintsOfType","staticClass","attrs","scopedSlots","fn","_b","callback","tab","expression","_vm","_c","_v","on","refreshRender","style","renderAreaStyle","rows","staticRenderFns","render","_self","_setup","directives","showColorScale","_e","manipulators","dataKDTrees","shapeKDTrees","seedWidgets","planeWidgets","paintWidgets","initializeWidgets","this","vtk","widgetManagers","renderers","label","renderer","wm","vtkWidgetManager","setRenderer","disablePicking","getActors","actor","_actor$getMapper","getMapper","getFieldData","vtkPickerManipulator","getPicker","addPickList","existingWidgets","values","ws","w","widgetHandle","addWidget","setScaleInPixels","onEndInteractionEvent","seedWidgetEndInteraction","initializeConstraintColormap","stylePlaneWidget","planeWidgetEndInteraction","landmarkInfoUpdated","constraintInfoUpdated","setLookupTable","ctfun","vtkColorTransferFunction","defaultColor","getProperty","getColor","addRGBPoint","setMappingRange","updateRange","setColorByArrayName","inputData","allPoints","colorArray","vtkDataArray","getNumberOfPoints","addArray","getWidgetManager","getManipulator","getDataKDTree","field","scalarPoints","kdTree","getShapeKDTree","shapeData","treePoints","getSeedWidget","createSeedWidget","getPlaneWidget","createPlaneWidget","getPaintWidget","createPaintWidget","manipulator","widgetManager","widget","vtkSeedWidget","setManipulator","pickList","getPickList","bounds","getBounds","vtkImplicitPlaneWidget","placeWidget","setPlaceFactor","getRepresentations","setLabels","vtkPaintWidget","paintWidgetEndInteraction","setHandleSizeRatio","setAxisScale","setRepresentationStyle","static","outline","opacity","subjectWidgets","shapeWidgets","landmarkCoord","getWidgetState","getMoveHandle","getOrigin","releaseFocus","previousLocation","v","widgetState","origin","getNormal","updateConstraintColors","tree","numPoints","getPoint","scalars","fill","paintedPoints","getTrailList","state","currentPoint","nearest","pointIndex","findIndex","validWidgets","records","handle","setOrigin","getColor3","setColor3","getScale1","setScale1","labelRecords","shapeRecords","seedWidget","removeWidget","landmarkSizeUpdated","currentLandmarkPlacementUpdated","newPlacement","grabFocus","_cData$data","_cData$data2","setNormal","setVisibility","planeWidget","constraintsShownUpdated","currentConstraintPlacementUpdated","setRadius","getHandle","setVisible","setActive","shapeManipulators","allPointColors","Uint8Array","dot","point","pointColor","getValue","dotProduct","setValue","currentPointObj","nearests","modified","watchWidgetStates","watch","_","debounce","slices","createSlice","sliceActor","vtkImageSlice","imageMapper","vtkImageMapper","cutPlane","vtkPlane","cutter","vtkCutter","cutMapper","cutActor","vtkActor","cropFilter","vtkImageCropFilter","particleFilter","vtkCalculator","filteredParticleSphere","vtkSphereSource","filteredParticleActor","filteredParticleMapper","vtkGlyph3DMapper","setMapper","addActor","setCutFunction","setInputConnection","getOutputPort","cutProperty","setRepresentation","vtkProperty","Representation","WIREFRAME","setLighting","setColor","setLineWidth","setFormula","getArrays","input","FieldDataTypes","COORDINATE","output","POINT","dataType","attribute","AttributeTypes","SCALARS","numberOfComponents","evaluate","arraysIn","arraysOut","coords","visible","imageBounds","currentAxis","axisBounds","getSlicingMode","sliceRange","currentSlice","numSlices","sliceThickness","slicePosition","axisCoord","setScaleModeToScaleByMagnitude","setScaleFactor","glyphSize","setScaleArray","updateSlice","cameraPosition","cameraDirection","cameraViewUp","camera","getActiveCamera","center","getCenter","setSlicingMode","setISlice","setJSlice","setKSlice","setPosition","setDirectionOfProjection","setViewUp","updateCuttingPlane","resetCamera","updateIntersection","intersectionShape","fullBounds","fullSlices","padding","cropToBounds","cropToProportions","minIndex","floor","maxIndex","padValue","cropToSlices","axis","min","max","setCroppingPlanes","reset","_particleFilter$getIn","sliceBounds","getBoundsForSlice","updateGlyphSize","addImage","imageData","setColorWindow","setColorLevel","dataRange","getScalars","getRange","extent","getExtent","imageViewIntersectModeUpdated","imageViewModeUpdated","resize","imageViewAxisUpdated","imageViewSliceUpdated","imageViewWindowUpdated","imageViewLevelUpdated","watchImageStates","deep","resetImageSlices","resetIntersections","GOOD_BAD_COLORS","widgetSync","imageSync","$nextTick","renderWindow","updateSize","el","$refs","width","height","getBoundingClientRect","openglRenderWindow","setSize","newOrientationCube","interactor","vtkOrientationMarkerWidget","viewportSize","minPixelSize","maxPixelSize","viewportCorner","Corners","TOP_RIGHT","initializeCameras","initialCameraStates","position","viewUp","getReferenceByName","getCameraDelta","positionDelta","viewUpDelta","targetCamera","rendererIndex","indexOf","targetRendererID","initialCameraPosition","initialCameraViewUp","newCameraPosition","newCameraViewUp","num","applyCameraDelta","rendererID","old","resetCameraClippingRange","syncCameras","animation","targetRenderer","pokedRenderer","createColorFilter","domainIndex","goodBad","_analysisFilesShown$v","addPoints","size","source","thetaResolution","SPHERE_RESOLUTION","phiResolution","scaleMode","SCALE_BY_CONSTANT","scaleFactor","pointMappers","addShapes","shapes","shapeDatas","_analysisFilesShown$v2","vtkShapesByType","numLayers","cacheLabel","colorMode","ColorMode","MAP_SCALARS","scalarMode","ScalarMode","USE_POINT_FIELD_DATA","marchingCube","vtkImageMarchingCubes","contourValue","computeNormals","mergePoints","getOutputData","showDifferenceFromMean","normalizeRange","normalizedData","normalizedArray","lookupTable","setOpacity","metaData","targetMetaData","mean","vectorMapper","vectorActor","vectorSource","vectorShape","vtkArrowSource","verts","Uint32Array","orientations","colors","dx","dy","dz","getVerts","addInputConnection","setOrientationArray","prepareColorScales","canvasDiv","titleDiv","colorsTitle","labelsDiv","colorsLabels","innerHTML","canvas","document","createElement","right","appendChild","labels","range","prepareColorScale","y1","x2","y2","grid","top","arr","zIndex","context","getContext","willReadFrequently","pixelsArea","getImageData","colorsData","getUint8Table","getMappingRange","set","putImageData","labelProportions","display","flexDirection","justifyContent","alignItems","textAlign","child","round","prepareLabelCanvas","labelCanvas","labelCanvasContext","clientWidth","clientHeight","clearRect","font","fillStyle","populateRenderer","pointSet","vtkCamera","setActiveCamera","renderGrid","disable","removeRenderer","orientationCube","setEnabled","newRenderer","vtkRenderer","background","fillText","setViewport","addRenderer","columns","setParentRenderer","enable","setTimeout","enablePicking","props","required","Number","currentTab","String","drawerWidth","computed","nx","ny","xmin","ymin","xmax","ymax","beforeDestroy","unbindEvents","delete","setContainer","vtkRenderWindow","vtkOpenGLRenderWindow","addView","vtkRenderWindowInteractor","setView","initialize","setInteractorStyle","vtkInteractorStyleTrackballCamera","onAnimation","applyColorMap","vtkColorMaps","getPresetByName","mounted","bindEvents","updated","methods","component","model","$$v","nativeOn","$event","selectedSubjects","$set","headers","dataset","autoSelectAll","Boolean","default","autoSelectOne","setup","cellClass","fetchData","getSubjectsForDataset","getDataObjectsForSubject","dataObj","assignments","subjectIds","updateSelectedObjects","modality","selectedObjectsUpdated","uniqueAnatomies","Set","anatomy","uniqueSubjects","JSON","stringify","onMounted","staticStyle","changeImageViewMode","showAnalysisOptions","captureThumbnail","resetView","imageViewSliceRange","changeImageViewSlice","setDefaultStyle","fontStyle","fontFamily","fontColor","faceColor","faceRotation","edgeThickness","edgeColor","resolution","axisSystemOptions","xPlus","xMinus","yPlus","yMinus","zPlus","zMinus","axes","axisSystem","changeAxisSystem","newSystemValue","newSystem","system","setXPlusFaceProperty","setXMinusFaceProperty","setYPlusFaceProperty","setYMinusFaceProperty","setZPlusFaceProperty","setZMinusFaceProperty","emit","thumbnailTarget","encoded","captureImages","thumbnail","setDatasetThumbnail","setProjectThumbnail","showSamplePageSelector","maxSamplePage","_deepSSMResult$value","ceil","DEEPSSM_SAMPLES_PER_PAGE","showUniformScaleOption","imageIntersectAllowed","imageViewSlice","changeSamplePage","page","onChangeSamplePage","form","formValid","formSchema","_u","formData","fullKey","resetForm","openTab","currentlyCaching","charts","_l","chart","title","generateChart","lineChartOptions","decimalPlaces","roundTo","textStyle","dataZoom","xAxisIndex","tooltip","trigger","formatter","toolbox","show","orient","showTitle","feature","saveAsImage","toLowerCase","excludedComponents","dataView","readOnly","optionToContent","showData","restore","xAxis","x_label","nameLocation","nameTextStyle","axisLabel","align","boundaryGap","splitLine","lineStyle","yAxis","y_label","axisLine","axisTick","scale","series","copyData","CSVText","getTextAsCSV","navigator","clipboard","writeText","log","err","getDownloadURL","csvstring","csvarray","idx","blob","Blob","URL","createObjectURL","rowindex","search","h","dataTable","className","thead","theadRow","insertRow","theadOne","insertCell","theadTwo","tbody","csvtext","cellOne","cellTwo","div","copybtn","onclick","downloadbtn","downloadlink","href","download","replaceAll","click","place","factor","use","SVGRenderer","LineChart","TitleComponent","TooltipComponent","GridComponent","ToolboxComponent","DataZoomComponent","AnalysisTabs","validator","every","val","VChart","init","groupSet","groupRatio","animate","currGroup","stopAnimating","groupDiff","currPairing","left","prevPairing","inject","intervalId","step","pairingIsInverted","group1","group2","updateCurrGroup","_analysis$value","groups","ratio","toFixed","setDefaultPairing","_allGroupSets$value","allGroupSets","groupPairings","updateGroupSelections","updateGroupFileShown","filesShown","_analysis$value2","meanParticles","_analysis$value3","mean_shapes","_analysis$value4","allInPairing","animateSlider","Groups","cacheAllGroupComparisons","_analysis$value5","_analysis$value6","group","triggerAnimate","changeMaxAngle","angle","pcaInfo","stdDev","menu","showConfirmation","modeOptions","modes","currMode","currPCAs","_currMode$value","pca_values","pca_value","toPrecision","stdDevRange","numSteps","pcaValues","numDomains","_currPCAs$value","items","lambda_value","eigen_value","explained_variance","class","cumulative_explained_variance","updateFileShown","allInMode","PCA","cacheAllPCAComparisons","Charts","Particles","TaskInfo","formDefaults","steps","pca","provide","openPanel","deleteLandmark","backgroundColor","colorStrings","getColorObject","_s","changesMade","sortable","expandedRows","dialogs","getPlacementStatus","placement","coordStrings","beginPlacement","newLandmark","_landmarkInfo$value","_landmarkInfo$value2","newID","landmark","comment","newAddition","updateLandmarkInfo","landmarkIndex","updateLandmarkColor","rgba","updateLandmarks","submit","_allSubjectsForDatase","infoData","saveLandmarkData","curr","stopPropagation","constraintErrors","saveWarning","toggleConstraintShown","toggleCurrentPlacement","validateConstraint","newConstraint","_constraintInfo$value","_constraintInfo$value2","constraint","deleteConstraint","shapeInfos","shapeLocations","convertConstraintDataForDB","noneSetConstraints","plural","constraintLabels","saveConstraintData","Landmarks","Constraints","updateLayersShown","openExpansionPanel","controlsTabs","testing_split","prepData","augmentationData","aug_sampler_type","trainingData","train_epochs","_vm$deepSSMResult$res","_vm$deepSSMResult$res2","_vm$deepSSMResult$res3","_vm$deepSSMResult$res4","Sampler","LossFunction","showAbortConfirmation","validation_split","percent_variability","image_spacing","aug_num_samples","Gaussian","train_loss_function","MSE","train_learning_rate","train_batch_size","train_decay_learning_rate","train_fine_tuning","train_fine_tuning_epochs","train_fine_tuning_learning_rate","dataTables","aug_table","aug_headers","training_table","training_headers","testing_table","testing_headers","getFormSection","obj","getFormData","prepFormData","augFormData","trainFormData","overwriteFormDefaultsFromProjectFile","section","getCSVDataFromURL","aug_total_data","training_data_table","testing_distances","res","aug_values","newRow","pop","e","ShapeViewer","DataList","InfoTab","RenderControls","TabForm","AnalysisTab","DeepSSMTab","drawer","cols","renderData","renderMetaData","onResize","toSelectPage","prepareDrawer","$el","querySelector","cursor","addEventListener","preventDefault","offsetX","transition","setDrawerWidth","body","removeEventListener","clientX","_currentAnalysisParti","_meanAnalysisParticle","landmarksPromise","constraintsPromise","newRenderData","newRenderMetaData","groupedSelections","currParticles","labelledGroups","trainingImages","augImages","paginatedAugPairs","acc","example_type","validation","order","aKey","aVal","bKey","bVal","subjectId","dataObjects","filteredDataObjects","image_type","sample_num","shapePromises","shapeURL","imageURL","particleURL","mesh","image","startsWith","_augImages$find","_trainingImages$find","image_id","fetchedDataObject","layerLabel","_groomedShapesForOrig","targetReconstruction","reconstructed","originalId","groomed_mesh","groomed_segmentation","segmentation","_particlesForOriginal","local","particleData","landmarkData","constraintData","numGroups","renderAreaWidth","innerWidth","renderAreaHeight","innerHeight","renderAreaRatio","nextTick","onBeforeUnmount","debouncedRefreshRender","rawName","keyword","deleting","creating","privated","editMode","description","keywords","cancel","submitFunction","createProject","editProject","status","catch","ProjectForm","sortedProjects","projects","sortA","sortB","selectOrDeselectProject","cloneProj","cloneProject","deleteProj","deleteProject","back","updateSelectedDataset","selectOrDeselectDataset","selectingSubsetOf","submitForm","targetDataset","selected","newDataset","subsetDataset","SubsetSelection","sortedDatasets","datasets","Vue","VueRouter","castDatasetAndSubjectProps","route","routes","path","Main","ProjectSelect","DatasetSelect","redirect","reader","vtkXMLPolyDataReader","setUrl","binary","setActiveScalars","convertItkToVtkImage","ITKHelper","readDeepSSMScalars","vtkPolyDataReader","content","axios","header","line_values","line","filename","metadata","arrayBuffer","responseType","endsWith","vtkPLYReader","parseAsArrayBuffer","readImageArrayBuffer","shapeReader","vtkSTLReader","fieldData","str","vtkStringArray","apiClient","baseURL","oauthClient","OauthClient","process","restoreLogin","maybeRestoreLogin","interceptors","request","config","authHeaders","_error$response","_error$response2","_error$response3","logout","post","withCredentials","resetDisabled","showSubmissionConfirmation","disabled","alreadyDone","taskData","oldValue","submitDisabled","confirmed","next","encoding","_await$apiClient$get$","projectFileURL","json","_await$apiClient$get$2","dataTypes","_response$data","_await$apiClient$get$3","_await$apiClient$get$4","_await$apiClient$get$5","_await$apiClient$get$6","_await$apiClient$get$7","_await$apiClient$get$8","_await$apiClient$get$9","page_size","_await$apiClient$get$10","put","taskId","landmarkLocations","constraintLocations","ascendingLabel","navigateToResults","targetUrl","beforeEach","to","FilterSearch","logInOrOut","isLoggedIn","reload","redirectToLogin","navigateToHome","NavBar","logIn","Vuetify","theme","dark","login","vuetify","App","$mount","prerequisite","Function","prerequisite_unfulfilled","VJsf","ajv","Ajv","newDefaults","parseNewDefaults","sName","sData","fetchFormSchema","formName","types","defaults","evaluateExpression","expressionFunc","eval","schemaOptions","rootDisplay","autoFocus","sliderProps","thumbLabel","tooltipProps","openOnHover","simplifyFormData","_reconstructionsForOr","crossProduct","v1","v2","addVectors","subtractVectors","normalizeVector","magnitude","constraintJSON","indexForShape","planes","p1","p2","p3","planeData","paintData","free_form_constraints","constraintList","_json$planes"],"mappings":"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","file":"js/app.90c4e9a4.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import vtkAnnotatedCubeActor from 'vtk.js/Sources/Rendering/Core/AnnotatedCubeActor';\nimport {\n    DataObject, Dataset, Subject,\n    Particles, GroomedShape, Project,\n    ReconstructedSample, VTKInstance,\n    Analysis, Task, LandmarkInfo, Constraints,\n    Filters\n} from '@/types'\nimport { ref } from 'vue'\nimport { SORT_OPTION } from './constants';\n\nexport * from './methods'\n\nexport * from './constants'\n\nexport const loadingState = ref<boolean>(false)\n\nexport const renderLoading = ref<boolean>(false)\n\nexport const currentError = ref<string>()\n\nexport const vtkInstance = ref<VTKInstance>()\n\nexport const allDatasets = ref<Dataset[]>([])\n\nexport const selectedDataset = ref<Dataset>()\n\nexport const allProjectsForDataset = ref<Project[]>([])\n\nexport const selectedProject = ref<Project>()\n\nexport const editingProject = ref<undefined | Project>();\n\nexport const allSubjectsForDataset = ref<Subject[]>([])\n\nexport const allDataObjectsInDataset = ref<DataObject[]>([])\n\nexport const anatomies = ref<string[]>([]);\n\nexport const selectedAnatomies = ref<string[]>([]);\n\nexport const selectedDataObjects = ref<DataObject[]>([]);\n\nexport const orientationIndicator = ref<vtkAnnotatedCubeActor>(vtkAnnotatedCubeActor.newInstance())\n\nexport const particleSize = ref<number>(2)\n\nexport const reconstructionsForOriginalDataObjects = ref<ReconstructedSample[]>([])\n\nexport const particlesForOriginalDataObjects = ref<Record<string, Record<number, Particles | undefined>>>({})\n\nexport const groomedShapesForOriginalDataObjects = ref<Record<string, Record<number, GroomedShape| undefined>>>({})\n\nexport const analysis = ref<Analysis>();\n\nexport const analysisFilesShown = ref<string[]>();\n\nexport const currentAnalysisParticlesFiles = ref<string[]>();\n\nexport const meanAnalysisParticlesFiles = ref<string[]>();\n\nexport const layersShown = ref<string[]>([\"Original\"])\n\nexport const goodBadAngles = ref<number[][]>();\n\nexport const goodBadMaxAngle = ref<number>(45);\n\nexport const showGoodBadParticlesMode = ref<boolean>(false);\n\nexport const showDifferenceFromMeanMode = ref<boolean>(false);\n\nexport const cachedMarchingCubes = ref({})\n\nexport const cachedParticleComparisonVectors = ref<{[key: string]: number[][]}>({})\n\nexport const cachedParticleComparisonColors = ref<{[key: string]: number[]}>({})\n\nexport const landmarkInfo = ref<LandmarkInfo[]>([]);\n\nexport const landmarksLoading = ref(true);\n\nexport const landmarkSize = ref(2);\n\nexport const allSetLandmarks = ref<Record<string, object>>();\n\nexport const currentLandmarkPlacement = ref();\n\nexport const constraintInfo = ref<Constraints[]>([]);\n\nexport const constraintsLoading = ref(true);\n\nexport const constraintsShown = ref([]);\n\nexport const allSetConstraints = ref<Record<string, object>>();\n\nexport const currentConstraintPlacement = ref();\n\nexport const constraintPaintRadius = ref(3);\n\nexport const constraintPaintExclusion = ref(true);\n\nexport const currentTasks = ref<Record<number, Record<string, Task| undefined>>>({})\n\nexport const jobProgressPoll = ref();\n\nexport const analysisExpandedTab = ref(0);\n\nexport const analysisAnimate = ref<boolean>(false);\n\nexport const imageViewMode = ref<boolean>(false);\n\nexport const imageViewIntersectMode = ref<boolean>(false);\n\nexport const imageViewIntersectCropMode = ref<boolean>(false);\n\nexport const imageViewAxis = ref<string>('Z');\n\nexport const imageViewSlices = ref({x: 0, y: 0, z: 0});\n\nexport const imageViewSliceRanges = ref({x: [0, 1], y: [0, 1], z: [0, 1]});\n\nexport const imageViewCroppedSliceRanges = ref({x: [0, 1], y: [0, 1], z: [0, 1]});\n\nexport const imageViewWindow = ref<number>(0);\n\nexport const imageViewWindowRange = ref<number[]>([0, 1]);\n\nexport const imageViewLevel = ref<number>(0);\n\nexport const imageViewLevelRange = ref<number[]>([0, 1]);\n\nexport const deepSSMResult = ref<Record<string, any>>();\n\nexport const deepSSMDataTab = ref<number>(-1);\n\nexport const deepSSMAugDataShown = ref<'Original' | 'Generated'>('Generated');\n\nexport const deepSSMLoadingData = ref<boolean>(false);\n\nexport const groomFormData = ref({});\n\nexport const optimizationFormData = ref({});\n\nexport const uniformScale = ref<boolean>(true);\n\nexport const deepSSMErrorGlobalRange = ref<number[]>([0, 1]);\n\nexport const deepSSMSamplePage = ref<number>(1);\n\nexport const sortAscending = ref(true);\n\nexport const sortOption = ref<SORT_OPTION>(SORT_OPTION.NAME);\n\nexport const filters = ref<Filters>({\n    private: false,\n    readonly: false,\n});\n","import vtkPolyData from 'vtk.js/Sources/Common/DataModel/PolyData';\n\nexport default async function (url: string | undefined) {\n  if(!url) return vtkPolyData.newInstance()\n  const resp = await fetch(url);\n  const data = await resp.text();\n  const lines = data.trim().split('\\n');\n  const pointArray = lines.map((l) => l.trim().split(/\\s+/).map((f) => parseFloat(f))).flat();\n  const points = Float32Array.from(pointArray);\n\n  const polyData = vtkPolyData.newInstance();\n  polyData.getPoints().setData(points, 3);\n  return polyData;\n}\n","// Helper functions that may come in handy in component or view files\n\n/**\n * Groups an array of objects by a specified key.\n * @param xs The array of objects to be grouped.\n * @param key The key to group the objects by.\n * @returns An object where the keys are unique values of the specified key, and the values are arrays of objects with that key value.\n */\nexport function groupBy(xs: any[], key: string) {\n    return xs.reduce(function(rv, x) {\n        (rv[x[key]] = rv[x[key]] || []).push(x);\n        return rv;\n    }, {});\n}\n\n/**\n * Returns the short date string from a given date string.\n * @param date The date string.\n * @returns The short date string.\n */\nexport function shortDateString(date: string) {\n    return date.split('T')[0]\n}\n\n/**\n * Returns the short file name from a given file path.\n * @param file The file path.\n * @returns The short file name.\n */\nexport function shortFileName(file: string) {\n    const split = file.split('?')[0].split('/')\n    return split[split.length-1]\n}\n\n/**\n * Calculates the Euclidean distance between two points in n-dimensional space.\n * @param one The coordinates of the first point.\n * @param two The coordinates of the second point.\n * @param signed (Optional) Whether to return a signed distance. Defaults to false.\n * @returns The Euclidean distance between the two points.\n */\nexport function getDistance(\n    one: number[], two: number[], signed=false\n){\n    let dimSum = 0\n    let squaredDimSum = 0\n    for (let i = 0; i< one.length; i++){\n        const d = two[i] - one[i]\n        dimSum += d\n        squaredDimSum += d * d\n    }\n    if (signed && dimSum < 0) {\n        return -Math.sqrt(squaredDimSum);\n    }\n    return Math.sqrt(squaredDimSum);\n}\n\n/**\n * Converts a hexadecimal color code to an RGB array.\n * @param hex The hexadecimal color code.\n * @returns The RGB array representation of the color.\n */\nexport function hexToRgb(hex: string) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? [\n      parseInt(result[1], 16),\n      parseInt(result[2], 16),\n      parseInt(result[3], 16)\n    ] : [0, 0, 0];\n}\n\nexport function rgbToHex(rgb) {\n    const components = rgb.map((c) => {\n        const hex = c.toString(16);\n        return hex.length == 1 ? \"0\" + hex : hex;\n    })\n    return \"#\" + components.join(\"\");\n  }\n\nexport function distance(a, b){\n    return Math.pow(a.x - b.x, 2) +  Math.pow(a.y - b.y, 2) +  Math.pow(a.z - b.z, 2);\n}\n\n/**\n * Parses a CSV file from the specified URL and returns the data as an array of objects.\n * @param url - The URL of the CSV file to parse.\n * @returns A promise that resolves to an array of objects representing the CSV data.\n */\nexport async function parseCSVFromURL(url: string) {\n    return fetch(url)\n    .then(response => response.text())\n    .then(text => {\n        // last value of the substring is blank, so we remove it\n        const splitstring = text.split('\\n').slice(0, -1);\n\n        const data: {[x: string]: any} = [];\n        for (let i = 1; i < splitstring.length; i++) {\n            const d = {};\n            const row = splitstring[i].split(',');\n            for (let j = 0; j < row.length; j++) {\n                // parseFloat if row[j] is a number, otherwise keep it as a string\n                d[j] = isNaN(parseFloat(row[j])) ? row[j] : parseFloat(row[j]);\n            }\n            data.push(d);\n        }\n        return data;\n    })\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landmarks.vue?vue&type=style&index=0&id=addf5cb4&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubsetSelection.vue?vue&type=style&index=0&id=2a5819ca&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DatasetSelect.vue?vue&type=style&index=0&id=13c28144&prod&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer.vue?vue&type=style&index=0&id=3e171041&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeepSSMTab.vue?vue&type=style&index=0&id=44107574&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskInfo.vue?vue&type=style&index=0&id=692056fc&prod&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Charts.vue?vue&type=style&index=0&id=06c87e7c&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&id=598efbd3&prod&lang=css\"","import vtkImageData from 'vtk.js/Sources/Common/DataModel/ImageData';\nimport vtkPolyData from 'vtk.js/Sources/Common/DataModel/PolyData';\nimport vtkMapper from 'vtk.js/Sources/Rendering/Core/Mapper';\n// import vtkDataArray from 'vtk.js/Sources/Common/Core/DataArray';\n\n\nexport default function generateMapper(shape: vtkPolyData | vtkImageData) {\n    const mapper = vtkMapper.newInstance();\n\n    if (shape.getClassName() == 'vtkPolyData') {\n        mapper.setInputData(shape as vtkPolyData);\n    } else if (shape.getClassName() == 'vtkImageData') {\n        console.error(\"Unexpected analysis mesh type\");\n    }\n\n    return mapper;\n}   ","import { AnalysisParams, CacheComparison, Project, Task } from \"@/types\";\nimport {\n     loadingState,\n     selectedDataset,\n     selectedProject,\n     allProjectsForDataset,\n     layersShown,\n     particlesForOriginalDataObjects,\n     allDataObjectsInDataset,\n     analysis,\n     cachedMarchingCubes,\n     currentTasks,\n     groomedShapesForOriginalDataObjects,\n     jobProgressPoll,\n     reconstructionsForOriginalDataObjects,\n     cachedParticleComparisonColors,\n     cachedParticleComparisonVectors,\n     allDatasets,\n     goodBadAngles,\n     landmarkInfo,\n     analysisExpandedTab,\n     selectedDataObjects,\n     particleSize,\n     analysisFilesShown,\n     meanAnalysisParticlesFiles,\n     currentAnalysisParticlesFiles,\n     goodBadMaxAngle,\n     showDifferenceFromMeanMode,\n     showGoodBadParticlesMode,\n     analysisAnimate,\n     allSetLandmarks,\n     allSubjectsForDataset,\n     constraintInfo,\n     allSetConstraints,\n     deepSSMResult,\n     deepSSMDataTab,\n} from \".\";\nimport imageReader from \"@/reader/image\";\nimport pointsReader from \"@/reader/points\";\nimport generateMapper from \"@/reader/mapper\";\nimport constraintsReader from \"@/reader/constraints\";\nimport {\n    abortTask,\n    analyzeProject,\n    getDataset,\n    getDatasets,\n    getGroomedShapeForDataObject, getOptimizedParticlesForDataObject,\n    getProjectsForDataset,\n    getReconstructedSamplesForProject,\n    groomProject, optimizeProject, refreshProject,\n    deepssmRunProject,\n    getDeepSSMResultForProject,\n    getDeepSSMAugPairsForProject,\n    getDeepSSMTestImagesForProject,\n    getDeepSSMTrainingPairsForProject,\n    getDeepSSMTrainingImagesForProject,\n    getTasksForProject,\n    getProjectFileContents,\n} from '@/api/rest';\nimport { layers, COLORS } from \"./constants\";\nimport { getDistance, hexToRgb } from \"@/helper\";\nimport router from \"@/router\";\n\nexport const resetState = () => {\n    selectedDataObjects.value = [];\n    layersShown.value = ['Original'];\n    landmarkInfo.value = [];\n    currentTasks.value = {};\n    jobProgressPoll.value = undefined;\n    particleSize.value = 2;\n    analysis.value = undefined;\n    analysisExpandedTab.value = 0;\n    analysisFilesShown.value = undefined;\n    currentAnalysisParticlesFiles.value = undefined;\n    meanAnalysisParticlesFiles.value = undefined;\n    goodBadAngles.value = undefined;\n    goodBadMaxAngle.value = 45;\n    showGoodBadParticlesMode.value = false;\n    showDifferenceFromMeanMode.value = false;\n    cachedMarchingCubes.value = {};\n    cachedParticleComparisonVectors.value = {};\n    cachedParticleComparisonColors.value = {};\n    analysisExpandedTab.value = 0;\n    analysisAnimate.value = false;\n}\n\nexport const loadDataset = async (datasetId: number) => {\n    // Only reload if something has changed\n    if (selectedDataset.value?.id != datasetId) {\n        loadingState.value = true;\n        selectedDataset.value = await getDataset(datasetId);\n        loadingState.value = false;\n    }\n}\n\nexport async function getAllDatasets() {\n    const searchText = router.currentRoute.params.searchText;\n    loadingState.value = true;\n    allDatasets.value = (await getDatasets(searchText)).sort((a, b) => {\n        if(a.created < b.created) return 1;\n        if(a.created > b.created) return -1;\n        return 0;\n    });\n    loadingState.value = false;\n}\n\nexport const loadProjectForDataset = async (projectId: number) => {\n    refreshProject(projectId).then((proj) => {\n        if (proj.file){\n            getProjectFileContents(proj.file).then((contents) => {\n                proj.file_contents = contents\n                selectedProject.value = proj\n            })\n        } else {\n            selectedProject.value = proj\n        }\n    });\n    spawnJobProgressPoll()\n}\n\nexport const loadProjectsForDataset = async (datasetId: number) => {\n    const searchText = router.currentRoute.params.searchText;\n    loadingState.value = true;\n    allProjectsForDataset.value = (await getProjectsForDataset(searchText, datasetId)).sort((a, b) => {\n        if(a.created < b.created) return 1;\n        if(a.created > b.created) return -1;\n        return 0;\n    });\n    loadingState.value = false;\n}\n\nexport const selectProject = (projectId: number | undefined) => {\n    if (projectId) {\n        resetState();\n        selectedProject.value = allProjectsForDataset.value.find(\n            (project: Project) => project.id == projectId,\n        )\n    }\n}\n\nexport const loadParticlesForObject = async (type: string, id: number) => {\n    let particles = await getOptimizedParticlesForDataObject(\n        type, id, selectedProject.value?.id\n    )\n    if (particles && particles.length > 0) {\n        particles = particles[0]\n        if (!particlesForOriginalDataObjects.value[type]) {\n            particlesForOriginalDataObjects.value[type] = {}\n        }\n        particlesForOriginalDataObjects.value[type][id] = particles\n    } else if (\n        particlesForOriginalDataObjects.value[type] &&\n        particlesForOriginalDataObjects.value[type][id]\n    ){\n        particlesForOriginalDataObjects.value[type][id] = undefined\n    }\n}\n\nexport const loadGroomedShapeForObject = async (type: string, id: number) => {\n    let groomed = await getGroomedShapeForDataObject(\n        type, id, selectedProject.value?.id\n    )\n    if (groomed && groomed.length > 0) {\n        groomed = groomed[0]\n        if (!groomedShapesForOriginalDataObjects.value[type]) {\n            groomedShapesForOriginalDataObjects.value[type] = {}\n        }\n        groomedShapesForOriginalDataObjects.value[type][id] = groomed\n    }else if (\n        groomedShapesForOriginalDataObjects.value[type] &&\n        groomedShapesForOriginalDataObjects.value[type][id]\n    ){\n        groomedShapesForOriginalDataObjects.value[type][id] = undefined\n    }\n}\n\nexport const loadReconstructedSamplesForProject = async (type: string, id: number) => {\n    if (selectedProject.value) {\n        reconstructionsForOriginalDataObjects.value = await getReconstructedSamplesForProject(\n            type, id, selectedProject.value?.id\n        )\n    }\n}\n\nexport const loadDeepSSMDataForProject = async () => {\n    if (selectedProject.value) {\n        const results = await Promise.all([\n            await getDeepSSMResultForProject(\n                selectedProject.value.id\n            ),\n            await getDeepSSMAugPairsForProject(\n                selectedProject.value.id\n            ),\n            await getDeepSSMTrainingPairsForProject(\n                selectedProject.value.id\n            ),\n            await getDeepSSMTrainingImagesForProject(\n                selectedProject.value.id\n            ),\n            await getDeepSSMTestImagesForProject(\n                selectedProject.value.id\n            )]\n        )\n\n        deepSSMResult.value = {\n            result: results[0][0],\n            aug_pairs: results[1],\n            training_pairs: results[2],\n            images: results[3],\n            test_pairs: results[4]\n        }\n    }\n}\n\nexport function jobAlreadyDone(action: string): Boolean {\n    let layer;\n    switch (action) {\n        case 'groom':\n            layer = layers.value?.find((layer) => layer.name === 'Groomed')\n            return layer ? layer.available() : false\n        case 'optimize':\n            layer = layers.value?.find((layer) => layer.name === 'Particles')\n            return layer ? layer.available() : false\n        case 'analyze':\n            return false;\n        default:\n            return false;\n    }\n}\n\nexport async function spawnJob(action: string, payload: Record<string, any>): Promise<any> {\n    const projectId = selectedProject.value?.id;\n    if (!projectId) return undefined\n    switch (action) {\n        case 'groom':\n            layersShown.value = layersShown.value.filter(\n                (l) => l !== 'Groomed'\n            )\n            return (await groomProject(projectId, payload))?.data\n        case 'optimize':\n            layersShown.value = layersShown.value.filter(\n                (l) => l !== 'Particles'\n            )\n            return (await optimizeProject(projectId, payload))?.data\n        case 'analyze':\n            layersShown.value = layersShown.value.filter(\n                (l) => l !== 'Reconstructed'\n            )\n            return (await analyzeProject(projectId, payload as AnalysisParams))?.data\n        case 'deepssm':\n            return (await deepssmRunProject(projectId, payload))?.data\n        default:\n            break;\n    }\n    return undefined;\n}\n\nexport async function spawnJobProgressPoll() {\n    if (jobProgressPoll.value) clearInterval(jobProgressPoll.value)\n    jobProgressPoll.value = setInterval(pollJobProgress, 1000)\n}\n\nexport function pollJobProgress() {\n    if (selectedProject.value) {\n        const projectId = selectedProject.value.id\n        getTasksForProject(projectId).then((tasks) => {\n            if (tasks) {\n                const refreshedTasks = {}\n                tasks.forEach((task) => {\n                    if (task.name && !task.abort && !task.error && task.percent_complete !== 100) {\n                        refreshedTasks[`${task.name}`] = task\n                    }\n                })\n                currentTasks.value = {\n                    ...currentTasks.value,\n                    ...{[projectId]: refreshedTasks}\n                }\n            }\n        })\n    }\n}\n\nexport async function fetchJobResults(taskName: string) {\n    if (!selectedProject.value) {\n        return;\n    }\n    const refreshedProject = await refreshProject(selectedProject.value.id)\n    let layerName: string = ''\n    let loadFunction: Function | undefined = undefined\n    switch (taskName) {\n        case 'groom':\n            layerName = 'Groomed'\n            loadFunction = loadGroomedShapeForObject\n            break;\n        case 'optimize':\n            layerName = 'Particles'\n            loadFunction = loadParticlesForObject\n            break;\n        case 'analyze':\n            layerName = 'Reconstructed'\n            loadFunction = loadReconstructedSamplesForProject\n            analysis.value = refreshedProject?.last_cached_analysis\n            if (analysis.value) {\n                if (analysis.value.good_bad_angles) {\n                    goodBadAngles.value = analysis.value.good_bad_angles\n                }\n            }\n            break;\n        case 'deepssm':\n            loadFunction = loadDeepSSMDataForProject\n            break;\n    }\n    if (layerName && loadFunction) {\n        if (layerName) {\n            await Promise.all(allDataObjectsInDataset.value.map(\n                (dataObject) => loadFunction ? loadFunction(dataObject.type, dataObject.id) : undefined\n            ))\n            cachedMarchingCubes.value = Object.fromEntries(\n                Object.entries(cachedMarchingCubes.value).filter(\n                    ([cachedLabel]) => !cachedLabel.includes(layerName)\n                )\n            )\n            const layer = layers.value.find((l) => l.name === layerName)\n            if (layer?.available() && !layersShown.value.includes(layerName)) {\n                layersShown.value = [...layersShown.value, layerName]\n            }\n        } else {\n            loadFunction()\n        }\n    }\n}\n\nexport async function abort(task: Task | undefined) {\n    if (task && task.id) abortTask(task.id)\n}\n\nexport async function switchTab(tabName: string) {\n    if (!selectedProject.value) {\n        return;\n    }\n    deepSSMDataTab.value = -1;\n    const refreshedProject = await refreshProject(selectedProject.value.id)\n    switch (tabName) {\n        // add any other tab-switching updates here\n        case 'analyze':\n            if (refreshedProject) {\n                analysis.value = refreshedProject.last_cached_analysis\n                if (analysis.value) {\n                    if (analysis.value.good_bad_angles) {\n                        goodBadAngles.value = analysis.value.good_bad_angles\n                    }\n                }\n            }\n    }\n}\n\nexport function calculateComparisons(mapper: any, currentPoints: number[], meanPoints: number[]) {\n    const vectorValues: number[][] = []\n    let colorValues: number[] = []\n    for (let i = 0; i < currentPoints.length; i += 3){\n        const currentParticle = currentPoints.slice(i, i+3)\n        const meanParticle = meanPoints.slice(i, i+3)\n        const distance = getDistance(currentParticle as number[], meanParticle as number[], true)\n        vectorValues.push([...currentParticle, distance])\n    }\n\n    const pointLocations = mapper.getInputData().getPoints().getData()\n    const normals = mapper.getInputData().getPointData().getArrayByName('Normals').getData()\n    colorValues = Array.from(\n        [...Array(pointLocations.length / 3).keys()].map(\n        (i) =>  {\n            let colorVal = 0;\n            const location = pointLocations.slice(i * 3, i * 3 + 3)\n            const normal = normals.slice(i * 3, i * 3 + 3)\n            const nearbyParticles = vectorValues.map(\n            (p, i) => [getDistance(p.slice(0, 3), location), i, ...p]\n            ).sort((a, b) => a[0] - b[0]).slice(0, 10)\n            const nearestParticleIndex = nearbyParticles[0][1]\n            if (vectorValues[nearestParticleIndex].length < 5){\n            vectorValues[nearestParticleIndex].push(...normal)\n            }\n            colorVal = nearbyParticles[0][5]\n            nearbyParticles.slice(1).forEach((p) => {\n            const weight = 1 / p[0];\n            colorVal = (colorVal * (1 - weight)) + (p[5] * weight)\n            })\n            return colorVal/10 + 0.5\n        }\n        )\n    )\n\n    return { colorValues: colorValues, vectorValues: vectorValues }\n}\n\nexport function cacheComparison(colorValues: number[], vectorValues: number[][], particleComparisonKey: string) {\n    cachedParticleComparisonColors.value[particleComparisonKey] = colorValues\n    cachedParticleComparisonVectors.value[particleComparisonKey] = vectorValues\n}\n\nexport async function cacheAllComparisons(comparisons: CacheComparison[][]) {\n    if (comparisons !== undefined) {\n        const cachePrep = await Promise.all(comparisons?.map(async (g) => {\n            return await Promise.all(\n                g.map(async (domain, i) => {\n                    if(meanAnalysisParticlesFiles.value && meanAnalysisParticlesFiles.value.length > i){\n                        const particleComparisonKey = domain.particles;\n\n                        if (!cachedParticleComparisonColors.value[particleComparisonKey]) { // if the comparison is NOT already cached\n                            const compareToPoints = await pointsReader(meanAnalysisParticlesFiles.value[i]);\n                            const currentPoints = await pointsReader(domain.particles);\n\n                            const currentMesh = await imageReader(domain.file, \"current_mesh.vtk\");\n\n                            return {\n                                \"compareTo\": {\n                                    points: compareToPoints.getPoints().getData(),\n                                    particleUrl: domain,\n                                },\n                                \"current\":  {\n                                    points: currentPoints.getPoints().getData(),\n                                    mapper: generateMapper(currentMesh),\n                                    particleUrl: domain.particles,\n                                },\n                            }\n                        }\n                    }\n                })\n            )\n        }))\n\n        cachePrep.forEach((g) => {\n            if (g !== undefined) {\n                g.forEach((c) => {\n                    if (c){\n                        const { current, compareTo } = c;\n                        const comparisons = calculateComparisons(current.mapper, current.points as number[], compareTo.points as number[])\n                        cacheComparison(comparisons.colorValues, comparisons.vectorValues, current.particleUrl);\n                    }\n                })\n            }\n        })\n    }\n}\n\n\nexport function isShapeShown(subjectID, domain) {\n    return selectedDataObjects.value.some((d) => (\n        d.subject === subjectID && d.anatomy_type.replace('anatomy_', '') === domain\n    ))\n}\n\nexport function toggleSubjectShown(subjectID, domain) {\n    const shape = allDataObjectsInDataset.value.find((d) => (\n        d.subject === subjectID && d.anatomy_type.replace('anatomy_', '') === domain\n    ))\n    if (shape) {\n        if (selectedDataObjects.value.includes(shape)) {\n            selectedDataObjects.value = selectedDataObjects.value.filter(\n                (s) => s !== shape\n            )\n        } else {\n            selectedDataObjects.value = [\n                ...selectedDataObjects.value,\n                shape\n            ]\n        }\n    }\n}\n\nexport function getWidgetInfo(subject, item) {\n    return {\n        subjectName: subject.name,\n        domain: item.domain,\n        widgetID: item.id,\n    }\n}\n\nexport function getLandmarkLocation(subject, item) {\n    if (\n        allSetLandmarks.value &&\n        allSetLandmarks.value[subject.name]\n        && allSetLandmarks.value[subject.name][item.domain]\n    )\n    return allSetLandmarks.value[subject.name][item.domain][item.id]\n}\n\nexport function setLandmarkLocation(subject, item, location) {\n    if (!allSetLandmarks.value) allSetLandmarks.value = {}\n    if (!allSetLandmarks.value[subject.name]) allSetLandmarks.value[subject.name] = {}\n    if (!allSetLandmarks.value[subject.name][item.domain]) allSetLandmarks.value[subject.name][item.domain] = {}\n    allSetLandmarks.value[subject.name][item.domain][item.id] = location\n}\n\n\nexport function reassignLandmarkIDsByIndex() {\n    const reassignedIds = {}\n    landmarkInfo.value = landmarkInfo.value.map((info, index) => {\n        if (info.id !== undefined) reassignedIds[info.id] = index\n        return Object.assign(info, {id: index})\n    })\n    if (allSetLandmarks.value) {\n        allSetLandmarks.value = Object.fromEntries(\n            Object.entries(allSetLandmarks.value)\n            .map(([subjectName, subjectRecords]) => {\n                return [subjectName, Object.fromEntries(\n                    Object.entries(subjectRecords).map(([domain, domainRecords]) => {\n                        domainRecords = Object.fromEntries(\n                            Object.entries(domainRecords)\n                            .filter(([lId,]) => Object.keys(reassignedIds).includes(lId))\n                            .map(([lId, lData]) => {\n                                return [reassignedIds[lId], lData]\n                            })\n                        )\n                        return [domain, domainRecords]\n                    })\n                )]\n            })\n        )\n    }\n}\n\nexport function reassignLandmarkNumSetValues() {\n    // only reassign if a value has changed\n    const reassign = false\n    const newInfo = landmarkInfo.value.map((lInfo) => {\n        const newNumSet = allSubjectsForDataset.value.filter((s) => !!getLandmarkLocation(s, lInfo)).length\n        if (newNumSet != lInfo.num_set) {\n            lInfo.num_set = newNumSet\n        }\n        return lInfo\n    })\n    if (reassign) landmarkInfo.value = newInfo\n}\n\n\nexport async function getLandmarks() {\n    allSetLandmarks.value = {}\n    if(selectedProject.value?.landmarks) {\n        landmarkInfo.value = selectedProject.value.landmarks_info.map((lInfo, index) => {\n            if (!lInfo.id) {\n                lInfo.id = index\n            }\n            if (!lInfo.name) {\n                lInfo.name = `L${index}`\n            }\n            if (!lInfo.color) {\n                lInfo.color = COLORS[index % COLORS.length]\n            }\n            if (lInfo.color.toString().includes('#')) {\n                lInfo.color = hexToRgb(lInfo.color.toString())\n            }\n            lInfo.num_set = 0\n            return lInfo\n        })\n\n        for (let i = 0; i < selectedProject.value.landmarks.length; i++) {\n            const landmarksObject = selectedProject.value.landmarks[i]\n            const subject = allSubjectsForDataset.value.find((s) => s.id === landmarksObject.subject)\n            const pointData = await pointsReader(landmarksObject.file)\n            const locationData = pointData.getPoints().getData()\n            const locations: number[][] = []\n            for (let p = 0; p < locationData.length; p+=3) {\n                const location = locationData.slice(p, p+3) as number[]\n                locations.push(location)\n            }\n            const lInfos = landmarkInfo.value.filter((lInfo) => lInfo.domain === landmarksObject.anatomy_type.replace('anatomy_', ''))\n            locations.forEach((location, index) => {\n                const lInfo = lInfos[index]\n                setLandmarkLocation(subject, lInfo, location)\n            })\n        }\n        // reassign store var for listeners\n        allSetLandmarks.value = Object.assign({}, allSetLandmarks.value)\n        reassignLandmarkNumSetValues();\n    }\n}\n\nexport function getConstraintLocation(subject, item) {\n    if (\n        allSetConstraints.value &&\n        allSetConstraints.value[subject.name]\n        && allSetConstraints.value[subject.name][item.domain]\n    )\n    return allSetConstraints.value[subject.name][item.domain][item.id]\n}\n\nexport function setConstraintLocation(subject, item, location) {\n    if (!allSetConstraints.value) allSetConstraints.value = {}\n    if (!allSetConstraints.value[subject.name]) allSetConstraints.value[subject.name] = {}\n    if (!allSetConstraints.value[subject.name][item.domain]) allSetConstraints.value[subject.name][item.domain] = {}\n    allSetConstraints.value[subject.name][item.domain][item.id] = location\n    allSetConstraints.value = Object.assign({}, allSetConstraints.value)\n    reassignConstraintNumSetValues()\n}\n\n\nexport function reassignConstraintIDsByIndex() {\n    const reassignedIds = {}\n    constraintInfo.value = constraintInfo.value.map((info, index) => {\n        if (info.id !== undefined) reassignedIds[info.id] = index\n        return Object.assign(info, {id: index})\n    })\n    if (allSetConstraints.value) {\n        allSetConstraints.value = Object.fromEntries(\n            Object.entries(allSetConstraints.value)\n            .map(([subjectName, subjectRecords]) => {\n                return [subjectName, Object.fromEntries(\n                    Object.entries(subjectRecords).map(([domain, domainRecords]) => {\n                        domainRecords = Object.fromEntries(\n                            Object.entries(domainRecords)\n                            .filter(([cId,]) => Object.keys(reassignedIds).includes(cId))\n                            .map(([cId, cData]) => {\n                                return [reassignedIds[cId], cData]\n                            })\n                        )\n                        return [domain, domainRecords]\n                    })\n                )]\n            })\n        )\n    }\n}\n\nexport function reassignConstraintNumSetValues() {\n    // only reassign if a value has changed\n    const reassign = false\n    const newInfo = constraintInfo.value.map((cInfo) => {\n        const newNumSet = allSubjectsForDataset.value.filter((s) => !!getConstraintLocation(s, cInfo)).length\n        if (newNumSet != cInfo.num_set) {\n            cInfo.num_set = newNumSet\n        }\n        return cInfo\n    })\n    if (reassign) constraintInfo.value = newInfo\n}\n\nexport async function getConstraints() {\n    allSetConstraints.value = {}\n    constraintInfo.value = []\n    if(selectedProject.value?.constraints) {\n        for (let i = 0; i < selectedProject.value.constraints.length; i++) {\n            const constraintsObject = selectedProject.value.constraints[i]\n            const subject = allSubjectsForDataset.value.find((s) => s.id === constraintsObject.subject)\n            const domain = constraintsObject.anatomy_type?.replace('anatomy_', '') || '0'\n            if (subject) {\n                const constraintsData = await constraintsReader(constraintsObject.file);\n                ['plane', 'paint'].forEach((constraintType) => {\n                    const newConstraintsOfType = constraintsData.filter((cData) => cData.type === constraintType)\n                    const existingConstraintsOfType = constraintInfo.value.filter((cData) => cData.type === constraintType && cData.domain === domain)\n                    for(let i=0; i<newConstraintsOfType.length; i++) {\n                        let cInfo;\n                        const cData = newConstraintsOfType[i]\n                        if (i >= existingConstraintsOfType.length) {\n                            cInfo = {\n                                id: constraintInfo.value.length,\n                                type: constraintType,\n                                name: cData.name,\n                                domain\n                            }\n                            constraintInfo.value.push(cInfo)\n                        } else {\n                            cInfo = existingConstraintsOfType[i]\n                        }\n                        if(cInfo) setConstraintLocation(subject, cInfo, cData)\n                    }\n                })\n            }\n        }\n        // reassign store var for listeners\n        allSetConstraints.value = Object.assign({}, allSetConstraints.value)\n        reassignConstraintNumSetValues();\n    }\n}\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=4b64ca4f&prod&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.selectedDataset)?_c('div',{staticClass:\"content-area\",staticStyle:{\"height\":\"100%\"}},[_c('v-navigation-drawer',{ref:\"drawer\",attrs:{\"width\":_vm.drawerWidth,\"permanent\":\"\",\"absolute\":\"\"}},[_c('v-list-item',[_c('v-list-item-title',{staticClass:\"text-h6\"},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-icon',_vm._g(_vm._b({attrs:{\"dark\":\"\"},on:{\"click\":_vm.toSelectPage}},'v-icon',attrs,false),on),[_vm._v(\" mdi-arrow-left \")])]}}],null,false,1881277058)},[_c('span',[_vm._v(\"Return to dataset/project selection\")])]),_vm._v(\" Dataset: \"+_vm._s(_vm.selectedDataset.name)+\" \")],1)],1),_c('v-list-item',[_c('v-icon'),_c('v-tabs',{attrs:{\"fixed-tabs\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('v-tab',{attrs:{\"href\":\"#data\"}},[_vm._v(\"Data\")]),_c('v-tab-item',{attrs:{\"value\":\"data\"}},[_c('data-list',{attrs:{\"dataset\":_vm.dataset,\"autoSelectOne\":\"\"}})],1),_c('v-tab',{attrs:{\"href\":\"#info\"}},[_vm._v(\"Info\")]),_c('v-tab-item',{attrs:{\"value\":\"info\"}},[(_vm.selectedProject && _vm.selectedProject.readonly)?_c('span',{staticClass:\"red--text pa-3\"},[_vm._v(\" This project is read only. No operations may be performed. \")]):_c('info-tab')],1),_c('v-tab',{attrs:{\"href\":\"#groom\"}},[_vm._v(\"Groom\")]),_c('v-tab-item',{attrs:{\"value\":\"groom\"}},[(_vm.selectedProject && _vm.selectedProject.readonly)?_c('span',{staticClass:\"red--text pa-3\"},[_vm._v(\" This project is read only. No grooming or optimizing may be performed. \")]):_c('tab-form',{attrs:{\"form\":\"groom\"},on:{\"change\":_vm.refreshRender}})],1),_c('v-tab',{attrs:{\"href\":\"#optimize\"}},[_vm._v(\"Optimize\")]),_c('v-tab-item',{attrs:{\"value\":\"optimize\"}},[(_vm.selectedProject && _vm.selectedProject.readonly)?_c('span',{staticClass:\"red--text pa-3\"},[_vm._v(\" This project is read only. No grooming or optimizing may be performed. \")]):_c('tab-form',{attrs:{\"form\":\"optimize\",\"prerequisite\":() => _vm.jobAlreadyDone('groom'),\"prerequisite_unfulfilled\":\"Perform a groom operation before optimizing.\"},on:{\"change\":_vm.refreshRender}})],1),_c('v-tab',{attrs:{\"href\":\"#analyze\"}},[_vm._v(\"Analyze\")]),_c('v-tab-item',{attrs:{\"value\":\"analyze\"}},[_c('analysis-tab',{attrs:{\"currentTab\":_vm.tab || ''},on:{\"change\":_vm.refreshRender}})],1),_c('v-tab',{attrs:{\"href\":\"#deepssm\"}},[_vm._v(\"DeepSSM\")]),_c('v-tab-item',{attrs:{\"value\":\"deepssm\"}},[_c('DeepSSMTab',{on:{\"change\":_vm.refreshRender}})],1)],1)],1),_c('br')],1),_c('v-card',{staticClass:\"px-3 render-controls\",style:(_vm.renderAreaStyle)},[_c('render-controls',{attrs:{\"currentTab\":_vm.tab || ''},on:{\"change\":_vm.refreshRender}})],1),_c('v-card',{staticClass:\"pa-3\",style:(_vm.renderAreaStyle)},[(_vm.selectedDataObjects.length > 0 || _vm.analysisFilesShown && _vm.analysisFilesShown.length)?[_c('shape-viewer',{attrs:{\"data\":_vm.renderData,\"metaData\":_vm.renderMetaData,\"rows\":_vm.rows,\"columns\":_vm.cols,\"glyph-size\":_vm.particleSize,\"currentTab\":_vm.tab || '',\"drawerWidth\":_vm.drawerWidth}})]:_c('span',[_vm._v(\"Select any number of data objects\")]),_c('v-overlay',{attrs:{\"absolute\":\"\",\"value\":!_vm.loadingState && _vm.renderLoading,\"stop-propagation\":true}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\"}})],1)],2)],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.resize),expression:\"resize\"}],ref:\"vtk\",staticClass:\"render-area\"},[_c('canvas',{ref:\"labels\",staticClass:\"labels-canvas\"}),(_vm.showColorScale)?_c('div',{ref:\"colors\",staticClass:\"color-scales\"}):_vm._e(),(_vm.showColorScale)?_c('div',{ref:\"colorsTitle\",staticClass:\"color-scale-title\"}):_vm._e(),(_vm.showColorScale)?_c('div',{ref:\"colorsLabels\",staticClass:\"color-scale-labels\"}):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _ from 'lodash';\n\nimport vtkPickerManipulator from 'vtk.js/Sources/Widgets/Manipulators/PickerManipulator';\nimport vtkWidgetManager from 'vtk.js/Sources/Widgets/Core/WidgetManager';\nimport vtkSeedWidget from 'vtk.js/Sources/Widgets/Widgets3D/SeedWidget';\nimport vtkPaintWidget from 'vtk.js/Sources/Widgets/Widgets3D/PaintWidget';\nimport vtkImplicitPlaneWidget from 'vtk.js/Sources/Widgets/Widgets3D/ImplicitPlaneWidget'\nimport vtkColorTransferFunction from 'vtk.js/Sources/Rendering/Core/ColorTransferFunction';\nimport vtkDataArray from 'vtk.js/Sources/Common/Core/DataArray';\n\nimport { kdTree } from 'kd-tree-javascript';\nimport { distance } from '@/helper'\nimport { ref, watch } from 'vue'\n\nimport {\n    layersShown,\n    landmarkInfo, landmarkSize, currentLandmarkPlacement,\n    getLandmarkLocation, setLandmarkLocation,\n    allSetLandmarks, reassignLandmarkNumSetValues,\n    constraintInfo, constraintsShown, allSetConstraints, currentConstraintPlacement,\n    getConstraintLocation, setConstraintLocation,\n    constraintPaintRadius, constraintPaintExclusion,\n} from '@/store';\n\nconst manipulators = ref({});  // organized by label, domain\nconst dataKDTrees = ref({});   // organized by label, domain\nconst shapeKDTrees = ref({});   // organized by label, domain\nconst seedWidgets = ref({});  // organized by label, domain, id\nconst planeWidgets = ref({});  // organized by label, domain, id\nconst paintWidgets = ref({});  // organized by label, domain, id\n\nexport default {\n    // ---------------------\n    // Initialization\n    // ---------------------\n    initializeWidgets() {\n        // called when shapes or layers shown have changed\n        this.vtk.widgetManagers = {}\n        Object.entries(this.vtk.renderers).forEach(([label, renderer]) => {\n            manipulators.value[label] = {}\n            const wm = vtkWidgetManager.newInstance()\n            wm.setRenderer(renderer)\n            wm.disablePicking();\n            this.vtk.widgetManagers[label] = wm\n            renderer.getActors().forEach((actor) => {\n                const domain = actor.getMapper()?.getInputData()?.getFieldData()?.getArrayByName('domain')?.getData()[0]\n                if (!manipulators.value[label][domain]) {\n                    const m = vtkPickerManipulator.newInstance()\n                    m.getPicker().addPickList(actor)\n                    manipulators.value[label][domain] = m\n                }\n                if (layersShown.value.includes('Landmarks')) {\n                    const existingWidgets = seedWidgets.value[label]\n                    if (existingWidgets) {\n                        Object.values(existingWidgets).forEach((ws) => {\n                            Object.values(ws).forEach((w) => {\n                                const widgetHandle = wm.addWidget(w)\n                                widgetHandle.setScaleInPixels(false)\n                                widgetHandle.onEndInteractionEvent(() => {\n                                    this.seedWidgetEndInteraction(w)\n                                })\n                            })\n                        })\n                    }\n                }\n                if (layersShown.value.includes('Constraints')) {\n                    this.initializeConstraintColormap(actor)\n                    const existingWidgets = planeWidgets.value[label]\n                    if (existingWidgets) {\n                        Object.values(existingWidgets).forEach((ws) => {\n                            Object.values(ws).forEach((w) => {\n                                const widgetHandle = wm.addWidget(w)\n                                this.stylePlaneWidget(widgetHandle)\n                                widgetHandle.onEndInteractionEvent(() => {\n                                    this.planeWidgetEndInteraction(w)\n                                })\n                            })\n                        })\n                    }\n                }\n            })\n        })\n        if (layersShown.value.includes('Landmarks')) {\n            this.landmarkInfoUpdated(landmarkInfo.value)\n        }\n        if (layersShown.value.includes('Constraints')) {\n            this.constraintInfoUpdated(constraintInfo.value)\n        }\n    },\n    initializeConstraintColormap(actor) {\n        const mapper = actor.getMapper()\n        if (!mapper.setLookupTable) return undefined\n\n        const ctfun = vtkColorTransferFunction.newInstance();\n        let defaultColor = [255, 255, 255]\n        if (actor.getProperty() && actor.getProperty().getColor) {\n            defaultColor = actor.getProperty().getColor()\n        }\n        ctfun.addRGBPoint(1, ...defaultColor); // 0: default color has not been excluded\n        ctfun.addRGBPoint(0, 0.5, 0.5, 0.5); // 1: gray has been excluded\n        ctfun.setMappingRange(0, 1)\n        ctfun.updateRange()\n\n        mapper.setLookupTable(ctfun)\n        mapper.setColorByArrayName('color')\n\n        const inputData = mapper.getInputData()\n        const allPoints = inputData.getPoints()\n        const colorArray = vtkDataArray.newInstance({\n            name: 'color',\n            values: Array.from(\n                { length: allPoints.getNumberOfPoints() }, () => 1\n            )\n        })\n        inputData.getPointData().addArray(colorArray)\n    },\n\n    // ---------------------\n    // Getters\n    // ---------------------\n    getWidgetManager(label) {\n        return this.vtk.widgetManagers[label]\n    },\n    getManipulator(label, domain) {\n        if (!manipulators.value[label]) manipulators.value[label] = {}\n        return manipulators.value[label][domain]\n    },\n    getDataKDTree(label, domain, cData) {\n        if (!dataKDTrees.value[label]) dataKDTrees.value[label] = {}\n        if (!dataKDTrees.value[label][domain]) {\n            const { points } = cData.data.field\n            const scalarPoints = points.map((p, i) => ({ x: p[0], y: p[1], z: p[2], i }))\n            dataKDTrees.value[label][domain] = new kdTree(scalarPoints, distance, ['x', 'y', 'z', 'i']);\n        }\n        return dataKDTrees.value[label][domain]\n    },\n    getShapeKDTree(label, domain, shapeData) {\n        if (!shapeKDTrees.value[label]) shapeKDTrees.value[label] = {}\n        if (!shapeKDTrees.value[label][domain]) {\n            const pointData = Array.prototype.slice.call(shapeData.getPoints().getData())\n            const allPoints = Array.from({ length: pointData.length / 3 }, () => pointData.splice(0, 3));\n            const treePoints = allPoints.map((p) => ({ x: p[0], y: p[1], z: p[2] }))\n            shapeKDTrees.value[label][domain] = new kdTree(\n                treePoints,\n                distance,\n                ['x', 'y', 'z']\n            )\n        }\n        return shapeKDTrees.value[label][domain]\n    },\n    getSeedWidget(label, domain, lInfo) {\n        if (!seedWidgets.value[label]) seedWidgets.value[label] = {}\n        if (!seedWidgets.value[label][domain]) seedWidgets.value[label][domain] = {}\n        if (!seedWidgets.value[label][domain][lInfo.id]) {\n            this.createSeedWidget(label, domain, lInfo)\n        }\n        return seedWidgets.value[label][domain][lInfo.id]\n    },\n    getPlaneWidget(label, domain, cInfo) {\n        if (!planeWidgets.value[label]) planeWidgets.value[label] = {}\n        if (!planeWidgets.value[label][domain]) planeWidgets.value[label][domain] = {}\n        if (!planeWidgets.value[label][domain][cInfo.id]) {\n            this.createPlaneWidget(label, domain, cInfo)\n        }\n        return planeWidgets.value[label][domain][cInfo.id]\n    },\n    getPaintWidget(label, domain, cInfo, inputData) {\n        if (!paintWidgets.value[label]) paintWidgets.value[label] = {}\n        if (!paintWidgets.value[label][domain]) paintWidgets.value[label][domain] = {}\n        // always create new paint widget\n        this.createPaintWidget(label, domain, cInfo, inputData)\n        return paintWidgets.value[label][domain][cInfo.id]\n    },\n\n    // ---------------------\n    // Widget creation\n    // ---------------------\n    createSeedWidget(label, domain, lInfo) {\n        const renderer = this.vtk.renderers[label]\n        const manipulator = this.getManipulator(label, domain)\n        const widgetManager = this.getWidgetManager(label)\n        if (renderer && manipulator) {\n            const widget = vtkSeedWidget.newInstance()\n            const widgetHandle = widgetManager.addWidget(widget)\n            widget.setManipulator(manipulator)\n            widgetHandle.setScaleInPixels(false)\n            widgetHandle.onEndInteractionEvent(() => {\n                this.seedWidgetEndInteraction(widget)\n            })\n            seedWidgets.value[label][domain][lInfo.id] = widget\n        }\n    },\n    createPlaneWidget(label, domain, cInfo) {\n        const renderer = this.vtk.renderers[label]\n        const manipulator = this.getManipulator(label, domain)\n        const widgetManager = this.getWidgetManager(label)\n        if (renderer && manipulator) {\n            const pickList = manipulator.getPicker().getPickList()\n            if (pickList.length > 0) {\n                const actor = pickList[0]\n                const bounds = actor.getBounds()\n                const widget = vtkImplicitPlaneWidget.newInstance()\n                widget.placeWidget(bounds)\n                widget.setPlaceFactor(2)\n                const widgetHandle = widgetManager.addWidget(widget)\n                widgetHandle.getRepresentations()[0].setLabels({\n                    'subject': label,\n                    'domain': domain\n                })\n                this.stylePlaneWidget(widgetHandle)\n                widgetHandle.onEndInteractionEvent(() => {\n                    this.planeWidgetEndInteraction(widget)\n                })\n                planeWidgets.value[label][domain][cInfo.id] = widget\n            }\n        }\n    },\n    createPaintWidget(label, domain, cInfo, inputData) {\n        const widgetManager = this.getWidgetManager(label)\n        const manipulator = this.getManipulator(label, domain)\n        if (manipulator) {\n            const widget = vtkPaintWidget.newInstance({ manipulator });\n            const widgetHandle = widgetManager.addWidget(widget)\n            paintWidgets.value[label][domain][cInfo.id] = widget\n            widgetHandle.onEndInteractionEvent(() => {\n                this.paintWidgetEndInteraction(widget, inputData)\n            })\n        }\n    },\n    stylePlaneWidget(widgetHandle) {\n        widgetHandle.setHandleSizeRatio(0.08)\n        widgetHandle.setAxisScale(0.25)\n        widgetHandle.setRepresentationStyle({\n            static: {\n                outline: {\n                    opacity: 0\n                }\n            }\n        })\n    },\n\n    // ---------------------\n    // Widget interaction events\n    // ---------------------\n\n    seedWidgetEndInteraction(widget) {\n        Object.entries(seedWidgets.value).forEach(([label, subjectWidgets]) => {\n            Object.entries(subjectWidgets).forEach(([domain, shapeWidgets]) => {\n                Object.entries(shapeWidgets).forEach(([id, w]) => {\n                    if (widget === w) {\n                        const lInfo = { domain, id }\n                        const wm = this.getWidgetManager(label)\n                        // When widget moved, update value in allSetLandmarks\n                        const landmarkCoord = widget.getWidgetState().getMoveHandle().getOrigin()\n                        if (landmarkCoord) {\n                            wm.releaseFocus(widget);\n                            const previousLocation = getLandmarkLocation({ name: label }, lInfo, landmarkCoord)\n                            if (!previousLocation || previousLocation.some((v, i) => landmarkCoord[i] != v)) {\n                                setLandmarkLocation({ name: label }, lInfo, landmarkCoord)\n                                // reassign store var for listeners\n                                allSetLandmarks.value = Object.assign({}, allSetLandmarks.value)\n                                reassignLandmarkNumSetValues()\n                                currentLandmarkPlacement.value = undefined;\n                            }\n                        }\n\n                    }\n                })\n            })\n        })\n    },\n    planeWidgetEndInteraction(widget) {\n        Object.entries(planeWidgets.value).forEach(([label, subjectWidgets]) => {\n            Object.entries(subjectWidgets).forEach(([domain, shapeWidgets]) => {\n                Object.entries(shapeWidgets).forEach(([id, w]) => {\n                    if (widget === w) {\n                        const cInfo = { domain, id }\n                        // When widget moved, update value in allSetConstraints\n                        const widgetState = widget.getWidgetState()\n                        setConstraintLocation({ name: label }, cInfo, {\n                            type: 'plane',\n                            data: {\n                                origin: widgetState.getOrigin(),\n                                normal: widgetState.getNormal(),\n                            }\n                        })\n                        this.updateConstraintColors()\n                    }\n                })\n            })\n        })\n    },\n    paintWidgetEndInteraction(widget, inputData) {\n        Object.entries(paintWidgets.value).forEach(([label, subjectWidgets]) => {\n            Object.entries(subjectWidgets).forEach(([domain, shapeWidgets]) => {\n                Object.entries(shapeWidgets).forEach(([id, w]) => {\n                    if (widget === w) {\n                        const cInfo = { domain, id }\n                        const allPoints = inputData.getPoints()\n                        const tree = this.getShapeKDTree(label, domain, inputData)\n                        let cData = getConstraintLocation({ name: label }, cInfo)\n                        if (!cData) {\n                            const numPoints = allPoints.getNumberOfPoints()\n                            const points = Array.from({ length: numPoints }).map((v, i) => allPoints.getPoint(i))\n                            cData = {\n                                type: 'paint',\n                                data: {\n                                    field: {\n                                        points,\n                                        scalars: Array.from({ length: numPoints }).fill(1),\n                                    }\n                                }\n                            }\n                        }\n                        let paintedPoints = []\n                        widget.getWidgetState().getTrailList().forEach((state) => {\n                            const currentPoint = state.getOrigin()\n                            if (currentPoint) {\n                                paintedPoints = [\n                                    ...paintedPoints,\n                                    ...tree.nearest(\n                                        { x: currentPoint[0], y: currentPoint[1], z: currentPoint[2] },\n                                        allPoints.getNumberOfPoints(),\n                                        constraintPaintRadius.value * 2\n                                    )\n                                ]\n                            }\n                        })\n                        paintedPoints.forEach(([{ x, y, z },]) => {\n                            const pointIndex = cData.data.field.points.findIndex(\n                                (p) => p[0] === x && p[1] === y && p[2] === z\n                            )\n                            if (pointIndex >= 0 && pointIndex < cData.data.field.scalars.length) {\n                                cData.data.field.scalars[pointIndex] = constraintPaintExclusion.value ? 0 : 1\n                            }\n                        })\n                        setConstraintLocation({ name: label }, cInfo, cData)\n                        this.updateConstraintColors()\n                    }\n                })\n            })\n        })\n    },\n\n    // ---------------------\n    // Update widget states\n    // ---------------------\n    landmarkInfoUpdated(newInfo) {\n        const validWidgets = []\n        Object.entries(manipulators.value).forEach(([label, records]) => {\n            Object.entries(records).forEach(([domain,]) => {\n                newInfo.filter((lInfo) => lInfo.domain === domain).forEach((lInfo) => {\n                    const widget = this.getSeedWidget(label, domain, lInfo)\n                    const handle = widget.getWidgetState().getMoveHandle();\n                    validWidgets.push(widget)\n\n                    const location = getLandmarkLocation({ name: label }, lInfo)\n                    if (location && (\n                        !handle.getOrigin() ||\n                        handle.getOrigin().some((v, i) => v !== location[i])\n                    )) {\n                        handle.setOrigin(location)\n                    }\n                    if (handle.getColor3().some((v, i) => v !== lInfo.color[i])) {\n                        handle.setColor3(...lInfo.color);\n                    }\n                    if (handle.getScale1() != landmarkSize.value) {\n                        handle.setScale1(landmarkSize.value);\n                    }\n                })\n            })\n        })\n        seedWidgets.value = Object.fromEntries(\n            Object.entries(seedWidgets.value).map(([label, labelRecords]) => {\n                return [label, Object.fromEntries(\n                    Object.entries(labelRecords).map(([domain, shapeRecords]) => {\n                        return [domain, Object.fromEntries(\n                            Object.entries(shapeRecords).map(([id, seedWidget]) => {\n                                if (!validWidgets.includes(seedWidget)) {\n                                    this.getWidgetManager(label).removeWidget(seedWidget)\n                                    return [id, undefined]\n                                }\n                                return [id, seedWidget]\n                            })\n                        )]\n                    })\n                )]\n            })\n        )\n        this.render()\n    },\n    landmarkSizeUpdated() {\n        Object.values(seedWidgets.value).forEach((subjectWidgets) => {\n            Object.values(subjectWidgets).forEach((shapeWidgets) => {\n                Object.values(shapeWidgets).forEach((widget) => {\n                    const handle = widget.getWidgetState().getMoveHandle();\n                    if (handle.getScale1() != landmarkSize.value) {\n                        handle.setScale1(landmarkSize.value);\n                    }\n                })\n            })\n        })\n        this.render()\n    },\n    currentLandmarkPlacementUpdated(newPlacement) {\n        if (newPlacement) {\n            const label = newPlacement.subjectName\n            const domain = newPlacement.domain\n            const id = newPlacement.widgetID\n            const widgetManager = this.getWidgetManager(label)\n            const manipulator = this.getManipulator(label, domain)\n            if (manipulator) {\n                const widget = this.getSeedWidget(label, domain, { id, domain })\n                const pickList = manipulator.getPicker().getPickList()\n                if (pickList.length > 0) {\n                    const actor = pickList[0]\n                    widget.placeWidget(actor.getBounds());\n                    widgetManager.grabFocus(widget)\n                }\n            }\n        }\n    },\n    constraintInfoUpdated(newInfo) {\n        const validWidgets = []\n        Object.entries(manipulators.value).forEach(([label, records]) => {\n            Object.entries(records).forEach(([domain,]) => {\n                newInfo.filter((cInfo) => cInfo.domain === domain).forEach((cInfo) => {\n                    if (cInfo.type === 'plane') {\n                        const widget = this.getPlaneWidget(label, domain, cInfo)\n                        const widgetState = widget.getWidgetState()\n                        const cData = getConstraintLocation({ name: label }, cInfo)\n                        validWidgets.push(widget)\n\n                        let origin = cData?.data?.origin\n                        if (origin && widgetState.getOrigin().some((v, i) => v != origin[i])) {\n                            widgetState.setOrigin(origin)\n                        }\n                        let normal = cData?.data?.normal\n                        if (normal && widgetState.getNormal().some((v, i) => v != normal[i])) {\n                            widgetState.setNormal(normal)\n                        }\n\n                        widget.setVisibility(origin && normal && constraintsShown.value.includes(cInfo.id))\n                    }\n                })\n            })\n        })\n        planeWidgets.value = Object.fromEntries(\n            Object.entries(planeWidgets.value).map(([label, labelRecords]) => {\n                return [label, Object.fromEntries(\n                    Object.entries(labelRecords).map(([domain, shapeRecords]) => {\n                        return [domain, Object.fromEntries(\n                            Object.entries(shapeRecords).map(([id, planeWidget]) => {\n                                if (!validWidgets.includes(planeWidget)) {\n                                    this.getWidgetManager(label).removeWidget(planeWidget)\n                                    return [id, undefined]\n                                }\n                                return [id, planeWidget]\n                            })\n                        )]\n                    })\n                )]\n            })\n        )\n        this.updateConstraintColors()\n        this.render()\n    },\n    constraintsShownUpdated() {\n        this.constraintInfoUpdated(constraintInfo.value)\n    },\n    currentConstraintPlacementUpdated(newPlacement) {\n        if (newPlacement) {\n            const label = newPlacement.subjectName\n            const domain = newPlacement.domain\n            const id = newPlacement.widgetID\n            const widgetManager = this.getWidgetManager(label)\n            const manipulator = this.getManipulator(label, domain)\n            const cInfo = constraintInfo.value.find((c) =>\n                c.id == id && c.domain == domain\n            )\n            if (manipulator) {\n                const pickList = manipulator.getPicker().getPickList()\n                if (pickList.length > 0) {\n                    const actor = pickList[0]\n                    if (cInfo?.type === 'plane') {\n                        const bounds = actor.getBounds()\n                        const origin = [\n                            (bounds[0] + bounds[1]) / 2,\n                            (bounds[2] + bounds[3]) / 2,\n                            (bounds[4] + bounds[5]) / 2,\n                        ]\n                        const normal = [0, 0, 1]\n                        setConstraintLocation(\n                            { name: label },\n                            { id, domain },\n                            { type: 'plane', data: { origin, normal } },\n                        )\n                        currentConstraintPlacement.value = undefined\n                        this.constraintInfoUpdated(constraintInfo.value)\n                    } else if (manipulator && cInfo?.type === 'paint') {\n                        const mapper = actor.getMapper()\n                        const inputData = mapper.getInputData()\n                        const widget = this.getPaintWidget(label, domain, cInfo, inputData)\n                        widget.setRadius(constraintPaintRadius.value)\n                        widget.getWidgetState().getHandle().setVisible(true)\n                        widgetManager.grabFocus(widget);\n                        widget.getWidgetState().setActive(true)\n                    }\n                }\n            }\n        } else {\n            Object.entries(paintWidgets.value).forEach(([label, subjectRecords]) => {\n                const widgetManager = this.getWidgetManager(label)\n                if (widgetManager) {\n                    Object.values(subjectRecords).forEach((shapeRecords) => {\n                        Object.values(shapeRecords).forEach((widget) => {\n                            widget.getWidgetState().getHandle().setVisible(false)\n                            widget.getWidgetState().setActive(false)\n                            widgetManager.releaseFocus(widget)\n                        })\n                    })\n                }\n            })\n        }\n    },\n    updateConstraintColors() {\n        Object.entries(manipulators.value).forEach(([label, shapeManipulators]) => {\n            if (!allSetConstraints.value[label]) return\n            Object.entries(shapeManipulators).forEach(([domain, manipulator]) => {\n                const pickList = manipulator.getPicker().getPickList()\n                if (!pickList.length || !allSetConstraints.value[label][domain]) return\n                const actor = pickList[0]\n                const mapper = actor.getMapper()\n                const inputData = mapper.getInputData()\n                const allPoints = inputData.getPoints()\n                const allPointColors = inputData.getPointData().getArrayByName('color')\n                allPointColors.setData(\n                    new Uint8Array(allPoints.getNumberOfPoints()).fill(1)\n                )\n                Object.entries(allSetConstraints.value[label][domain]).forEach(\n                    ([id, cData]) => {\n                        if (constraintsShown.value.includes(parseInt(id))) {\n                            if (cData?.type === 'plane') {\n                                const { normal, origin } = cData.data\n                                let dot = (a, b) => a.map((x, i) => a[i] * b[i]).reduce((m, n) => m + n);\n                                for (let i = 0; i < allPoints.getNumberOfPoints(); i++) {\n                                    const point = allPoints.getPoint(i)\n                                    const pointColor = allPointColors.getValue(i)\n                                    if (pointColor == 1) {\n                                        // has not been excluded yet, check for exclusion\n                                        const dotProduct = dot(normal, [\n                                            origin[0] - point[0],\n                                            origin[1] - point[1],\n                                            origin[2] - point[2],\n                                        ])\n                                        if (dotProduct <= 0) {\n                                            // negative dotProduct means point is below plane\n                                            allPointColors.setValue(i, 0)\n                                        }\n                                    }\n                                }\n                            } else if (cData?.type === 'paint') {\n                                const { scalars } = cData.data.field\n                                const tree = this.getDataKDTree(label, domain, cData)\n                                if (scalars.length === allPoints.getNumberOfPoints()) {\n                                    for (let i = 0; i < scalars.length; i++) {\n                                        const pointColor = allPointColors.getValue(i)\n                                        if (pointColor == 1) {\n                                            // has not been excluded yet, check for exclusion\n                                            const currentPoint = allPoints.getPoint(i)\n                                            const currentPointObj = {\n                                                x: currentPoint[0],\n                                                y: currentPoint[1],\n                                                z: currentPoint[2],\n                                            }\n                                            const nearests = tree.nearest(currentPointObj, 1)\n                                            if (nearests.length) {\n                                                const [nearest,] = nearests[0]\n                                                if (nearest.i && nearest.i >= 0 && nearest.i < cData.data.field.scalars.length) {\n                                                    allPointColors.setValue(i, cData.data.field.scalars[nearest.i])\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                )\n                allPointColors.modified()\n                inputData.modified()\n            })\n        })\n        this.render()\n    },\n\n    // ---------------------\n    // Listeners\n    // ---------------------\n    watchWidgetStates() {\n        watch(landmarkInfo, _.debounce(this.landmarkInfoUpdated, 1000))\n        watch(landmarkSize, _.debounce(this.landmarkSizeUpdated, 1000))\n        watch(currentLandmarkPlacement, _.debounce(this.currentLandmarkPlacementUpdated, 1000))\n        watch(constraintInfo, _.debounce(this.constraintInfoUpdated, 1000))\n        watch(constraintsShown, _.debounce(this.constraintsShownUpdated, 1000))\n        watch(currentConstraintPlacement, _.debounce(this.currentConstraintPlacementUpdated, 1000))\n        watch(allSetConstraints, _.debounce(this.updateConstraintColors, 1000))\n    },\n}\n","import vtkImageMapper from 'vtk.js/Sources/Rendering/Core/ImageMapper';\nimport vtkImageSlice from 'vtk.js/Sources/Rendering/Core/ImageSlice';\nimport vtkImageCropFilter from 'vtk.js/Sources/Filters/General/ImageCropFilter';\nimport vtkCutter from 'vtk.js/Sources/Filters/Core/Cutter';\nimport vtkMapper from 'vtk.js/Sources/Rendering/Core/Mapper';\nimport vtkPlane from 'vtk.js/Sources/Common/DataModel/Plane';\nimport vtkActor from 'vtk.js/Sources/Rendering/Core/Actor';\nimport vtkProperty from 'vtk.js/Sources/Rendering/Core/Property';\nimport vtkCalculator from 'vtk.js/Sources/Filters/General/Calculator';\nimport vtkGlyph3DMapper from 'vtk.js/Sources/Rendering/Core/Glyph3DMapper';\nimport vtkSphereSource from 'vtk.js/Sources/Filters/Sources/SphereSource';\nimport { FieldDataTypes } from 'vtk.js/Sources/Common/DataModel/DataSet/Constants';\nimport { AttributeTypes } from 'vtk.js/Sources/Common/DataModel/DataSetAttributes/Constants';\n\n\nimport { ref, watch } from 'vue'\nimport {\n    imageViewMode,\n    imageViewIntersectMode,\n    imageViewIntersectCropMode,\n    imageViewAxis,\n    imageViewSlices,\n    imageViewSliceRanges,\n    imageViewCroppedSliceRanges,\n    imageViewWindow,\n    imageViewWindowRange,\n    imageViewLevel,\n    imageViewLevelRange,\n} from '@/store'\n\nconst slices = ref([])\n\nexport default {\n    createSlice(renderer) {\n        const sliceActor = vtkImageSlice.newInstance();\n        const imageMapper = vtkImageMapper.newInstance();\n        const cutPlane = vtkPlane.newInstance();\n        const cutter = vtkCutter.newInstance();\n        const cutMapper = vtkMapper.newInstance();\n        const cutActor = vtkActor.newInstance();\n        const cropFilter = vtkImageCropFilter.newInstance();\n        const particleFilter = vtkCalculator.newInstance();\n        const filteredParticleSphere = vtkSphereSource.newInstance();\n        const filteredParticleActor = vtkActor.newInstance();\n        const filteredParticleMapper = vtkGlyph3DMapper.newInstance();\n\n        sliceActor.setMapper(imageMapper);\n        renderer.addActor(sliceActor);\n\n        cutter.setCutFunction(cutPlane);\n        cutMapper.setInputConnection(cutter.getOutputPort());\n        cutActor.setMapper(cutMapper);\n\n        const cutProperty = cutActor.getProperty();\n        cutProperty.setRepresentation(vtkProperty.Representation.WIREFRAME);\n        cutProperty.setLighting(false);\n        cutProperty.setColor(0, 1, 0);\n        cutProperty.setLineWidth(5);\n        cutActor.setVisibility(false);\n\n        particleFilter.setFormula({\n            getArrays: () => ({\n                input: [{\n                    location: FieldDataTypes.COORDINATE,\n                }],\n                output: [{\n                    location: FieldDataTypes.POINT,\n                    name: 'visible',\n                    dataType: Float32Array,\n                    attribute: AttributeTypes.SCALARS,\n                    numberOfComponents: 1,\n                }]\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [visible] = arraysOut.map((d) => d.getData());\n\n                const imageBounds = cropFilter.getInputData().getBounds()\n                let currentAxis;\n                let axisBounds;\n                switch (imageMapper.getSlicingMode()) {\n                    case 0:\n                        currentAxis = 'x';\n                        axisBounds = imageBounds.slice(0, 2);\n                        break;\n                    case 1:\n                        currentAxis = 'y'\n                        axisBounds = imageBounds.slice(2, 4)\n                        break;\n                    default:\n                        currentAxis = 'z'\n                        axisBounds = imageBounds.slice(4, 6)\n                        break;\n                }\n                const sliceRange = imageViewSliceRanges.value[currentAxis]\n                const currentSlice = imageViewSlices.value[currentAxis]\n                const numSlices = sliceRange[1] - sliceRange[0]\n                const sliceThickness = (axisBounds[1] - axisBounds[0]) / numSlices\n                const slicePosition = (\n                    (currentSlice - sliceRange[0]) / (sliceRange[1] - sliceRange[0])\n                    * (axisBounds[1] - axisBounds[0]) + axisBounds[0]\n                )\n\n                for (var i = 0; i < visible.length; i++) {\n                    const location = coords.slice(i * 3, i * 3 + 3)\n                    const axisCoord = location[imageMapper.getSlicingMode()]\n                    if (\n                        axisCoord >= slicePosition &&\n                        axisCoord < (slicePosition + sliceThickness)\n                    ) {\n                        visible[i] = 1\n                    }\n                }\n\n                arraysOut.forEach(x => x.modified())\n            }\n        })\n        filteredParticleMapper.setScaleModeToScaleByMagnitude();\n        filteredParticleMapper.setScaleFactor(this.glyphSize);\n        filteredParticleMapper.setScaleArray('visible')\n        filteredParticleMapper.setInputConnection(particleFilter.getOutputPort(), 0)\n        filteredParticleMapper.setInputConnection(filteredParticleSphere.getOutputPort(), 1)\n        filteredParticleActor.setMapper(filteredParticleMapper);\n\n        const slice = {\n            renderer,\n            sliceActor,\n            imageMapper,\n            cutPlane,\n            cutter,\n            cutMapper,\n            cutActor,\n            cropFilter,\n            particleFilter,\n            filteredParticleMapper,\n            filteredParticleActor,\n        }\n        slices.value.push(slice)\n        return slice\n    },\n    updateSlice(slice) {\n        const { sliceActor, imageMapper, renderer } = slice;\n\n        let cameraPosition, cameraDirection, cameraViewUp;\n        const camera = renderer.getActiveCamera();\n        const center = sliceActor.getCenter();\n        const distance = camera.getDistance();\n\n        if (['X', 'L'].includes(imageViewAxis.value)) {\n            imageMapper.setSlicingMode('I');\n            imageMapper.setISlice(imageViewSlices.value.x);\n            cameraPosition = [\n                center[0] + distance,\n                center[1],\n                center[2],\n            ]\n            cameraDirection = [-1, 0, 0]\n            cameraViewUp = [0, 1, 0]\n        } else if (['Y', 'P'].includes(imageViewAxis.value)) {\n            imageMapper.setSlicingMode('J');\n            imageMapper.setJSlice(imageViewSlices.value.y);\n            cameraPosition = [\n                center[0],\n                center[1] + distance,\n                center[2],\n            ]\n            cameraDirection = [0, -1, 0]\n            cameraViewUp = [0, 0, -1]\n        } else if (['Z', 'S'].includes(imageViewAxis.value)) {\n            imageMapper.setSlicingMode('K');\n            imageMapper.setKSlice(imageViewSlices.value.z);\n            cameraPosition = [\n                center[0],\n                center[1],\n                center[2] + distance,\n            ]\n            cameraDirection = [0, 0, -1]\n            cameraViewUp = [0, 1, 0]\n        }\n\n        if (cameraPosition && cameraDirection && cameraViewUp) {\n            camera.setPosition(...cameraPosition)\n            camera.setDirectionOfProjection(...cameraDirection)\n            camera.setViewUp(...cameraViewUp)\n        }\n\n        if (imageViewIntersectMode.value) {\n            this.updateCuttingPlane(slice)\n        }\n        renderer.resetCamera()\n    },\n    updateIntersection(slice) {\n        const {\n            renderer, cutter, cutActor,\n            filteredParticleActor, particleFilter, cropFilter,\n        } = slice\n\n        const intersectionShape = renderer.getActors().find((actor) => actor.getClassName() != \"vtkImageSlice\")\n        if (intersectionShape) {\n            if (imageViewIntersectCropMode.value) {\n                // Compare bounds to find crop proportions, apply proportion to image slices\n                const fullBounds = cropFilter.getInputData().getBounds()\n                const fullSlices = [\n                    ...imageViewSliceRanges.value.x,\n                    ...imageViewSliceRanges.value.y,\n                    ...imageViewSliceRanges.value.z,\n                ]\n                const padding = 0.01 // pad crop by 1%\n                const cropToBounds = intersectionShape.getBounds()\n                const cropToProportions = cropToBounds.map((v, i) => {\n                    const minIndex = Math.floor((i) / 2) * 2\n                    const maxIndex = minIndex + 1\n                    const padValue = i % 2 === 0 ? 0 - padding : padding\n                    return (v - fullBounds[minIndex]) / (fullBounds[maxIndex] - fullBounds[minIndex]) + padValue\n                })\n                const cropToSlices = cropToProportions.map((v, i) => {\n                    const minIndex = Math.floor((i) / 2) * 2\n                    const maxIndex = minIndex + 1\n                    return v * (fullSlices[maxIndex] - fullSlices[minIndex]) + fullSlices[minIndex]\n                })\n                imageViewCroppedSliceRanges.value = {\n                    x: cropToSlices.slice(0, 2),\n                    y: cropToSlices.slice(2, 4),\n                    z: cropToSlices.slice(4, 6),\n                }\n                // clamp current slices to cropped ranges\n                imageViewSlices.value = Object.fromEntries(\n                    Object.entries(imageViewSlices.value).map(([axis, slice]) => {\n                        const [min, max] = imageViewCroppedSliceRanges.value[axis]\n                        if (slice < min) return [axis, min]\n                        if (slice > max) return [axis, max]\n                        return [axis, slice]\n                    })\n                )\n                cropFilter.setCroppingPlanes(cropToSlices)\n            } else {\n                cropFilter.reset()\n            }\n            cutter.setInputData(intersectionShape.getMapper().getInputData())\n            cutActor.setVisibility(imageViewIntersectMode.value)\n            cutActor.setPosition(1, 1, 1) // ensure cutActor is always in front of sliceActor\n            intersectionShape.setVisibility(!imageViewIntersectMode.value)\n            renderer.addActor(cutActor);\n            renderer.resetCamera()\n        }\n\n        // If particles shown, filter by slice bounds\n        const particles = renderer.getActors().map(\n            (a) => ({\n                mapper: a.getMapper(),\n                actor: a\n            })\n        ).find(\n            ({ mapper }) => mapper.getClassName() === 'vtkGlyph3DMapper'\n        )\n        if (particles) {\n            particles.actor.setVisibility(!imageViewIntersectMode.value);\n            particleFilter.setInputData(particles.mapper.getInputData())\n            filteredParticleActor.setVisibility(imageViewIntersectMode.value)\n            renderer.addActor(filteredParticleActor)\n        } else {\n            filteredParticleActor.setVisibility(false)\n        }\n        this.render()\n    },\n    updateCuttingPlane(slice) {\n        const { imageMapper, cutPlane, particleFilter } = slice;\n\n        const sliceBounds = imageMapper.getBoundsForSlice()\n        let origin = [sliceBounds[0], sliceBounds[2], sliceBounds[4]]\n        let normal = [0, 0, 0]\n        normal[imageMapper.getSlicingMode()] = 1\n        cutPlane.setOrigin(origin)\n        cutPlane.setNormal(normal)\n\n        // If filtering particles, call modified to trigger filter evaluation\n        particleFilter.getInputData()?.modified()\n    },\n    updateGlyphSize(glyphSize) {\n        slices.value.forEach(({ filteredParticleMapper }) => {\n            filteredParticleMapper.setScaleFactor(glyphSize)\n        })\n        this.render()\n    },\n    addImage(imageData, renderer) {\n        let slice = slices.value.find((s) => s.renderer == renderer)\n        if (!slice) slice = this.createSlice(renderer)\n\n        imageViewMode.value = true\n\n        slice.cropFilter.setInputData(imageData)\n        slice.cropFilter.reset()\n        slice.imageMapper.setInputConnection(slice.cropFilter.getOutputPort())\n        slice.sliceActor.getProperty().setColorWindow(imageViewWindow.value)\n        slice.sliceActor.getProperty().setColorLevel(imageViewLevel.value)\n\n        const dataRange = imageData.getPointData().getScalars().getRange();\n        imageViewLevelRange.value = dataRange\n        imageViewLevel.value = (dataRange[1] - dataRange[0]) / 2 + dataRange[0]\n        imageViewWindowRange.value = [0, (dataRange[1] - dataRange[0])]\n        imageViewWindow.value = imageViewWindowRange.value[1]\n\n        const extent = imageData.getExtent();\n        imageViewSliceRanges.value = {\n            x: [extent[0], extent[1]],\n            y: [extent[2], extent[3]],\n            z: [extent[4], extent[5]],\n        }\n        imageViewCroppedSliceRanges.value = imageViewSliceRanges.value\n\n        if (imageViewIntersectMode.value || imageViewIntersectCropMode.value) this.imageViewIntersectModeUpdated()\n        this.updateSlice(slice)\n    },\n    imageViewModeUpdated() {\n        // resize render window when visibility of image render options changes\n        this.resize();\n        this.render();\n    },\n    imageViewAxisUpdated() {\n        slices.value.forEach((slice) => {\n            this.updateSlice(slice)\n        })\n        this.render()\n    },\n    imageViewSliceUpdated() {\n        if (!imageViewAxis.value) {\n            return undefined\n        }\n        slices.value.forEach((slice) => {\n            const { imageMapper } = slice;\n\n            if (['X', 'L'].includes(imageViewAxis.value)) {\n                imageMapper.setISlice(imageViewSlices.value.x);\n            } else if (['Y', 'P'].includes(imageViewAxis.value)) {\n                imageMapper.setJSlice(imageViewSlices.value.y);\n            } else if (['Z', 'S'].includes(imageViewAxis.value)) {\n                imageMapper.setKSlice(imageViewSlices.value.z);\n            }\n            if (imageViewIntersectMode.value) {\n                this.updateCuttingPlane(slice)\n            }\n        })\n        this.render()\n    },\n    imageViewWindowUpdated() {\n        slices.value.forEach(({ sliceActor }) => {\n            sliceActor.getProperty().setColorWindow(imageViewWindow.value)\n        })\n        this.render()\n    },\n    imageViewLevelUpdated() {\n        slices.value.forEach(({ sliceActor }) => {\n            sliceActor.getProperty().setColorLevel(imageViewLevel.value)\n        })\n        this.render()\n    },\n    imageViewIntersectModeUpdated() {\n        slices.value.forEach((slice) => {\n            this.updateIntersection(slice);\n            this.updateCuttingPlane(slice);\n        })\n        this.render()\n    },\n    watchImageStates() {\n        watch(imageViewMode, this.imageViewModeUpdated)\n        watch(imageViewAxis, this.imageViewAxisUpdated)\n        watch(imageViewSlices, this.imageViewSliceUpdated, { deep: true })\n        watch(imageViewWindow, this.imageViewWindowUpdated)\n        watch(imageViewLevel, this.imageViewLevelUpdated)\n        watch(imageViewIntersectMode, this.imageViewIntersectModeUpdated)\n        watch(imageViewIntersectCropMode, this.imageViewIntersectModeUpdated)\n    },\n    resetImageSlices() {\n        slices.value = []\n    },\n    resetIntersections() {\n        slices.value.forEach(this.updateIntersection)\n    }\n}\n","import vtkMapper from 'vtk.js/Sources/Rendering/Core/Mapper';\nimport vtkPolyData from 'vtk.js/Sources/Common/DataModel/PolyData';\nimport vtkRenderer from 'vtk.js/Sources/Rendering/Core/Renderer';\nimport vtkSphereSource from 'vtk.js/Sources/Filters/Sources/SphereSource';\nimport vtkImageMarchingCubes from 'vtk.js/Sources/Filters/General/ImageMarchingCubes';\nimport vtkOrientationMarkerWidget from 'vtk.js/Sources/Interaction/Widgets/OrientationMarkerWidget';\nimport vtkArrowSource from 'vtk.js/Sources/Filters/Sources/ArrowSource'\nimport vtkDataArray from 'vtk.js/Sources/Common/Core/DataArray';\nimport vtkActor from 'vtk.js/Sources/Rendering/Core/Actor';\nimport vtkCalculator from 'vtk.js/Sources/Filters/General/Calculator';\nimport vtkCamera from 'vtk.js/Sources/Rendering/Core/Camera';\nimport vtkGlyph3DMapper from 'vtk.js/Sources/Rendering/Core/Glyph3DMapper';\nimport { AttributeTypes } from 'vtk.js/Sources/Common/DataModel/DataSetAttributes/Constants';\nimport { ColorMode, ScalarMode } from 'vtk.js/Sources/Rendering/Core/Mapper/Constants';\nimport { FieldDataTypes } from 'vtk.js/Sources/Common/DataModel/DataSet/Constants';\n\nimport {\n    renderLoading, layers, layersShown, orientationIndicator, imageViewIntersectMode,\n    cachedMarchingCubes, cachedParticleComparisonColors, vtkShapesByType,\n    analysisFilesShown, currentAnalysisParticlesFiles, meanAnalysisParticlesFiles,\n    showDifferenceFromMeanMode, cachedParticleComparisonVectors,\n    cacheComparison, calculateComparisons, deepSSMDataTab, uniformScale,\n    showGoodBadParticlesMode, goodBadMaxAngle, goodBadAngles, deepSSMErrorGlobalRange,\n} from '@/store';\nimport { SPHERE_RESOLUTION } from '@/store/constants';\nimport widgetSync from './widgetSync';\nimport imageSync from './imageSync';\n\nexport const GOOD_BAD_COLORS = [\n    [0, 255, 0],\n    [255, 0, 0],\n];\nconst COLORS = [\n    [166, 206, 227],\n    [31, 120, 180],\n    [178, 223, 138],\n    [51, 160, 44],\n    [251, 154, 153],\n    [227, 26, 28],\n    [253, 191, 111],\n    [255, 127, 0],\n    [202, 178, 214],\n    [106, 61, 154],\n    [255, 255, 153],\n    [177, 89, 40],\n];\n\nexport default {\n    ...widgetSync,\n    ...imageSync,\n    async resize() {\n        await this.$nextTick();\n        if (this.vtk.renderWindow) {\n            this.updateSize();\n        }\n    },\n    updateSize() {\n        const el = this.$refs.vtk;\n        if (el) {\n            const { width, height } = el.getBoundingClientRect();\n            this.vtk.openglRenderWindow.setSize(width, height);\n            this.render();\n        }\n    },\n    newOrientationCube(interactor) {\n        return vtkOrientationMarkerWidget.newInstance({\n            actor: orientationIndicator.value,\n            interactor: interactor,\n            viewportSize: 0.1,\n            minPixelSize: 100,\n            maxPixelSize: 300,\n            viewportCorner: vtkOrientationMarkerWidget.Corners.TOP_RIGHT,\n        });\n    },\n    initializeCameras() {\n        this.initialCameraStates = {\n            position: {},\n            viewUp: {},\n        }\n        Object.values(this.vtk.renderers).forEach((renderer, index) => {\n            const camera = renderer.getActiveCamera();\n            this.initialCameraStates.position[`renderer_${index}`] = [...camera.getReferenceByName('position')]\n            this.initialCameraStates.viewUp[`renderer_${index}`] = [...camera.getReferenceByName('viewUp')]\n        })\n    },\n    getCameraDelta(renderer) {\n        if (!renderer) return {\n            positionDelta: undefined,\n            viewUpDelta: undefined,\n        }\n        const targetCamera = renderer.getActiveCamera();\n        const rendererIndex = Object.values(this.vtk.renderers).indexOf(renderer)\n\n        if (rendererIndex >= 0) {\n            const targetRendererID = `renderer_${rendererIndex}`\n            this.initialCameraPosition = this.initialCameraStates.position[targetRendererID]\n            this.initialCameraViewUp = this.initialCameraStates.viewUp[targetRendererID]\n            this.newCameraPosition = targetCamera.getReferenceByName('position')\n            this.newCameraViewUp = targetCamera.getReferenceByName('viewUp')\n        }\n        const positionDelta = [...this.newCameraPosition].map(\n            (num, index) => num - this.initialCameraPosition[index]\n        )\n        const viewUpDelta = [...this.newCameraViewUp].map(\n            (num, index) => num - this.initialCameraViewUp[index]\n        )\n        return {\n            positionDelta,\n            viewUpDelta,\n        }\n    },\n    applyCameraDelta(renderer, positionDelta, viewUpDelta) {\n        const camera = renderer.getActiveCamera();\n        const rendererIndex = Object.values(this.vtk.renderers).indexOf(renderer)\n        const rendererID = `renderer_${rendererIndex}`\n        if (this.initialCameraStates.position[rendererID]) {\n            camera.setPosition(\n                ...this.initialCameraStates.position[rendererID].map(\n                    (old, index) => old + positionDelta[index]\n                )\n            )\n            camera.setViewUp(\n                ...this.initialCameraStates.viewUp[rendererID].map(\n                    (old, index) => old + viewUpDelta[index]\n                )\n            )\n        }\n        renderer.resetCameraClippingRange()\n    },\n    syncCameras(animation) {\n        const targetRenderer = animation.pokedRenderer;\n        const { positionDelta, viewUpDelta } = this.getCameraDelta(targetRenderer)\n\n        Object.values(this.vtk.renderers).filter(\n            (renderer) => renderer !== targetRenderer\n        ).forEach((renderer) => {\n            this.applyCameraDelta(renderer, positionDelta, viewUpDelta)\n        })\n    },\n    createColorFilter(domainIndex = 0, goodBad = false) {\n        const filter = vtkCalculator.newInstance()\n        filter.setFormula({\n            getArrays() {\n                return {\n                    input: [{ location: FieldDataTypes.COORDINATE }],\n                    output: [{\n                        location: FieldDataTypes.POINT,\n                        name: 'color',\n                        dataType: 'Uint8Array',\n                        attribute: AttributeTypes.SCALARS,\n                        numberOfComponents: 3,\n                    }],\n                };\n            },\n            evaluate(input, output) {\n                const [coords] = input.map((d) => d.getData());\n                const [color] = output.map((d) => d.getData());\n\n                const n = coords.length / 3;\n                for (let i = 0; i < n; i += 1) {\n                    let c = COLORS[i % COLORS.length];\n\n                    if (goodBad && analysisFilesShown.value?.length) {\n                        if (goodBadAngles.value[domainIndex][i] < goodBadMaxAngle.value) {\n                            c = GOOD_BAD_COLORS[0] // green\n                        } else {\n                            c = GOOD_BAD_COLORS[1] // red\n                        }\n                    }\n                    if (c) {\n                        color[3 * i] = c[0];\n                        color[3 * i + 1] = c[1];\n                        color[3 * i + 2] = c[2];\n                    }\n                }\n                input.forEach((x) => x.modified());\n            },\n        });\n        return filter;\n    },\n    addPoints(renderer, points, i) {\n        let size = this.glyphSize\n        let source = vtkSphereSource.newInstance({\n            thetaResolution: SPHERE_RESOLUTION,\n            phiResolution: SPHERE_RESOLUTION,\n        });\n        const mapper = vtkGlyph3DMapper.newInstance({\n            scaleMode: vtkGlyph3DMapper.SCALE_BY_CONSTANT,\n            scaleFactor: size,\n        });\n        const actor = vtkActor.newInstance();\n        const filter = this.createColorFilter(i, showGoodBadParticlesMode.value);\n\n        filter.setInputData(points, 0);\n        mapper.setInputConnection(filter.getOutputPort(), 0);\n        mapper.setInputConnection(source.getOutputPort(), 1);\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        this.vtk.pointMappers.push(mapper);\n    },\n    addShapes(renderer, shapes) {\n        let label;\n        Object.entries(this.vtk.renderers).forEach(([l, r]) => {\n            if (renderer == r) label = l\n        })\n        shapes.forEach(\n            (shapeDatas, domainIndex) => {\n                shapeDatas.forEach(\n                    (shapeData) => {\n                        let layerName = Object.entries(vtkShapesByType.value).filter(\n                            ([, shapes]) => shapes.includes(shapeData)\n                        ).map(\n                            ([layerName,]) => layerName\n                        )\n                        layerName = layerName.length ? layerName[0] : \"Original\"\n                        const type = layers.value.find((layer) => layer.name === layerName)\n                        let opacity = 1;\n                        if (!analysisFilesShown.value?.length) {\n                            const numLayers = layersShown.value.filter(\n                                (layerName) => layers.value.find((layer) => layer.name == layerName).rgb\n                            ).length\n                            if (numLayers > 0) opacity /= numLayers\n                        }\n                        const cacheLabel = `${label}_${layerName}_${domainIndex}`\n\n                        const mapper = vtkMapper.newInstance({\n                            colorMode: ColorMode.MAP_SCALARS,\n                            scalarMode: ScalarMode.USE_POINT_FIELD_DATA,\n                        });\n                        if (shapeData.getClassName() == 'vtkImageData' && layerName === 'Original - Image') {\n                            this.addImage(shapeData, renderer)\n                        } else {\n                            if (shapeData.getClassName() == 'vtkPolyData') {\n                                mapper.setInputData(shapeData);\n                            } else if (cachedMarchingCubes.value[cacheLabel]) {\n                                mapper.setInputData(cachedMarchingCubes.value[cacheLabel])\n                            } else {\n                                const marchingCube = vtkImageMarchingCubes.newInstance({\n                                    contourValue: 0.001,\n                                    computeNormals: true,\n                                    mergePoints: true,\n                                });\n                                marchingCube.setInputData(shapeData)\n                                mapper.setInputConnection(marchingCube.getOutputPort());\n                                cachedMarchingCubes.value[cacheLabel] = marchingCube.getOutputData()\n                            }\n                            if (showDifferenceFromMeanMode.value) {\n                                this.showDifferenceFromMean(mapper, renderer, label, domainIndex)\n                            }\n                            if ([1, 2].includes(deepSSMDataTab.value)) {\n                                let data;\n                                if (shapeData.getPointData().getArrayByName('deepssm_error')) {\n                                    data = shapeData.getPointData().getArrayByName('deepssm_error').getData()\n                                }\n\n                                if (data) {\n                                    let normalizeRange;\n                                    if (uniformScale.value) {\n                                        normalizeRange = deepSSMErrorGlobalRange.value\n                                    } else {\n                                        normalizeRange = [Math.min(...data), Math.max(...data)]\n                                    }\n                                    const normalizedData = data.map((v) => v / (normalizeRange[1] - normalizeRange[0]))\n                                    const normalizedArray = vtkDataArray.newInstance({\n                                        name: 'deepssm_error_normalized',\n                                        values: normalizedData,\n                                    })\n                                    shapeData.getPointData().addArray(normalizedArray)\n                                    mapper.setColorByArrayName('deepssm_error_normalized')\n                                    mapper.setLookupTable(this.lookupTable)\n                                }\n                            }\n                            const actor = vtkActor.newInstance();\n                            if (type) actor.getProperty().setColor(...type.rgb);\n                            actor.getProperty().setOpacity(opacity);\n                            actor.setMapper(mapper);\n                            renderer.addActor(actor);\n                        }\n                    }\n                )\n            }\n        )\n    },\n    showDifferenceFromMean(mapper, renderer, label, index) {\n        if (!analysisFilesShown.value\n            || !currentAnalysisParticlesFiles.value\n            || !meanAnalysisParticlesFiles.value\n            || !this.metaData[label]\n            || !this.metaData[label][index]) return\n\n        // color values should be between 0 and 1\n        // 0.5 is green, representing no difference between particles\n        const targetMetaData = this.metaData[label][index]\n        const currentPoints = targetMetaData.current.points.getPoints().getData()\n        const meanPoints = targetMetaData.mean.points.getPoints().getData()\n\n        const particleComparisonKey = currentAnalysisParticlesFiles.value[index]\n        let colorValues;\n        let vectorValues;\n        if (\n            particleComparisonKey in cachedParticleComparisonColors.value\n            && particleComparisonKey in cachedParticleComparisonVectors.value\n        ) {\n            colorValues = cachedParticleComparisonColors.value[particleComparisonKey]\n            vectorValues = cachedParticleComparisonVectors.value[particleComparisonKey]\n        } else {\n            const comparisons = calculateComparisons(mapper, currentPoints, meanPoints);\n            colorValues = comparisons.colorValues;\n            vectorValues = comparisons.vectorValues;\n\n            cacheComparison(colorValues, vectorValues, particleComparisonKey);\n        }\n\n        if (vectorValues) {\n            const vectorMapper = vtkGlyph3DMapper.newInstance({\n                colorMode: ColorMode.MAP_SCALARS,\n                scalarMode: ScalarMode.USE_POINT_FIELD_DATA,\n            })\n            const vectorActor = vtkActor.newInstance()\n            const vectorSource = vtkPolyData.newInstance()\n            const vectorShape = vtkArrowSource.newInstance();\n\n            const verts = new Uint32Array(vectorValues.length + 1)\n            verts[0] = vectorValues.length\n            for (let i = 0; i < vectorValues.length; i++) {\n                verts[i + 1] = i\n            }\n            let locations = []\n            let orientations = []\n            let colors = []\n\n            for (let i = 0; i < vectorValues.length; i++) {\n                const [x, y, z, d, dx, dy, dz] = vectorValues[i]\n                if (d < 0) {\n                    const shift = 3  // based on arrow size\n                    locations.push([x + dx * shift, y + dy * shift, z + dz * shift])\n                    orientations.push([-dx, -dy, -dz])\n                    colors.push(d / 10 + 0.5)\n                } else if (d > 0) {\n                    locations.push([x + dx, y + dy, z + dz])\n                    orientations.push([dx, dy, dz])\n                    colors.push(d / 10 + 0.5)\n                }\n            }\n\n            vectorSource.getPointData().addArray(\n                vtkDataArray.newInstance({\n                    name: 'color',\n                    values: colors\n                })\n            )\n            vectorSource.getPointData().addArray(\n                vtkDataArray.newInstance({\n                    name: 'normal',\n                    values: orientations.flat(),\n                    numberOfComponents: 3\n                })\n            )\n            vectorSource.getPoints().setData(locations.flat(), 3)\n            vectorSource.getVerts().setData(verts);\n            vectorActor.setMapper(vectorMapper)\n            vectorMapper.setInputData(vectorSource)\n            vectorMapper.addInputConnection(vectorShape.getOutputPort(), 1)\n            vectorMapper.setScaleFactor(5)\n            vectorMapper.setColorByArrayName('color')\n            vectorMapper.setOrientationArray('normal')\n            vectorMapper.setLookupTable(this.lookupTable)\n            renderer.addActor(vectorActor)\n        }\n\n        const colorArray = vtkDataArray.newInstance({\n            name: 'color',\n            values: colorValues\n        })\n        mapper.getInputData().getPointData().addArray(colorArray)\n        mapper.getInputData().modified()\n        mapper.setLookupTable(this.lookupTable)\n        mapper.setColorByArrayName('color')\n\n        if (showDifferenceFromMeanMode.value) {\n            this.lookupTable.setMappingRange(0, 1)\n            this.lookupTable.updateRange();\n            this.prepareColorScales()\n        }\n\n        this.render()\n    },\n    prepareColorScales() {\n        const canvasDiv = this.$refs.colors\n        const titleDiv = this.$refs.colorsTitle\n        const labelsDiv = this.$refs.colorsLabels\n        canvasDiv.innerHTML = \"\"\n        titleDiv.innerHTML = \"\"\n        labelsDiv.innerHTML = \"\"\n        if (showDifferenceFromMeanMode.value || uniformScale.value) {\n            const canvas = document.createElement('canvas')\n            canvas.style.right = \"10px\"\n            canvas.style.height = \"100%\"\n            canvas.style.width = \"20px\"\n            canvasDiv.appendChild(canvas)\n\n            const labels = document.createElement('div')\n            labels.style.right = \"35px\"\n            labels.style.height = \"100%\"\n            labelsDiv.appendChild(labels)\n\n            let range = [-5, 5]\n            if (showDifferenceFromMeanMode.value) {\n                titleDiv.innerHTML = \"Distance from particle on mean shape\"\n            } else if (uniformScale.value) {\n                titleDiv.innerHTML = \"DeepSSMError\"\n                range = deepSSMErrorGlobalRange.value\n            }\n            this.prepareColorScale(canvas, labels, range)\n        } else {\n            Object.entries(this.data).forEach(([, data], i) => {\n                // if the shape (vtk only) doesn't have the deepssm_error array, don't show the color scale\n                if (data[0].shape.filter((shape) => shape.getClassName() === 'vtkPolyData' && !shape.getPointData().getArrayByName('deepssm_error')).length > 0) {\n                    return;\n                }\n                const [, y1, x2, y2] = this.grid[i]\n                const canvas = document.createElement('canvas')\n                canvas.style.top = `calc(${(1 - y2) * 100}%)`\n                canvas.style.right = `calc(${(1 - x2) * 100}% + 10px)`\n                canvas.style.height = `${(y2 - y1) * 96}%`\n                canvas.style.width = \"10px\"\n                canvasDiv.appendChild(canvas)\n\n                const labels = document.createElement('div')\n                labels.style.top = `calc(${(1 - y2) * 100}%)`\n                labels.style.right = `calc(${(1 - x2) * 100}% + 35px)`\n                labels.style.height = `${(y2 - y1) * 96}%`\n                labelsDiv.appendChild(labels)\n\n                let range = [-5, 5]\n                data[0].shape.forEach((shape) => {\n                    if (shape.getClassName() === 'vtkPolyData') {\n                        const arr = shape.getPointData().getArrayByName('deepssm_error').getData()\n                        if (arr) range = [Math.min(...arr), Math.max(...arr)]\n                    }\n                })\n                this.prepareColorScale(canvas, labels, range)\n            })\n        }\n    },\n    prepareColorScale(canvas, labels, range) {\n        if (canvas && labels) {\n            canvas.style.position = \"absolute\"\n            canvas.style.zIndex = \"1\"\n            const { width, height } = canvas\n            const context = canvas.getContext('2d', { willReadFrequently: true });\n            const pixelsArea = context.getImageData(0, 0, width, height);\n            const colorsData = this.lookupTable.getUint8Table(\n                ...this.lookupTable.getMappingRange(),\n                height * width,\n                true\n            )\n            pixelsArea.data.set(colorsData)\n            context.putImageData(pixelsArea, 0, 0)\n\n            const labelProportions = [1, 0.75, 0.5, 0.25, 0];\n            labels.innerHTML = ''\n            labels.style.position = \"absolute\"\n            labels.style.display = \"flex\"\n            labels.style.flexDirection = \"column\"\n            labels.style.justifyContent = \"space-between\"\n            labels.style.alignItems = \"flex-end\"\n            labels.style.textAlign = \"right\"\n            labelProportions.forEach((p) => {\n                const child = document.createElement('span');\n                child.innerHTML = Math.round(p * (range[1] - range[0]) + range[0]);\n                labels.appendChild(child);\n            })\n        }\n    },\n    prepareLabelCanvas() {\n        const labelCanvas = this.$refs.labels\n        const labelCanvasContext = labelCanvas.getContext('2d')\n        const { clientWidth, clientHeight } = this.$refs.vtk;\n        // increase the resolution of the canvas so text isn't blurry\n        labelCanvas.width = clientWidth;\n        labelCanvas.height = clientHeight;\n\n        labelCanvasContext.clearRect(0, 0, labelCanvas.width, labelCanvas.height)\n        labelCanvasContext.font = \"16px Arial\";\n        labelCanvasContext.fillStyle = \"white\";\n    },\n    populateRenderer(renderer, shapes) {\n        this.addShapes(renderer, shapes.map(({ shape }) => shape));\n        shapes.map(({ points }) => points).forEach((pointSet, i) => {\n            if (pointSet.getNumberOfPoints() > 0) {\n                this.addPoints(renderer, pointSet, i);\n            }\n        })\n\n        const camera = vtkCamera.newInstance();\n        renderer.setActiveCamera(camera);\n        renderer.resetCamera();\n    },\n    renderGrid() {\n        this.vtk.interactor.disable()\n        Object.values(this.vtk.widgetManagers).forEach((wm) => {\n            wm.disablePicking()\n        })\n\n        this.resetImageSlices()\n        this.prepareLabelCanvas();\n        let positionDelta, viewUpDelta\n\n        const renderers = Object.values(this.vtk.renderers)\n        for (let i = 0; i < renderers.length; i += 1) {\n            if (!positionDelta || !viewUpDelta) {\n                ({ positionDelta, viewUpDelta } = this.getCameraDelta(Object.values(this.vtk.renderers)[0]))\n            }\n            this.vtk.renderWindow.removeRenderer(renderers[i]);\n        }\n        if (this.vtk.orientationCube) this.vtk.orientationCube.setEnabled(false)\n        this.vtk.renderers = {};\n        this.vtk.pointMappers = [];\n\n        const data = Object.entries(this.data)\n        for (let i = 0; i < data.length; i += 1) {\n            const [label, shapes] = data[i];\n            const newRenderer = vtkRenderer.newInstance({ background: [0.115, 0.115, 0.115] });\n            const bounds = this.grid[i];\n\n            const labelCanvas = this.$refs.labels\n            const labelCanvasContext = labelCanvas.getContext('2d')\n            labelCanvasContext.fillText(\n                label,\n                labelCanvas.width * bounds[0],\n                labelCanvas.height * (1 - bounds[1]) - 20\n            );\n            newRenderer.setViewport.apply(newRenderer, bounds);\n            this.vtk.renderers[label] = newRenderer;\n            this.vtk.renderWindow.addRenderer(newRenderer);\n            if (i < data.length) {\n                this.populateRenderer(newRenderer, shapes)\n            }\n        }\n        this.initializeCameras()\n        this.initializeWidgets()\n\n        if (positionDelta && viewUpDelta) {\n            Object.values(this.vtk.renderers).forEach((renderer) => {\n                this.applyCameraDelta(renderer, positionDelta, viewUpDelta)\n            })\n        }\n\n        // layers shown may have changed intersections\n        // this should be done after all layers are added\n        if (imageViewIntersectMode.value) this.resetIntersections()\n\n        else if ([1, 2].includes(deepSSMDataTab.value)) {\n            this.prepareColorScales()\n        }\n\n        if (!this.showColorScale) {\n            const targetRenderer = Object.values(this.vtk.renderers)[this.columns - 1]\n            if (targetRenderer) {\n                this.vtk.orientationCube.setParentRenderer(targetRenderer)\n                this.vtk.orientationCube.setEnabled(true);\n            }\n        }\n        this.vtk.interactor.enable()\n        this.render();\n        renderLoading.value = false;\n        setTimeout(\n            () => {\n                Object.values(this.vtk.widgetManagers).forEach((wm) => {\n                    wm.enablePicking()\n                })\n            }, 100\n        )\n    },\n    render() {\n        this.vtk.renderWindow.render();\n    },\n}\n","import 'vtk.js/Sources/Rendering/Profiles/All';\nimport vtkInteractorStyleTrackballCamera from 'vtk.js/Sources/Interaction/Style/InteractorStyleTrackballCamera';\nimport vtkOpenGLRenderWindow from 'vtk.js/Sources/Rendering/OpenGL/RenderWindow';\nimport vtkRenderWindow from 'vtk.js/Sources/Rendering/Core/RenderWindow';\nimport vtkRenderWindowInteractor from 'vtk.js/Sources/Rendering/Core/RenderWindowInteractor';\nimport vtkColorTransferFunction from 'vtk.js/Sources/Rendering/Core/ColorTransferFunction';\nimport vtkColorMaps from 'vtk.js/Sources/Rendering/Core/ColorTransferFunction/ColorMaps';\n\nimport methods from './methods';\nimport { vtkInstance, showDifferenceFromMeanMode, deepSSMDataTab } from '@/store';\n\n\nexport default {\n    props: {\n        data: {\n            type: Object,\n            required: true,\n        },\n        metaData: {\n            type: Object,\n            required: false,\n        },\n        rows: {\n            type: Number,\n            required: true,\n        },\n        columns: {\n            type: Number,\n            required: true,\n        },\n        glyphSize: {\n            type: Number,\n            required: true,\n        },\n        currentTab: {\n            type: String,\n            required: true,\n        },\n        drawerWidth: {\n            type: Number,\n            required: false,\n        },\n    },\n    computed: {\n        grid() {\n            const grid = [];\n            const nx = this.columns;\n            const ny = this.rows;\n            for (let y = 0; y < ny; y += 1) {\n                for (let x = 0; x < nx; x += 1) {\n                    const xmin = x / nx;\n                    const ymin = y / ny;\n                    const xmax = (x + 1) / nx;\n                    const ymax = (y + 1) / ny;\n                    grid.push([xmin, 1 - ymax, xmax, 1 - ymin]);\n                }\n            }\n            return grid;\n        },\n        showDifferenceFromMeanMode() {\n            return showDifferenceFromMeanMode.value\n        },\n        deepSSMDataTab() {\n            return deepSSMDataTab.value\n        },\n        showColorScale() {\n            return showDifferenceFromMeanMode.value || deepSSMDataTab.value >= 0\n        }\n    },\n    watch: {\n        data() {\n            this.renderGrid();\n        },\n        grid() {\n            this.renderGrid();\n        },\n        glyphSize() {\n            this.updateGlyphSize(this.glyphSize)\n            this.vtk.pointMappers.forEach((mapper) => {\n                mapper.setScaleFactor(this.glyphSize);\n            });\n            this.render();\n        },\n        drawerWidth() {\n            this.updateSize()\n        }\n    },\n    beforeDestroy() {\n        this.vtk.interactor.unbindEvents();\n        this.vtk.orientationCube.delete();\n        this.vtk.openglRenderWindow.setContainer(null);\n    },\n    created() {\n        const renderWindow = vtkRenderWindow.newInstance();\n        const openglRenderWindow = vtkOpenGLRenderWindow.newInstance();\n        renderWindow.addView(openglRenderWindow);\n\n        const interactor = vtkRenderWindowInteractor.newInstance();\n        interactor.setView(openglRenderWindow);\n        interactor.initialize();\n        interactor.setInteractorStyle(vtkInteractorStyleTrackballCamera.newInstance());\n        interactor.onAnimation(this.syncCameras)\n        interactor.disable()\n\n        const orientationCube = this.newOrientationCube(interactor)\n\n        this.lookupTable = vtkColorTransferFunction.newInstance();\n        this.lookupTable.applyColorMap(\n            vtkColorMaps.getPresetByName('erdc_rainbow_bright')\n        );\n        this.lookupTable.setMappingRange(0, 1)\n        this.lookupTable.updateRange();\n\n        this.vtk = {\n            renderWindow,\n            interactor,\n            openglRenderWindow,\n            orientationCube,\n            renderers: {},\n            pointMappers: [],\n            widgetManagers: {},\n        };\n\n        vtkInstance.value = this.vtk\n    },\n    mounted() {\n        const el = this.$refs.vtk;\n        this.vtk.openglRenderWindow.setContainer(el);\n        this.vtk.interactor.bindEvents(el);\n\n        this.updateSize();\n        this.renderGrid();\n        this.watchWidgetStates();\n        this.watchImageStates();\n    },\n    updated() {\n        if (this.showColorScale) {\n            this.prepareColorScale()\n        }\n    },\n    methods,\n};\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--14-0!./scripting.js?vue&type=script&lang=js&external\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--14-0!./scripting.js?vue&type=script&lang=js&external\"","import { render, staticRenderFns } from \"./viewer.vue?vue&type=template&id=3e171041&scoped=true\"\nimport script from \"./scripting.js?vue&type=script&lang=js&external\"\nexport * from \"./scripting.js?vue&type=script&lang=js&external\"\nimport style0 from \"./viewer.vue?vue&type=style&index=0&id=3e171041&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e171041\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"width\":\"100%\"}},[_c('v-list',{attrs:{\"dense\":\"\",\"shaped\":\"\"}},[_c('v-subheader',[_vm._v(\"ANATOMIES\")]),_c('v-list-item-group',_vm._l((_vm.anatomies.filter((anatomy) => anatomy !== _vm.allDataObjectsInDataset[0].modality)),function(anatomy_type){return _c('v-list-item',{key:anatomy_type},[_c('v-checkbox',{attrs:{\"color\":\"primary\",\"value\":anatomy_type},model:{value:(_vm.selectedAnatomies),callback:function ($$v) {_vm.selectedAnatomies=$$v},expression:\"selectedAnatomies\"}}),_c('v-list-item-title',[_vm._v(\" \"+_vm._s(anatomy_type)+\" \")])],1)}),1),_c('v-subheader',[_vm._v(\"SUBJECTS\")]),_c('v-list-item-group',_vm._l((_vm.allSubjectsForDataset),function(subject){return _c('v-list-group',{key:subject.id,scopedSlots:_vm._u([{key:\"activator\",fn:function(){return [_c('v-checkbox',{attrs:{\"color\":\"primary\",\"value\":subject.id},nativeOn:{\"click\":function($event){return $event.stopPropagation()}},model:{value:(_vm.selectedSubjects),callback:function ($$v) {_vm.selectedSubjects=$$v},expression:\"selectedSubjects\"}}),_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-list-item-title',_vm._g(_vm._b({},'v-list-item-title',attrs,false),on),[_vm._v(\" Subject: \"+_vm._s(subject.name)+\" \")])]}}],null,true)},[_c('span',[_vm._v(\" ID: \"+_vm._s(subject.id)+\" | Created: \"+_vm._s(_vm.shortDateString(subject.created))+\" | Modified: \"+_vm._s(_vm.shortDateString(subject.modified))+\" \")])])]},proxy:true}],null,true),model:{value:(subject.showDetails),callback:function ($$v) {_vm.$set(subject, \"showDetails\", $$v)},expression:\"subject.showDetails\"}},[(subject.groups && Object.keys(subject.groups).length > 0)?_c('div',{staticClass:\"pa-3\"},[_vm._v(\" Subject Groups \"+_vm._s(JSON.stringify(subject.groups) .replace(/\"/g, '').replace(/:/g, ': ').replace(/,/g, ', '))+\" \")]):_vm._e(),_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.allDataObjectsInDataset.filter((obj) => obj.subject === subject.id),\"item-key\":\"uid\",\"disable-pagination\":\"\",\"hide-default-footer\":\"\",\"dense\":\"\",\"width\":\"100%\"},scopedSlots:_vm._u([{key:\"item.file\",fn:function({ item }){return [_c('span',[_vm._v(_vm._s(_vm.shortFileName(item.file)))])]}}],null,true)})],1)}),1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { groupBy, shortDateString, shortFileName } from '../helper';\nimport { getDataObjectsForSubject } from '@/api/rest';\nimport { onMounted, ref, watch } from 'vue';\nimport { Subject } from '@/types';\nimport { getSubjectsForDataset } from '@/api/rest'\nimport {\n    selectedDataset,\n    allSubjectsForDataset,\n    allDataObjectsInDataset,\n    anatomies,\n    selectedAnatomies,\n    selectedDataObjects,\n    loadingState,\n    loadReconstructedSamplesForProject,\nimageViewMode,\n} from '@/store';\n\n\nexport default {\n    props: {\n        dataset: {\n            type: Number,\n            required: true,\n        },\n        autoSelectAll: {\n            type: Boolean,\n            default: false,\n        },\n        autoSelectOne: {\n            type: Boolean,\n            default: false,\n        }\n    },\n    setup(props) {\n        const selectedSubjects = ref<number[]>([])\n        const headers =  [\n            {text: 'ID', value: 'id'},\n            {text: 'Anatomy', value: 'anatomy_type'},\n            {text: 'Type', value: 'type'},\n            {text: 'File Name', value: 'file', cellClass: 'file-column'},\n        ];\n\n        async function fetchData(datasetId: number) {\n            loadingState.value = true;\n            allSubjectsForDataset.value = (await getSubjectsForDataset(datasetId)).sort((a, b) => {\n                if(a.created < b.created) return 1;\n                if(a.created > b.created) return -1;\n                return 0;\n            });\n            allDataObjectsInDataset.value =  (await Promise.all(\n                allSubjectsForDataset.value.map(\n                    async (subject: Subject) => (await getDataObjectsForSubject(subject.id)).map(\n                        (dataObj) => {\n                            let assignments = {'uid': `${dataObj.type}_${dataObj.id}`}\n                            return Object.assign(dataObj, assignments)\n                        }\n                    )\n                )\n            )).flat()\n            loadReconstructedSamplesForProject('', 0)\n            anatomies.value = Object.keys(\n                {\n                    ...groupBy(allDataObjectsInDataset.value, 'anatomy_type'),\n                    ...groupBy(allDataObjectsInDataset.value, 'modality'),\n                }\n            ).filter((key) => key !== 'undefined')\n            selectedAnatomies.value = anatomies.value;\n            if(allSubjectsForDataset.value.length > 0) {\n                const subjectIds = allSubjectsForDataset.value.map(\n                    (subject: Subject) => subject.id\n                )\n                if(props.autoSelectAll){\n                    selectedSubjects.value = subjectIds\n                }\n                if(props.autoSelectOne && allSubjectsForDataset.value.length > 0) {\n                    selectedSubjects.value = [subjectIds[0]]\n                }\n            }\n            loadingState.value = false;\n        }\n\n        function updateSelectedObjects() {\n            selectedDataObjects.value = allDataObjectsInDataset.value.filter(\n                (dataObject) => {\n                    return (\n                        (\n                            !selectedAnatomies.value.length ||\n                            selectedAnatomies.value.includes(dataObject.anatomy_type) ||\n                            selectedAnatomies.value.includes(dataObject.modality)\n                        ) && selectedSubjects.value.includes(dataObject.subject)\n                    )\n                }\n            )\n        }\n\n        function selectedObjectsUpdated() {\n            const uniqueAnatomies = [...new Set(selectedDataObjects.value.map(item => {\n                // if the item is an image, it will have \"modality\" instead of anatomy_type\n                if (item.modality && imageViewMode.value) {\n                    return item.modality\n                }\n                return item.anatomy_type\n            }))].filter((anatomy) => anatomy !== undefined);\n            const uniqueSubjects = [...new Set(selectedDataObjects.value.map(item => item.subject))]\n            if (JSON.stringify(uniqueAnatomies) !== JSON.stringify(selectedAnatomies.value)) {\n                selectedAnatomies.value = uniqueAnatomies\n            }\n            if (JSON.stringify(uniqueSubjects) !== JSON.stringify(selectedSubjects.value)) {\n                selectedSubjects.value = uniqueSubjects\n            }\n        }\n\n        onMounted(async () => {\n            if(!selectedDataset.value) {\n                await fetchData(props.dataset)\n            } else {\n                await fetchData(selectedDataset.value.id)\n            }\n        })\n\n        watch(selectedAnatomies, updateSelectedObjects)\n        watch(selectedSubjects, updateSelectedObjects)\n        watch(selectedDataObjects, selectedObjectsUpdated)\n\n        return {\n            anatomies,\n            selectedAnatomies,\n            allSubjectsForDataset,\n            selectedSubjects,\n            headers,\n            allDataObjectsInDataset,\n            selectedDataObjects,\n            shortFileName,\n            shortDateString,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataList.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataList.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./DataList.vue?vue&type=template&id=0c2067b9\"\nimport script from \"./DataList.vue?vue&type=script&lang=ts\"\nexport * from \"./DataList.vue?vue&type=script&lang=ts\"\nimport style0 from \"./DataList.vue?vue&type=style&index=0&id=0c2067b9&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"render-control-row\"},[(!_vm.showAnalysisOptions)?_c('v-select',{staticStyle:{\"width\":\"500px\"},attrs:{\"items\":_vm.layers,\"item-disabled\":(layer) => !layer.available(),\"item-value\":\"name\",\"label\":\"Layers shown\",\"multiple\":\"\",\"small-chips\":\"\",\"item-text\":\"name\"},scopedSlots:_vm._u([{key:\"selection\",fn:function({ item }){return [_c('v-chip',{attrs:{\"close\":\"\",\"color\":item.color,\"text-color\":item.color === 'white' ? 'black' : 'white'},on:{\"click:close\":function($event){_vm.layersShown = _vm.layersShown.filter((l) => l !== item.name)}}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])]}}],null,false,97843889),model:{value:(_vm.layersShown),callback:function ($$v) {_vm.layersShown=$$v},expression:\"layersShown\"}}):_vm._e(),_c('v-text-field',{staticStyle:{\"width\":\"80px\"},attrs:{\"label\":\"Particle Size\",\"type\":\"number\",\"step\":\"0.5\",\"min\":\"0.5\",\"max\":\"10\",\"hide-details\":\"\"},model:{value:(_vm.particleSize),callback:function ($$v) {_vm.particleSize=_vm._n($$v)},expression:\"particleSize\"}}),_c('v-select',{staticStyle:{\"width\":\"100px\"},attrs:{\"value\":_vm.axisSystem,\"items\":_vm.axisSystemOptions,\"label\":\"Axis System\"},on:{\"change\":_vm.changeAxisSystem}}),(_vm.layersShown.includes('Original'))?_c('v-switch',{attrs:{\"value\":_vm.imageViewMode,\"label\":\"Image View\"},on:{\"change\":_vm.changeImageViewMode}}):_vm._e(),(_vm.showAnalysisOptions && _vm.currentTab === 'analyze')?_c('v-switch',{attrs:{\"label\":\"Show difference from mean\"},model:{value:(_vm.showDifferenceFromMeanMode),callback:function ($$v) {_vm.showDifferenceFromMeanMode=$$v},expression:\"showDifferenceFromMeanMode\"}}):_vm._e(),(_vm.showSamplePageSelector)?_c('v-text-field',{attrs:{\"value\":_vm.deepSSMSamplePage,\"label\":\"Sample Page\",\"min\":\"0\",\"step\":\"1\",\"type\":\"number\"},on:{\"input\":_vm.onChangeSamplePage}}):_vm._e(),(_vm.showUniformScaleOption)?_c('v-switch',{attrs:{\"label\":\"Uniform Scale\"},model:{value:(_vm.uniformScale),callback:function ($$v) {_vm.uniformScale=$$v},expression:\"uniformScale\"}}):_vm._e(),(!_vm.showAnalysisOptions && _vm.selectedDataObjects.length === 1)?_c('v-btn',{staticClass:\"my-5\",on:{\"click\":_vm.captureThumbnail}},[_vm._v(\" Set \"+_vm._s(_vm.thumbnailTarget.type)+\" thumbnail \")]):_vm._e(),_c('v-btn',{staticClass:\"my-5\",on:{\"click\":_vm.resetView}},[_vm._v(\" Reset view \")])],1),(_vm.imageViewMode && _vm.axisSystem)?_c('div',{staticClass:\"render-control-row\"},[(_vm.imageIntersectAllowed)?_c('div',[_c('v-checkbox',{staticClass:\"mt-0 pt-0\",attrs:{\"label\":\"Intersect\",\"dense\":true,\"hide-details\":true},model:{value:(_vm.imageViewIntersectMode),callback:function ($$v) {_vm.imageViewIntersectMode=$$v},expression:\"imageViewIntersectMode\"}}),_c('v-checkbox',{attrs:{\"label\":\"Crop\",\"dense\":true,\"hide-details\":true},model:{value:(_vm.imageViewIntersectCropMode),callback:function ($$v) {_vm.imageViewIntersectCropMode=$$v},expression:\"imageViewIntersectCropMode\"}})],1):_vm._e(),_c('v-select',{staticStyle:{\"width\":\"25%\"},attrs:{\"items\":_vm.axisSystem.axes,\"label\":\"Axis\",\"hide-details\":true},model:{value:(_vm.imageViewAxis),callback:function ($$v) {_vm.imageViewAxis=$$v},expression:\"imageViewAxis\"}}),(_vm.imageViewSliceRange)?_c('v-slider',{staticStyle:{\"width\":\"25%\"},attrs:{\"value\":_vm.imageViewSlice,\"min\":_vm.imageViewSliceRange[0],\"max\":_vm.imageViewSliceRange[1],\"thumb-label\":true,\"label\":\"Slice\",\"hide-details\":true},on:{\"input\":_vm.changeImageViewSlice}}):_vm._e(),_c('v-slider',{staticStyle:{\"width\":\"25%\"},attrs:{\"min\":_vm.imageViewWindowRange[0],\"max\":_vm.imageViewWindowRange[1],\"thumb-label\":true,\"label\":\"Window\",\"hide-details\":true},model:{value:(_vm.imageViewWindow),callback:function ($$v) {_vm.imageViewWindow=$$v},expression:\"imageViewWindow\"}}),_c('v-slider',{staticStyle:{\"width\":\"25%\"},attrs:{\"min\":_vm.imageViewLevelRange[0],\"max\":_vm.imageViewLevelRange[1],\"thumb-label\":true,\"label\":\"Level\",\"hide-details\":true},model:{value:(_vm.imageViewLevel),callback:function ($$v) {_vm.imageViewLevel=$$v},expression:\"imageViewLevel\"}})],1):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { setDatasetThumbnail, setProjectThumbnail } from '@/api/rest';\nimport { computed, ref, watch } from 'vue';\nimport _ from 'lodash';\nimport {\n    particleSize,\n    layers,\n    layersShown,\n    orientationIndicator,\n    selectedDataObjects,\n    selectedDataset,\n    selectedProject,\n    vtkInstance,\n    allDatasets,\n    allProjectsForDataset,\n    showDifferenceFromMeanMode,\n    analysisFilesShown,\n    showGoodBadParticlesMode,\n    goodBadMaxAngle,\n    imageViewMode,\n    imageViewIntersectMode,\n    imageViewIntersectCropMode,\n    imageViewAxis,\n    imageViewSlices,\n    imageViewSliceRanges,\n    imageViewCroppedSliceRanges,\n    imageViewWindow,\n    imageViewWindowRange,\n    imageViewLevel,\n    imageViewLevelRange,\n    deepSSMResult,\n    deepSSMDataTab,\n    deepSSMSamplePage,\n    uniformScale,\n    DEEPSSM_SAMPLES_PER_PAGE,\n    selectedAnatomies,\n    allDataObjectsInDataset,\n} from '@/store';\n\n\nexport default {\n    props: {\n        currentTab: {\n            type: String,\n            required: true,\n        }\n    },\n    setup(props, context) {\n        orientationIndicator.value.setDefaultStyle({\n            fontStyle: 'bold',\n            fontFamily: 'Arial',\n            fontColor: 'black',\n            faceColor: '#ffffff',\n            faceRotation: 0,\n            edgeThickness: 0.1,\n            edgeColor: 'black',\n            resolution: 400,\n        })\n\n        const axisSystemOptions = [\n            {\n                text: 'XYZ',\n                value: 'xyz',\n                xPlus: '+X',\n                xMinus: '-X',\n                yPlus: '+Y',\n                yMinus: '-Y',\n                zPlus: '+Z',\n                zMinus: '-Z',\n                axes: ['X', 'Y', 'Z'],\n            },\n            {\n                text: 'Medical',\n                value: 'slp',\n                xPlus: 'L',\n                xMinus: 'R',\n                yPlus: 'P',\n                yMinus: 'A',\n                zPlus: 'S',\n                zMinus: 'I',\n                axes: ['L', 'P', 'S'],\n            }\n        ]\n        const axisSystem = ref()\n\n        function changeImageViewMode(value) {\n            imageViewMode.value = value;\n            // filter selectedAnatomies according to imageViewMode. True -> include 'anatomy_mri', False -> exclude 'anatomy_mri'\n            if (value) {\n                selectedAnatomies.value = [...selectedAnatomies.value, 'anatomy_mri']\n            } else {\n                const modality = allDataObjectsInDataset.value[0].modality\n                selectedAnatomies.value = selectedAnatomies.value.filter((anatomy) => anatomy !== modality)\n            }\n        }\n\n        function changeAxisSystem(newSystemValue: string){\n            const newSystem = axisSystemOptions.find(\n                (system) => system.value == newSystemValue\n            )\n            axisSystem.value = newSystem\n            if(newSystem){\n                orientationIndicator.value.setXPlusFaceProperty({\n                    text: newSystem.xPlus\n                })\n                orientationIndicator.value.setXMinusFaceProperty({\n                    text: newSystem.xMinus\n                })\n                orientationIndicator.value.setYPlusFaceProperty({\n                    text: newSystem.yPlus\n                })\n                orientationIndicator.value.setYMinusFaceProperty({\n                    text: newSystem.yMinus\n                })\n                orientationIndicator.value.setZPlusFaceProperty({\n                    text: newSystem.zPlus\n                })\n                orientationIndicator.value.setZMinusFaceProperty({\n                    text: newSystem.zMinus\n                })\n                context.emit(\"change\")\n            }\n        }\n        changeAxisSystem('xyz')\n\n        function resetView() {\n            context.emit(\"change\")\n        }\n        watch(showDifferenceFromMeanMode, resetView)\n        watch(showGoodBadParticlesMode, resetView)\n        watch(goodBadMaxAngle, resetView)\n\n        const thumbnailTarget = computed(() => {\n            if(layersShown.value.length === 1 && layersShown.value[0] === \"Original\") {\n                // showing only original data object, valid for dataset thumbnail\n                return {\n                    type: 'Dataset',\n                    id: selectedDataset.value?.id\n                }\n            } else {\n                // valid for project thumbnail\n                return {\n                    type: 'Project',\n                    id: selectedProject.value?.id\n                }\n            }\n        })\n\n        async function captureThumbnail() {\n            if(vtkInstance.value) {\n                vtkInstance.value.orientationCube.setEnabled(false)\n                const encoded = (await Promise.all(\n                    // method signature for captureImages is defined as returning void,\n                    // but it returns a list of promises.\n                    // @ts-ignore\n                    vtkInstance.value.renderWindow.captureImages(\n                        \"image/png\",\n                        {\n                            size: [100, 100]\n                        }\n                    )\n                ))[0] as String\n                const thumbnail = encoded.split(',')[1]\n                if (thumbnailTarget.value.type === 'Dataset') {\n                    if (thumbnailTarget.value.id) {\n                        let dataset = await setDatasetThumbnail(thumbnailTarget.value.id, thumbnail)\n                        if(dataset) {\n                            allDatasets.value = allDatasets.value.map((d) => {\n                                if (d.id === dataset.id) return dataset\n                                return d\n                            })\n                            selectedDataset.value = dataset;\n                        }\n                    }\n                } else {\n                    if (thumbnailTarget.value.id) {\n                        let project = await setProjectThumbnail(thumbnailTarget.value.id, thumbnail)\n                        if(project) {\n                            allProjectsForDataset.value = allProjectsForDataset.value.map((p) => {\n                                if (p.id === project.id) return project\n                                return p\n                            })\n                            selectedProject.value = project;\n                        }\n                    }\n                }\n                vtkInstance.value.orientationCube.setEnabled(true)\n            }\n        }\n\n        const showAnalysisOptions = computed(() => {\n            if (props.currentTab === 'deepssm' && deepSSMResult.value) {\n                return true;\n            } else if (props.currentTab === 'analyze' && analysisFilesShown.value?.length) {\n                return true;\n            }\n            return false;\n        })\n\n        const showSamplePageSelector = computed(() => {\n            return deepSSMDataTab.value === 0 && deepSSMSamplePage.value;\n        })\n\n        const maxSamplePage = computed(() => {\n            return Math.ceil(Object.values(deepSSMResult.value?.aug_pairs).length / DEEPSSM_SAMPLES_PER_PAGE);\n        })\n\n        const showUniformScaleOption = computed(() => {\n            return deepSSMDataTab.value >= 1; // deepssm data tab training or testing\n        })\n\n        const imageIntersectAllowed = computed(() => {\n            return layersShown.value.includes('Groomed') || deepSSMDataTab.value > -1;\n        })\n\n        const imageViewSlice = computed(() => {\n            if (!imageViewAxis.value) {\n                return undefined\n            } else if (['X', 'L'].includes(imageViewAxis.value)) {\n                return imageViewSlices.value.x\n            } else if (['Y', 'P'].includes(imageViewAxis.value)) {\n                return imageViewSlices.value.y\n            } else if (['Z', 'S'].includes(imageViewAxis.value)) {\n                return imageViewSlices.value.z\n            }\n        })\n\n        const imageViewSliceRange = computed(() => {\n            if (!imageViewAxis.value) {\n                return undefined\n            } else if (['X', 'L'].includes(imageViewAxis.value)) {\n                return imageViewIntersectCropMode.value ? imageViewCroppedSliceRanges.value.x : imageViewSliceRanges.value.x\n            } else if (['Y', 'P'].includes(imageViewAxis.value)) {\n                return imageViewIntersectCropMode.value ? imageViewCroppedSliceRanges.value.y : imageViewSliceRanges.value.y\n            } else if (['Z', 'S'].includes(imageViewAxis.value)) {\n                return imageViewIntersectCropMode.value ? imageViewCroppedSliceRanges.value.z : imageViewSliceRanges.value.z\n            }\n        })\n\n        function changeImageViewSlice(value) {\n            if (!imageViewAxis.value) {\n                return undefined\n            } else if (['X', 'L'].includes(imageViewAxis.value)) {\n                imageViewSlices.value.x = value\n            } else if (['Y', 'P'].includes(imageViewAxis.value)) {\n                imageViewSlices.value.y = value\n            } else if (['Z', 'S'].includes(imageViewAxis.value)) {\n                imageViewSlices.value.z = value\n            }\n        }\n\n        watch(imageIntersectAllowed, (value) => {\n            if (!value) {\n                imageViewIntersectMode.value = false\n                imageViewIntersectCropMode.value = false\n            }\n        })\n\n        function changeSamplePage(page: number) {\n            if (page < 1) {\n                page = 1\n            } else if (page > maxSamplePage.value) {\n                page = maxSamplePage.value\n            }\n\n            deepSSMSamplePage.value = page\n        }\n\n        return {\n            particleSize,\n            layersShown,\n            layers,\n            axisSystem,\n            axisSystemOptions,\n            imageViewMode,\n            imageViewIntersectMode,\n            imageViewIntersectCropMode,\n            imageIntersectAllowed,\n            imageViewAxis,\n            imageViewSlice,\n            imageViewSliceRange,\n            imageViewLevel,\n            imageViewLevelRange,\n            imageViewWindow,\n            imageViewWindowRange,\n            changeImageViewSlice,\n            changeAxisSystem,\n            changeImageViewMode,\n            resetView,\n            selectedDataObjects,\n            captureThumbnail,\n            thumbnailTarget,\n            showDifferenceFromMeanMode,\n            showAnalysisOptions,\n            showUniformScaleOption,\n            uniformScale,\n            deepSSMSamplePage,\n            onChangeSamplePage: _.debounce(changeSamplePage, 1000),\n            showSamplePageSelector,\n            maxSamplePage,\n            currentTab: props.currentTab,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RenderControls.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RenderControls.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./RenderControls.vue?vue&type=template&id=359b5e24&scoped=true\"\nimport script from \"./RenderControls.vue?vue&type=script&lang=ts\"\nexport * from \"./RenderControls.vue?vue&type=script&lang=ts\"\nimport style0 from \"./RenderControls.vue?vue&type=style&index=0&id=359b5e24&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"359b5e24\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.props.prerequisite())?_c('div',[_c('task-info',{attrs:{\"taskName\":_vm.props.form,\"formData\":_vm.simplifyFormData(_vm.formData)},on:{\"resetForm\":_vm.resetForm}}),_c('v-form',{staticClass:\"pa-3\",model:{value:(_vm.formValid),callback:function ($$v) {_vm.formValid=$$v},expression:\"formValid\"}},[(_vm.formSchema && _vm.formData)?_c('v-jsf',{attrs:{\"schema\":_vm.formSchema,\"options\":_vm.schemaOptions},scopedSlots:_vm._u([{key:\"custom-conditional\",fn:function(context){return [(_vm.evaluateExpression(context.schema['x-display-if']))?_c('v-jsf',_vm._b({scopedSlots:_vm._u([{key:\"custom-readonly\",fn:function(context){return [_c('div',{staticStyle:{\"display\":\"flex\",\"width\":\"100%\",\"justify-content\":\"space-between\"}},[_c('p',[_vm._v(_vm._s(context.label))]),_c('p',[_vm._v(_vm._s(context.value)+_vm._s(context.schema['x-display-append']))])])]}}],null,true),model:{value:(_vm.formData[context.fullKey.split('.')[0]][context.fullKey.split('.')[1]]),callback:function ($$v) {_vm.$set(_vm.formData[context.fullKey.split('.')[0]], context.fullKey.split('.')[1], $$v)},expression:\"formData[context.fullKey.split('.')[0]][context.fullKey.split('.')[1]]\"}},'v-jsf',context,false)):_vm._e()]}}],null,false,1776082980),model:{value:(_vm.formData),callback:function ($$v) {_vm.formData=$$v},expression:\"formData\"}}):_vm._e(),_c('br')],1)],1):_c('div',{staticClass:\"pa-3\",staticStyle:{\"text-align\":\"center\"}},[_vm._v(_vm._s(_vm.props.prerequisite_unfulfilled))])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabForm.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabForm.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./TabForm.vue?vue&type=template&id=283c19b6\"\nimport script from \"./TabForm.vue?vue&type=script&lang=ts\"\nexport * from \"./TabForm.vue?vue&type=script&lang=ts\"\nimport style0 from \"./TabForm.vue?vue&type=style&index=0&id=283c19b6&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.jobAlreadyDone('optimize'))?_c('div',[_c('v-expansion-panels',{attrs:{\"value\":_vm.analysis ? 1 : 0}},[_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\"Controls\")]),_c('v-expansion-panel-content',[_c('task-info',{attrs:{\"taskName\":\"analyze\",\"formData\":_vm.formData,\"disabled\":!_vm.analysis},on:{\"resetForm\":_vm.resetForm}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"step\":\"1.0\",\"max\":\"10.0\",\"min\":\"1.0\",\"label\":\"Std. Dev. Range\",\"hide-details\":\"\",\"disabled\":!_vm.analysis},model:{value:(_vm.formData.range),callback:function ($$v) {_vm.$set(_vm.formData, \"range\", _vm._n($$v))},expression:\"formData.range\"}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"step\":\"1.0\",\"min\":\"1.0\",\"max\":\"100.0\",\"label\":\"Number of steps\",\"hide-details\":\"\",\"disabled\":!_vm.analysis},model:{value:(_vm.formData.steps),callback:function ($$v) {_vm.$set(_vm.formData, \"steps\", _vm._n($$v))},expression:\"formData.steps\"}})],1)],1),(_vm.analysis)?_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\"Results\")]),_c('v-expansion-panel-content',[_c('div',{staticClass:\"pa-3\"},[_vm._v(\" Review shape analysis \"),_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-icon',_vm._g(_vm._b({},'v-icon',attrs,false),on),[_vm._v(\" mdi-information \")])]}}],null,false,3439555294)},[_c('span',[_c('v-subheader',[_vm._v(\"Last analysis run at \"+_vm._s(_vm.analysis.modified))])],1)]),_c('v-expansion-panels',{model:{value:(_vm.openTab),callback:function ($$v) {_vm.openTab=$$v},expression:\"openTab\"}},[_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\" View PCA \")]),_c('v-expansion-panel-content',[_c('PCA',{ref:\"pca\",attrs:{\"currentTab\":_vm.currentTab,\"openTab\":_vm.openTab}}),_c('charts',{attrs:{\"charts\":_vm.analysis.charts}})],1)],1),_c('v-expansion-panel',{attrs:{\"disabled\":_vm.analysis.groups.length <= 0,\"id\":\"groups-panel\"}},[_c('v-expansion-panel-header',[_vm._v(\" Group Difference \")]),_c('v-expansion-panel-content',[_c('groups',{ref:\"groups\",attrs:{\"currentTab\":_vm.currentTab,\"openTab\":_vm.openTab}})],1)],1),_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\" Particles \")]),_c('v-expansion-panel-content',[_c('particles')],1)],1)],1),_c('div',{staticClass:\"loading-dialog\"},[_c('v-dialog',{attrs:{\"width\":\"10%\"},model:{value:(_vm.currentlyCaching),callback:function ($$v) {_vm.currentlyCaching=$$v},expression:\"currentlyCaching\"}},[_vm._v(\"Calculating... \"),_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"align-center\":\"\"}})],1)],1)],1)])],1):_vm._e()],1)],1):_c('div',{staticClass:\"pa-3\",staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"Perform optimization before analyzing.\")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.charts.length > 0)?_c('div',_vm._l((_vm.charts),function(chart,index){return _c('v-chart',{key:chart.title,staticClass:\"chart\",attrs:{\"option\":_vm.methods.generateChart(index)}})}),1):_c('div',[_vm._v(\" No charts generated... \")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { AnalysisChart } from \"@/types\";\n\n// functions for generating analysis charts\nexport function lineChartOptions (data: AnalysisChart) {\n    // decimal place rounding could be specified for each chart\n    const decimalPlaces = 3;\n\n    // rounds each y value to specified decimal place\n    // x will always be integer\n    data.y.forEach((n, i) => {\n        data.y[i] = roundTo(n, decimalPlaces);\n    });\n\n    return ({\n        title: {\n            text: data.title,\n            textStyle: {\n                color: \"#999999\"\n            }\n        },\n        dataZoom: [\n            {\n                id: 'xAxisZoom',\n                type: 'inside',\n                xAxisIndex: [0]\n            },\n        ],\n        tooltip: {\n            trigger: 'axis',\n            formatter: '# Modes: {b}<br />Value: {c}' // b is x value, c is y value\n        },\n        toolbox: {\n            show: true,\n            orient: 'horizontal',\n            showTitle: true,\n            feature: {\n                saveAsImage: {\n                    type: 'svg',\n                    name: data.title.toLowerCase() + \"_chart\",\n                    excludedComponents: ['toolbox', 'title'],\n                },\n                dataView: {\n                    show: true,\n                    title: \"View Data\",\n                    readOnly: true,\n                    optionToContent: () => showData(data)\n                },\n                dataZoom: {\n                    show: true,\n                },\n                restore: {\n                    show: true\n                },\n            }\n        },\n        xAxis: {\n            type: 'category',\n            name: data.x_label,\n            nameLocation: 'center',\n            nameTextStyle: {\n                padding: [5,0,0,0],\n                color: \"#bbbbbb\"\n            },\n            axisLabel: {\n                align: 'center',\n                color: \"#a3a3a3\"\n            },\n            boundaryGap: false,\n            splitLine: {\n                show: true,\n                lineStyle: {\n                    type: \"dashed\",\n                    opacity: 0.5,\n                }\n            },\n            data: data.x\n        },\n        yAxis: {\n            name: data.y_label,\n            nameTextStyle: {\n                align: 'left',\n                color: \"#bbbbbb\"\n            },\n            axisLine: {\n                show: true\n            },\n            axisLabel: {\n                align: 'right',\n                color: \"#a3a3a3\"\n            },\n            axisTick: {\n                lineStyle: {\n                    color: \"#a3a3a3\"\n                }\n            },\n            scale: true,\n            splitLine: {\n                show: true,\n                lineStyle: {\n                    type: \"dashed\",\n                    opacity: 0.5,\n                }\n            },\n        },\n        series: {\n            type:'line',\n            data: data.y\n        }\n    })\n}\n\nfunction copyData(text: string) {\n    const CSVText = getTextAsCSV(text);\n    navigator.clipboard.writeText(CSVText).then(function() {\n        console.log('Copying to clipboard was successful!');\n    }, function(err) {\n    console.error('Could not copy data: ', err);\n    });\n}\n\nfunction getDownloadURL(text: string) {\n    const csvstring = getTextAsCSV(text);\n    const csvarray = csvstring.split(/\\n/g).map((v, idx) => idx ? v + '\\n' : v);\n\n    const blob = new Blob(csvarray);\n\n    return URL.createObjectURL(blob);\n}\n\nfunction getTextAsCSV(text: string) {\n    const splitstring = text.split('\\n');\n\n    splitstring.forEach((row, rowindex) => {\n        if (row.search(/\\s/ig) >= 0) { // if the current row contains any spaces or non-whitespace special char (\\n\\r\\t\\f)\n            const h = row.split(',');\n            h.forEach((value, i) => {\n                h[i] = '\"' + value + '\"';\n            });\n            splitstring[rowindex] = h.join(',');\n        }\n    })\n\n    return splitstring.join('\\n');\n}\n\nfunction showData(data: AnalysisChart) {\n    const dataTable = document.createElement('TABLE');\n    dataTable.className = 'datatable'\n    const thead = document.createElement('thead');\n    dataTable.appendChild(thead);\n    const theadRow = thead.insertRow(0);\n    theadRow.className = 'datatable-row';\n    const theadOne = theadRow.insertCell(0);\n    theadOne.innerHTML = '<b># Modes</b>';\n    const theadTwo = theadRow.insertCell(1);\n    theadTwo.innerHTML = `<b>${data.y_label}</b>`;\n    const tbody = document.createElement('tbody');\n    dataTable.appendChild(tbody);\n\n    let csvtext = `# Modes:,${data.y_label}\\n`\n\n    for (let i = 0; i < data.x.length; i++) {\n        const row = tbody.insertRow(-1); // -1 index == last position\n        row.className = 'datatable-row';\n        const cellOne = row.insertCell(0);\n        cellOne.innerHTML = `${data.x[i]}`;\n        const cellTwo = row.insertCell(1);\n        cellTwo.innerHTML = `${data.y[i]}`;\n\n        csvtext += `${data.x[i]},${data.y[i]}\\n`\n    }\n\n    const div = document.createElement('div');\n    div.className = \"dataview\";\n\n    const copybtn = document.createElement('button');\n    copybtn.className = 'dataview-button copy-button';\n    copybtn.innerHTML = 'Copy to Clipboard';\n    copybtn.onclick = () => copyData(csvtext);\n\n    const downloadbtn = document.createElement('button');\n    downloadbtn.className = 'dataview-button download-button';\n    downloadbtn.innerHTML = 'Download';\n\n    const downloadlink = document.createElement('a');\n    downloadlink.href = getDownloadURL(csvtext);\n    downloadlink.download = data.y_label.toLowerCase().replaceAll(\" \", \"_\") + '.csv';\n\n    downloadbtn.appendChild(downloadlink);\n    downloadbtn.onclick = () => downloadlink.click();\n\n    div.appendChild(dataTable);\n    div.appendChild(copybtn);\n    div.appendChild(downloadbtn);\n\n    return (\n        div\n    );\n}\n\nfunction roundTo(num: number, place: number) {\n    const factor = 10 ** place;\n    return Math.round(num * factor) / factor;\n}\n","\nimport { use } from 'echarts/core';\nimport { SVGRenderer } from 'echarts/renderers';\nimport { LineChart } from 'echarts/charts';\nimport {\n  TitleComponent,\n  TooltipComponent,\n  GridComponent,\n  ToolboxComponent,\n  DataZoomComponent\n} from 'echarts/components';\nimport VChart from 'vue-echarts';\nimport { lineChartOptions } from './charts'\nimport { AnalysisChart } from '@/types';\n\n// registers required echarts components\nuse([SVGRenderer,LineChart,TitleComponent,TooltipComponent,GridComponent,ToolboxComponent,DataZoomComponent]);\n\nexport default {\n    name: \"Charts\",\n    props: {\n      charts: {\n        type: Array,\n        default: () => [],\n        validator: (value: any) => {\n          // Check that every item in the array is a valid AnalysisChart object\n          return value.every((chart: any) => {\n            return (\n              typeof chart === 'object' &&\n              chart !== null &&\n              typeof chart.title === 'string' &&\n              typeof chart.type === 'string' &&\n              typeof chart.x_label === 'string' &&\n              typeof chart.y_label === 'string' &&\n              chart.x.every((val: any) => typeof val === 'number') &&\n              chart.y.every((val: any) => typeof val === 'number')\n            );\n          });\n        },\n        required: true\n      }\n    },\n    components: {\n      VChart\n    },\n    setup(props) {\n      const data = {};\n\n      const methods = {\n        generateChart: (index: number) => {\n            return lineChartOptions(props.charts[index] as AnalysisChart);\n        }\n      };\n\n      const computed = {};\n\n      const init = () => {};\n\n      init();\n\n      return {\n        data,\n        methods,\n        computed,\n      };\n    },\n};\n","export enum AnalysisTabs {\n    PCA = 0,\n    Groups,\n    Charts,\n    Particles,\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Charts.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Charts.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./Charts.vue?vue&type=template&id=06c87e7c\"\nimport script from \"./Charts.vue?vue&type=script&lang=ts\"\nexport * from \"./Charts.vue?vue&type=script&lang=ts\"\nimport style0 from \"./Charts.vue?vue&type=style&index=0&id=06c87e7c&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('v-select',{attrs:{\"label\":\"Group Set\",\"items\":_vm.allGroupSets,\"item-text\":\"set\",\"item-value\":\"set\"},model:{value:(_vm.groupSet),callback:function ($$v) {_vm.groupSet=$$v},expression:\"groupSet\"}}),_c('v-divider'),_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',[_c('v-select',{attrs:{\"items\":(_vm.currGroup && _vm.groupSet) ? _vm.groupPairings[_vm.groupSet] : [''],\"item-text\":\"group1\",\"item-value\":\"group1\"},model:{value:(_vm.currPairing.left),callback:function ($$v) {_vm.$set(_vm.currPairing, \"left\", $$v)},expression:\"currPairing.left\"}})],1),_c('v-col',[_c('v-slider',{attrs:{\"min\":\"0.0\",\"max\":\"1.0\",\"step\":\"0.1\",\"default\":\"0.5\",\"show-ticks\":\"always\",\"hide-details\":\"\",\"disabled\":_vm.currGroup === undefined},model:{value:(_vm.groupRatio),callback:function ($$v) {_vm.groupRatio=$$v},expression:\"groupRatio\"}})],1),_c('v-col',[_c('v-select',{attrs:{\"items\":(_vm.currGroup && _vm.groupSet) ? _vm.groupPairings[_vm.groupSet] : [''],\"item-text\":\"group2\",\"item-value\":\"group2\"},model:{value:(_vm.currPairing.right),callback:function ($$v) {_vm.$set(_vm.currPairing, \"right\", $$v)},expression:\"currPairing.right\"}})],1)],1),_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-checkbox',{staticClass:\"mt-0 mb-8 pt-0\",attrs:{\"disabled\":_vm.currGroup === undefined,\"label\":\"Animate\",\"hide-details\":\"\"},model:{value:(_vm.animate),callback:function ($$v) {_vm.animate=$$v},expression:\"animate\"}})],1),_c('v-card',{staticClass:\"ma-auto mb-3\",attrs:{\"align\":\"center\",\"justify\":\"center\",\"disabled\":_vm.currGroup === undefined}},[_c('v-btn',{staticClass:\"ms-4\",attrs:{\"color\":\"grey darken-3\"},on:{\"click\":() => { _vm.groupRatio = 0.0; _vm.methods.stopAnimating()}}},[_vm._v(\"Left Mean\")]),_c('v-btn-toggle',{staticClass:\"ms-4\",attrs:{\"color\":\"white\"}},[_c('v-btn',{attrs:{\"color\":\"grey darken-4\",\"disabled\":_vm.animate || _vm.currentlyCaching},on:{\"click\":() => _vm.groupDiff = !_vm.groupDiff}},[_vm._v(\"Diff -->\")])],1),_c('v-btn',{staticClass:\"ms-4\",attrs:{\"color\":\"grey darken-3\"},on:{\"click\":() => { _vm.groupRatio = 1.0; _vm.methods.stopAnimating()}}},[_vm._v(\"Right Mean\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport {\n    analysis,\n    cacheAllComparisons,\n    analysisFilesShown,\n    currentAnalysisParticlesFiles,\n    meanAnalysisParticlesFiles\n} from '@/store';\nimport { AnalysisGroup } from '@/types';\nimport { Ref, computed, inject, ref, watch, onMounted } from 'vue';\n\nimport { AnalysisTabs } from './util';\n\n  export default {\n    props: {\n      currentTab: String,\n      openTab: Number,\n    },\n    setup(props) {\n      const currGroup = ref<AnalysisGroup[]>();\n      const groupRatio = ref(0.5);\n      const groupDiff = ref(false);\n      const groupSet = ref<string>();\n      const currPairing = ref<{left: string, right: string}>({left:\"\", right:\"\"});\n      const prevPairing = ref<{left: string, right: string}>({left:\"\", right:\"\"}); // stores the previously selected pairing\n\n      const currentlyCaching: Ref | undefined = inject('currentlyCaching');\n      const animate = ref<boolean>(false);\n\n      let step = 0.1;\n      let intervalId: number;\n\n      const methods = {\n        // determine if the currently selected group pairing is inverted\n        // returns true if they are inverted, false if not\n        pairingIsInverted(g: any) {\n            return (g.group1 === currPairing.value.right && g.group2 === currPairing.value.left)\n        },\n        updateCurrGroup() {\n            currGroup.value = analysis.value?.groups.filter((g) => {\n                if (g.name === groupSet.value) {\n                    if ((g.group1 === currPairing.value.left && g.group2 === currPairing.value.right)\n                        || (g.group1 === currPairing.value.right && g.group2 === currPairing.value.left)) { // if the groups pairings match the selected pairings\n                        if (!methods.pairingIsInverted(g))  { // in-order group pairings\n                            if (g.ratio === groupRatio.value) {\n                                return true;\n                            }\n                        } else if (methods.pairingIsInverted(g)) { // inverted group pairings\n                            if (g.ratio === parseFloat((1 - groupRatio.value).toFixed(1))) { // floating point precision errors (https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems)\n                                return true;\n                            }\n                        }\n                    }\n                }\n            })\n        },\n        setDefaultPairing() {\n            if (groupSet.value === undefined && allGroupSets.value?.length) {\n                groupSet.value = allGroupSets.value[0];\n            }\n            // default left and right group selections: first and second item in groupSet pairings list\n            if (groupSet.value !== undefined) {\n                currPairing.value.left = groupPairings.value[groupSet.value][0];\n                currPairing.value.right = groupPairings.value[groupSet.value][1];\n                prevPairing.value = {left: currPairing.value.left, right: currPairing.value.right};\n            }\n        },\n        // triggered on group pairing select change\n        updateGroupSelections() {\n            // if the new left and right groups are the same, flip the two values according to the previous selections\n            if (currPairing.value.left === currPairing.value.right && groupSet.value !== undefined) {\n                // set new non-changed side to opposite side in old pairing\n                if (currPairing.value.left === prevPairing.value.left) {\n                    currPairing.value.left = prevPairing.value.right;\n                }\n                if (currPairing.value.right === prevPairing.value.right) {\n                    currPairing.value.right = prevPairing.value.left;\n                }\n            }\n\n            prevPairing.value.left = currPairing.value.left;\n            prevPairing.value.right = currPairing.value.right;\n\n            methods.updateGroupFileShown();\n        },\n        updateGroupFileShown() {\n            let filesShown: string[] | undefined = undefined;\n            let particles: string[] | undefined = undefined;\n            methods.updateCurrGroup();\n\n            if (props.currentTab === 'analyze' && analysis.value && currGroup.value){\n                filesShown = currGroup.value.map((g) => g.file);\n                particles = currGroup.value.map((g) => g.particles);\n            }\n            currentAnalysisParticlesFiles.value = particles;\n            if (groupDiff.value) {\n                const meanParticles = analysis.value?.groups.filter((g) => {\n                    if (g.name === groupSet.value) {\n                      if (!methods.pairingIsInverted(g)) {\n                        if (g.ratio === 1.0) return true;\n                      } else if (methods.pairingIsInverted(g)) {\n                        if (g.ratio === 0.0) return true;\n                      }\n                    }\n                }) // account for inverted-pairings\n                if (meanParticles) {\n                    meanAnalysisParticlesFiles.value = meanParticles.map((p) => p.particles)\n                }\n            } else {\n                meanAnalysisParticlesFiles.value = analysis.value?.mean_shapes.map((m) => m.particles)\n            }\n\n            analysisFilesShown.value = filesShown;\n        },\n        async cacheAllGroupComparisons() {\n            const allInPairing = analysis.value?.groups.filter((g) => {\n                if (g.name === groupSet.value) { // if groupSet is same\n                    if ((g.group1 === currPairing.value.left || g.group1 === currPairing.value.right) && (g.group2 === currPairing.value.left || g.group2 === currPairing.value.right))\n                        return true;\n                }\n            })\n\n            if (allInPairing !== undefined) {\n                await cacheAllComparisons([allInPairing]);\n            }\n        },\n        animateSlider() {\n            if (props.openTab === AnalysisTabs.Groups) { // Group tab animate\n                if (groupRatio.value === 0) step = 0.1;\n                if (groupRatio.value === 1) step = -0.1;\n                groupRatio.value = parseFloat((groupRatio.value + step).toFixed(1));\n            }\n        },\n        async triggerAnimate() {\n            if (groupSet.value === undefined || animate == undefined) return;\n\n            if (animate.value && currentlyCaching) {\n                currentlyCaching.value = true;\n                await methods.cacheAllGroupComparisons();\n                currentlyCaching.value = false;\n                intervalId = setInterval(methods.animateSlider, 500);\n            }\n            if (animate.value === false && intervalId) {\n                clearInterval(intervalId);\n            }\n        },\n        stopAnimating() {\n          animate.value = false;\n        }\n      };\n\n      const allGroupSets = computed(() => {\n          return analysis.value?.groups.map((g) => g.name);\n      })\n\n      // get all possible unique group pairings\n      const groupPairings = computed(() => {\n            const g: { [name: string]: string[] } = {};\n            analysis.value?.groups.map((group: AnalysisGroup) => {\n                if (g[group.name] === undefined) g[group.name] = [];\n                if (!g[group.name].includes(group.group1)) g[group.name].push(group.group1);\n                if (!g[group.name].includes(group.group2)) g[group.name].push(group.group2);\n            })\n            return g;\n        })\n\n        onMounted(methods.setDefaultPairing);\n        watch(groupSet, () => {\n            methods.setDefaultPairing();\n            methods.updateGroupFileShown();\n            methods.stopAnimating();\n        })\n        watch(currPairing.value, () => {\n            methods.updateGroupSelections();\n            methods.stopAnimating();\n        })\n        watch(groupRatio, methods.updateGroupFileShown)\n        watch(groupDiff, methods.updateGroupFileShown)\n\n        if (animate) {\n            watch(animate, methods.triggerAnimate)\n        }\n\n      return {\n        methods,\n        groupRatio,\n        groupDiff,\n        groupSet,\n        allGroupSets,\n        groupPairings,\n        currGroup,\n        currPairing,\n        animate,\n        currentlyCaching,\n      };\n    },\n  };\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Groups.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Groups.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./Groups.vue?vue&type=template&id=377d4948\"\nimport script from \"./Groups.vue?vue&type=script&lang=ts\"\nexport * from \"./Groups.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"disabled\":\"!goodBadAngles.value\"}},[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-switch',{staticClass:\"mt-0 mb-8 pt-0\",attrs:{\"label\":\"Show Good/Bad Particles\",\"hide-details\":\"\"},model:{value:(_vm.showGoodBadParticlesMode),callback:function ($$v) {_vm.showGoodBadParticlesMode=$$v},expression:\"showGoodBadParticlesMode\"}})],1),_c('v-text-field',{attrs:{\"value\":_vm.goodBadMaxAngle,\"type\":\"number\",\"step\":\"1.0\",\"min\":\"1.0\",\"max\":\"360.0\",\"label\":\"Max Angle\",\"hide-details\":\"\"},on:{\"input\":_vm.changeMaxAngle}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport _ from 'lodash';\nimport {\n  goodBadAngles,\n  showGoodBadParticlesMode,\n  goodBadMaxAngle,\n} from '@/store';\n\nexport default {\n    name: \"Particles\",\n    setup() {\n\n      function changeMaxAngle(angle: string) {\n        if (parseFloat(angle)) {\n          goodBadMaxAngle.value = parseFloat(angle);\n        }\n      }\n\n      return {\n        changeMaxAngle: _.debounce(changeMaxAngle, 1000),\n        showGoodBadParticlesMode,\n        goodBadAngles,\n        goodBadMaxAngle,\n      };\n    },\n};\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Particles.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Particles.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./Particles.vue?vue&type=template&id=c3a47aac\"\nimport script from \"./Particles.vue?vue&type=script&lang=ts\"\nexport * from \"./Particles.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('v-select',{attrs:{\"label\":\"Select mode\",\"items\":_vm.modeOptions,\"item-text\":\"mode\",\"item-value\":\"mode\"},model:{value:(_vm.mode),callback:function ($$v) {_vm.mode=$$v},expression:\"mode\"}}),_c('v-row',{attrs:{\"justify\":\"space-between\"}},[_c('v-slider',{attrs:{\"min\":_vm.stdDevRange.range * -1,\"max\":_vm.stdDevRange.range,\"step\":_vm.stdDevRange.step,\"ticks\":\"always\",\"tick-size\":\"4\",\"thumb-label\":\"\",\"track-color\":\"#aaa\",\"track-fill-color\":\"#aaa\",\"label\":\"Std. Devs. from Mean\"},scopedSlots:_vm._u([{key:\"thumb-label\",fn:function(){return [_vm._v(\" \"+_vm._s(Math.round(_vm.stdDev * 100) / 100)+\" \")]},proxy:true}]),model:{value:(_vm.stdDev),callback:function ($$v) {_vm.stdDev=$$v},expression:\"stdDev\"}})],1),_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-checkbox',{staticClass:\"mt-0 mb-8 pt-0\",attrs:{\"label\":\"Animate\",\"hide-details\":\"\"},model:{value:(_vm.animate),callback:function ($$v) {_vm.animate=$$v},expression:\"animate\"}})],1),_c('br'),_c('v-data-table',{attrs:{\"headers\":_vm.pcaInfo.headers,\"items\":_vm.pcaInfo.items,\"item-class\":\"class\",\"hide-default-header\":\"\",\"hide-default-footer\":\"\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n  import { computed, ref, Ref, watch, inject } from 'vue';\n  import { AnalysisTabs } from './util';\n  import { CacheComparison } from '@/types';\nimport { groupBy } from '../../helper';\n  import {\n    analysis,\n    analysisFilesShown,\n    cacheAllComparisons,\n    currentAnalysisParticlesFiles,\n    meanAnalysisParticlesFiles,\n    selectedProject,\n  } from '@/store';\n\n  export default {\n    props: {\n      currentTab: String,\n      openTab: Number\n    },\n    setup(props) {\n      const mode = ref(1);\n      const stdDev = ref(0);\n\n      const menu = ref();\n\n      const showConfirmation = ref(false);\n\n      let step = 0;\n      let intervalId: number;\n\n      const currentlyCaching: Ref | undefined = inject('currentlyCaching');\n      const animate = ref<boolean>(false);\n\n      const modeOptions = computed(() => {\n        return analysis.value?.modes.sort((a, b) => a.mode - b.mode)\n      })\n\n      const currMode = computed(() => {\n        return analysis.value?.modes.find((m) => m.mode == mode.value)\n      })\n\n      const currPCAs = computed(() => {\n        return currMode.value?.pca_values.filter(\n            p => p.pca_value.toPrecision(2) === stdDev.value.toPrecision(2)\n        )\n      })\n\n      const stdDevRange = computed(() => {\n        if (!analysis.value || !currMode.value) return {range: 0.0, step: 0.0, numSteps: 0}\n        const pcaValues = currMode.value.pca_values.map(p => Math.round(p.pca_value * 100) / 100)\n        const numDomains = analysis.value.mean_shapes.length || 1\n        const min =  Math.min(...pcaValues);\n        const max =  Math.max(...pcaValues);\n        const range = max;\n        const step = (max - min) / (pcaValues.length / numDomains);\n        const numSteps = Math.round((max - min) / step) + 1;\n\n        return {\n            range, step, numSteps\n        }\n      })\n\n      const pcaInfo = computed(() => {\n        return {\n            headers: [\n                {text: 'key', value: 'key'},\n                {text: 'value', value: 'value', align: 'end'}\n            ],\n            items: [\n                {key: 'Lambda', value: currPCAs.value?.length ? Math.round(currPCAs.value[0].lambda_value * 100) / 100 : 0},\n                {key: 'Eigenvalue', value: currMode.value ? Math.round(currMode.value.eigen_value * 100) / 100 : 0},\n                {key: 'Explained Variance', value: currMode.value ? Math.round(currMode.value.explained_variance * 100) / 100 : 0, class: 'percentage'},\n                {key: 'Cumulative Explained Variance', value: currMode.value ? Math.round(currMode.value.cumulative_explained_variance * 100) / 100 : 0, class:'percentage'},\n            ],\n        }\n      })\n\n      const methods = {\n        updateFileShown() {\n            let filesShown: string[] = []\n            let particles: string[] = []\n            if (props.currentTab === 'analyze' && analysis.value){\n              if (stdDev.value === 0) {\n                filesShown = analysis.value.mean_shapes.map((m) => m.file)\n                particles = analysis.value.mean_shapes.map((m) => m.particles);\n              } else if (currPCAs.value) {\n                filesShown = currPCAs.value.map(p => p.file)\n                particles = currPCAs.value.map(p => p.particles)\n              }\n            }\n            currentAnalysisParticlesFiles.value = particles;\n            meanAnalysisParticlesFiles.value =  analysis.value?.mean_shapes.map((m) => m.particles);\n            analysisFilesShown.value = filesShown;\n        },\n        async cacheAllPCAComparisons() {\n          if (currMode.value !== undefined) {\n            const allInMode: CacheComparison[][] = Object.values(groupBy(currMode.value.pca_values, 'pca_value'));\n            await cacheAllComparisons(allInMode);\n          }\n        },\n        animateSlider() {\n            if (props.openTab === AnalysisTabs.PCA) { // PCA tab animate\n                const { range } = stdDevRange.value;\n                const min = range * -1;\n                const max = range;\n\n                if (stdDev.value <= min) {\n                  stdDev.value = min;\n                  step *= -1;\n                } else if (stdDev.value >= max) {\n                  stdDev.value = max;\n                  step *= -1;\n                }\n\n                stdDev.value = parseFloat((stdDev.value + step).toFixed(1));\n\n            }\n        },\n        async triggerAnimate() {\n            if (currMode.value === undefined || animate === undefined) return;\n\n            if (animate.value && currentlyCaching) {\n              step = stdDevRange.value.step;\n              currentlyCaching.value = true;\n              await methods.cacheAllPCAComparisons();\n              currentlyCaching.value = false;\n              intervalId = setInterval(methods.animateSlider, 500);\n            }\n            if (animate.value === false && intervalId) {\n              clearInterval(intervalId);\n            }\n        },\n        stopAnimating() {\n          animate.value = false;\n        },\n      }\n\n      const init = () => {\n        methods.updateFileShown();\n      }\n\n      init();\n\n      watch(props, methods.updateFileShown)\n      watch(analysis, methods.updateFileShown)\n\n      watch(mode, () => {\n        methods.updateFileShown();\n        animate.value = false;\n      })\n\n      watch(stdDev, methods.updateFileShown)\n      if (animate) {\n        watch(animate, methods.triggerAnimate)\n      }\n\n      return {\n        methods,\n        modeOptions,\n        mode,\n        stdDev,\n        stdDevRange,\n        pcaInfo,\n        animate,\n        menu,\n        showConfirmation,\n        selectedProject,\n      };\n    },\n  };\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PCA.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PCA.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./PCA.vue?vue&type=template&id=5bc3af8a\"\nimport script from \"./PCA.vue?vue&type=script&lang=ts\"\nexport * from \"./PCA.vue?vue&type=script&lang=ts\"\nimport style0 from \"./PCA.vue?vue&type=style&index=0&id=5bc3af8a&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport {\n    analysis,\n    analysisExpandedTab,\n    jobAlreadyDone,\n} from '@/store'\nimport { ref, watch, provide } from 'vue'\nimport Charts from './Charts.vue'\nimport Groups from './Groups.vue'\nimport Particles from './Particles.vue'\nimport PCA from './PCA.vue'\nimport { AnalysisTabs } from './util';\nimport TaskInfo from '../TaskInfo.vue'\nimport { AnalysisParams } from '@/types'\n\nexport default {\n    props: {\n        currentTab: {\n            type: String,\n            required: true,\n        }\n    },\n    components: {\n        Charts,\n        Groups,\n        Particles,\n        PCA,\n        TaskInfo,\n    },\n    setup() {\n        const formDefaults: AnalysisParams = {range: 2, steps: 11}\n        const openTab = ref(AnalysisTabs.PCA);\n        const formData = ref<AnalysisParams>({...formDefaults});\n        const currentlyCaching = ref<boolean>(false);\n\n        const pca = ref();\n        const groups = ref();\n\n        // provide mutable ref for use in child components\n        provide('currentlyCaching', currentlyCaching);\n\n        watch(openTab, () => {\n            analysisExpandedTab.value = openTab.value;\n            switch(openTab.value) {\n                case AnalysisTabs.PCA:\n                    if (groups.value) {\n                        groups.value.methods.stopAnimating();\n                    }\n                    pca.value.methods.updateFileShown();\n                    break;\n                case AnalysisTabs.Groups:\n                    pca.value.methods.stopAnimating();\n                    if (groups.value) {\n                        if (groups.value.currGroup) {\n                            groups.value.methods.updateGroupFileShown();\n                        }\n                    }\n                    break;\n                case AnalysisTabs.Charts:\n                    if (groups.value) {\n                        groups.value.methods.stopAnimating();\n                    }\n                    pca.value.methods.stopAnimating();\n                    break;\n                case AnalysisTabs.Particles:\n                    if (groups.value) {\n                        groups.value.methods.stopAnimating();\n                    }\n                    pca.value.methods.stopAnimating();\n                    break;\n            }\n        })\n\n        function resetForm() {\n            formData.value = formDefaults\n        }\n\n        return {\n            analysis,\n            formData,\n            openTab,\n            currentlyCaching,\n            pca,\n            groups,\n            resetForm,\n            jobAlreadyDone\n        }\n    },\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnalysisTab.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnalysisTab.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./AnalysisTab.vue?vue&type=template&id=3ba8df00\"\nimport script from \"./AnalysisTab.vue?vue&type=script&lang=ts\"\nexport * from \"./AnalysisTab.vue?vue&type=script&lang=ts\"\nimport style0 from \"./AnalysisTab.vue?vue&type=style&index=0&id=3ba8df00&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-expansion-panels',{model:{value:(_vm.openPanel),callback:function ($$v) {_vm.openPanel=$$v},expression:\"openPanel\"}},[_c('landmarks'),_c('constraints')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\" Landmarks \"),_c('v-spacer'),_c('v-text-field',{staticStyle:{\"max-width\":\"50px\"},attrs:{\"label\":\"Size\",\"type\":\"number\",\"min\":\"1\",\"max\":\"15\"},on:{\"click\":function($event){$event.stopPropagation();}},model:{value:(_vm.landmarkSize),callback:function ($$v) {_vm.landmarkSize=_vm._n($$v)},expression:\"landmarkSize\"}})],1),(_vm.landmarksLoading)?_c('v-expansion-panel-content',[_c('v-progress-linear',{attrs:{\"indeterminate\":\"\"}})],1):_c('v-expansion-panel-content',[_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.landmarkInfo,\"expanded\":_vm.expandedRows,\"item-key\":\"id\",\"disable-pagination\":\"\",\"hide-default-footer\":\"\",\"single-select\":\"\",\"dense\":\"\",\"width\":\"100%\"},scopedSlots:_vm._u([{key:\"item.color\",fn:function({ index, item }){return [_c('v-dialog',{attrs:{\"value\":\"index\",\"width\":\"400\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-icon',_vm._g(_vm._b({staticClass:\"delete-icon\"},'v-icon',attrs,false),on),[_vm._v(\" mdi-trash-can \")])]}}],null,true),model:{value:(_vm.dialogs[index]),callback:function ($$v) {_vm.$set(_vm.dialogs, index, $$v)},expression:\"dialogs[index]\"}},[_c('v-card',[_c('v-card-title',{staticStyle:{\"word-break\":\"break-word\"}},[_vm._v(\" Are you sure you want to remove \"+_vm._s(item.name)+\" on all subjects? \")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"red\"},on:{\"click\":function($event){return _vm.deleteLandmark(item)}}},[_vm._v(\" Yes, Delete This Landmark \")])],1)],1)],1),_c('v-dialog',{attrs:{\"width\":\"300\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({staticClass:\"color-square\",style:({backgroundColor: _vm.colorStrings[index]})},'v-btn',attrs,false),on))]}}],null,true)},[_c('v-card',[_c('v-card-title',[_vm._v(\"Change color for \"+_vm._s(item.name))]),_c('v-color-picker',{attrs:{\"value\":_vm.getColorObject(item.color),\"dot-size\":\"25\"},on:{\"update:color\":(c) => _vm.updateLandmarkColor(index, c)}})],1)],1)]}},{key:\"item.name\",fn:function({ index, item }){return [_c('v-text-field',{staticStyle:{\"width\":\"100px\"},on:{\"input\":(v) => _vm.updateLandmarkInfo(index, v, item.comment)},model:{value:(item.name),callback:function ($$v) {_vm.$set(item, \"name\", $$v)},expression:\"item.name\"}})]}},{key:\"item.comment\",fn:function({ index, item }){return [_c('v-text-field',{staticStyle:{\"width\":\"130px\"},on:{\"input\":(v) => _vm.updateLandmarkInfo(index, item.name, v)},model:{value:(item.comment),callback:function ($$v) {_vm.$set(item, \"comment\", $$v)},expression:\"item.comment\"}})]}},{key:\"item.domain\",fn:function({ index, item }){return [_c('v-select',{staticStyle:{\"width\":\"80px\"},attrs:{\"items\":_vm.anatomies.map((a) => a.replace('anatomy_', '')),\"disabled\":item.num_set > 0},on:{\"input\":(v) => _vm.updateLandmarks()},model:{value:(item.domain),callback:function ($$v) {_vm.$set(item, \"domain\", $$v)},expression:\"item.domain\"}})]}},{key:\"item.num_set\",fn:function({ item }){return [_c('div',{staticStyle:{\"width\":\"60px\",\"text-align\":\"right\"}},[_vm._v(\" \"+_vm._s(item.num_set)+\" / \"+_vm._s(_vm.allSubjectsForDataset.length)+\" \"),(_vm.expandedRows.includes(item))?_c('v-icon',{on:{\"click\":function($event){_vm.expandedRows=[]}}},[_vm._v(\"mdi-menu-up\")]):_c('v-icon',{on:{\"click\":function($event){_vm.expandedRows=[item]}}},[_vm._v(\"mdi-menu-down\")])],1)]}},{key:\"expanded-item\",fn:function({ item }){return [_c('div',{staticStyle:{\"width\":\"100%\"}},_vm._l((_vm.allSubjectsForDataset),function(subject){return _c('div',{key:subject.id,staticClass:\"d-flex py-1\",staticStyle:{\"align-items\":\"center\",\"justify-content\":\"space-between\",\"width\":\"100%\"}},[_c('span',{staticStyle:{\"width\":\"170px\"}},[_vm._v(_vm._s(subject.name))]),_c('v-btn',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.toggleSubjectShown(subject.id, item.domain)}}},[_vm._v(\" \"+_vm._s(_vm.isShapeShown(subject.id, item.domain) ? 'Hide' : 'Show')+\" subject \")]),(_vm.getPlacementStatus(subject, item))?_c('div',{staticStyle:{\"width\":\"170px\",\"text-align\":\"right\"}},[(!_vm.currentLandmarkPlacement && _vm.getPlacementStatus(subject, item) === 'NOT SET' && _vm.isShapeShown(subject.id, item.domain))?_c('v-btn',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.beginPlacement(subject, item)}}},[_vm._v(\" BEGIN PLACEMENT \")]):_c('span',[_vm._v(\" \"+_vm._s(_vm.getPlacementStatus(subject, item))+\" \")])],1):_vm._e()],1)}),0)]}}])}),_c('div',{staticClass:\"d-flex py-3\",staticStyle:{\"justify-content\":\"space-between\"}},[_c('v-btn',{on:{\"click\":_vm.newLandmark}},[_vm._v(\" + New Landmark \")]),(_vm.changesMade)?_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\" Save Landmarks \")]):_c('span',[_vm._v(\"Landmarks Saved.\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { computed, ref, watch } from 'vue';\nimport {\n    landmarkInfo,\n    landmarksLoading,\n    selectedProject,\n    allSubjectsForDataset,\n    anatomies,\n    allSetLandmarks,\n    landmarkSize,\n    currentLandmarkPlacement,\n    reassignLandmarkIDsByIndex,\n    reassignLandmarkNumSetValues,\n} from '@/store';\nimport { saveLandmarkData } from '@/api/rest'\nimport { getLandmarkLocation, getWidgetInfo, isShapeShown, setLandmarkLocation, toggleSubjectShown } from '../store/methods';\nimport { rgbToHex } from '@/helper';\n\nexport default {\n    setup() {\n        const headers =  [\n            {text: '', value: 'color', width: '60px', sortable: false},\n            {text: 'Name', value: 'name', width: '120px'},\n            {text: 'Comment', value: 'comment', width: '150px'},\n            {text: 'Domain', value: 'domain', width: '100px'},\n            {text: '# set', value: 'num_set', width: '60px', sortable: false},\n        ];\n\n        const changesMade = ref(false);\n\n        const expandedRows = ref([]);\n\n        const dialogs = ref([]);\n\n        const colorStrings = computed(() => {\n            return landmarkInfo.value.map(({color}) => {\n                return `rgb(${color[0]},${color[1]},${color[2]})`\n            })\n        })\n\n        function getColorObject(rgb) {\n            return {'r': rgb[0], 'g': rgb[1], 'b': rgb[2]}\n        }\n\n        function getPlacementStatus(subject, item) {\n            const placement = getLandmarkLocation(subject, item)\n            if(placement) {\n                if (currentLandmarkPlacement.value === getWidgetInfo(subject, item)) {\n                    return `Click anywhere on ${subject.name} ${item.domain}`\n                }\n                const coordStrings = []\n                placement.forEach(v => coordStrings.push(v.toFixed(2)))\n                return coordStrings.join(\", \")\n            }\n            return 'NOT SET'\n        }\n\n        function beginPlacement(subject, item) {\n            currentLandmarkPlacement.value = getWidgetInfo(subject, item)\n        }\n\n\n        function newLandmark() {\n            const newID = landmarkInfo.value?.length || 0\n            const landmark = {\n                color: [\n                    100 * (newID % 2),\n                    50 * (newID % 5),\n                    80 * (newID % 3)\n                ],\n                comment: '',\n                domain: anatomies.value[0].replace('anatomy_', ''),\n                id: newID,\n                name: `L${newID}`,\n                num_set: 0,\n                visible: true,\n            }\n            if (landmarkInfo.value?.length) {\n                landmarkInfo.value = [\n                    ...landmarkInfo.value,\n                    landmark\n                ]\n            } else {\n                landmarkInfo.value = [landmark]\n            }\n            reassignLandmarkIDsByIndex()\n            expandedRows.value = [landmark]\n            selectedProject.value.landmarks = [\n                ...selectedProject.value.landmarks,\n                { newAddition: true }\n            ]\n            changesMade.value = true\n        }\n\n        function deleteLandmark(item) {\n            allSubjectsForDataset.value.forEach((subject) => {\n                setLandmarkLocation(subject, item, undefined)\n            })\n            landmarkInfo.value.splice(item.id, 1)\n            reassignLandmarkIDsByIndex()\n            currentLandmarkPlacement.value = undefined\n            dialogs.value = []\n            expandedRows.value = []\n            changesMade.value = true\n        }\n\n        function updateLandmarkInfo(landmarkIndex, name, comment) {\n            landmarkInfo.value[landmarkIndex] = Object.assign(\n                {}, landmarkInfo.value[landmarkIndex], {name, comment}\n            )\n            // reassign store var for listeners\n            landmarkInfo.value = [...landmarkInfo.value]\n            changesMade.value = true\n        }\n\n        function updateLandmarkColor(landmarkIndex, color) {\n            color = [\n                color.rgba.r, color.rgba.g, color.rgba.b\n            ]\n            landmarkInfo.value[landmarkIndex] = Object.assign(\n                {}, landmarkInfo.value[landmarkIndex], {color}\n            )\n            // overwrite landmarkInfo so colorStrings will recompute\n            landmarkInfo.value = [...landmarkInfo.value]\n        }\n\n        function updateLandmarks() {\n            landmarkInfo.value = [...landmarkInfo.value]\n        }\n\n        function submit() {\n            const locationData = Object.fromEntries(\n                Object.entries(allSetLandmarks.value).map(([subjectName, subjectRecords]) => {\n                    const subjectID = allSubjectsForDataset.value.find((s) => s.name === subjectName)?.id\n                    return [subjectID, Object.fromEntries(\n                        Object.entries(subjectRecords).map(([domain, domainRecords]) => {\n                            return [domain, Object.values(domainRecords).filter((l) => l)]\n                        })\n                    )]\n                })\n            )\n            const infoData = landmarkInfo.value.map((lInfo => {\n                return {\n                    \"domain\": lInfo.domain,\n                    \"name\": lInfo.name,\n                    \"visible\": \"true\",\n                    \"color\": rgbToHex(lInfo.color),\n                    \"comment\": lInfo.comment\n                }\n            }))\n            saveLandmarkData(\n                selectedProject.value.id,\n                infoData,\n                locationData\n            ).then((response) => {\n                if (response.id === selectedProject.value.id) {\n                    selectedProject.value = response\n                    changesMade.value = false\n                }\n            })\n        }\n\n        watch(allSetLandmarks, () => changesMade.value = true)\n\n        watch(currentLandmarkPlacement, (curr) => {\n            reassignLandmarkNumSetValues()\n            if (!curr) changesMade.value = true\n        })\n\n        return {\n            headers,\n            changesMade,\n            dialogs,\n            landmarksLoading,\n            expandedRows,\n            colorStrings,\n            landmarkSize,\n            landmarkInfo,\n            anatomies,\n            allSubjectsForDataset,\n            currentLandmarkPlacement,\n            isShapeShown,\n            toggleSubjectShown,\n            getColorObject,\n            getPlacementStatus,\n            beginPlacement,\n            newLandmark,\n            deleteLandmark,\n            updateLandmarkColor,\n            updateLandmarkInfo,\n            updateLandmarks,\n            submit,\n        }\n    }\n}\n</script>\n\n<template>\n    <v-expansion-panel>\n                <v-expansion-panel-header>\n                    Landmarks\n                    <v-spacer/>\n                    <v-text-field\n                        v-model.number=\"landmarkSize\"\n                        label=\"Size\"\n                        type=\"number\"\n                        min=\"1\"\n                        max=\"15\"\n                        style=\"max-width: 50px\"\n                        @click.stop\n                    />\n                </v-expansion-panel-header>\n                <v-expansion-panel-content v-if=\"landmarksLoading\">\n                    <v-progress-linear indeterminate/>\n                </v-expansion-panel-content>\n                <v-expansion-panel-content v-else>\n                    <v-data-table\n                        :headers=\"headers\"\n                        :items=\"landmarkInfo\"\n                        :expanded=\"expandedRows\"\n                        item-key=\"id\"\n                        disable-pagination\n                        hide-default-footer\n                        single-select\n                        dense\n                        width=\"100%\"\n                    >\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.color=\"{ index, item }\">\n                            <v-dialog\n                                v-model=\"dialogs[index]\"\n                                value=\"index\"\n                                width=\"400\"\n                            >\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <v-icon class=\"delete-icon\" v-bind=\"attrs\" v-on=\"on\">\n                                        mdi-trash-can\n                                    </v-icon>\n                                </template>\n                                <v-card>\n                                    <v-card-title style=\"word-break: break-word;\">\n                                        Are you sure you want to remove {{ item.name }}\n                                        on all subjects?\n                                    </v-card-title>\n                                    <v-card-actions>\n                                        <v-spacer/>\n                                        <v-btn color=\"red\" @click=\"deleteLandmark(item)\">\n                                            Yes, Delete This Landmark\n                                        </v-btn>\n                                    </v-card-actions>\n                                </v-card>\n                            </v-dialog>\n                            <v-dialog width=\"300\">\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <v-btn\n                                        class='color-square'\n                                        :style=\"{backgroundColor: colorStrings[index]}\"\n                                        v-bind=\"attrs\"\n                                        v-on=\"on\"\n                                    />\n                                </template>\n                                <v-card>\n                                    <v-card-title>Change color for {{ item.name }}</v-card-title>\n                                    <v-color-picker\n                                        :value=\"getColorObject(item.color)\"\n                                        dot-size=\"25\"\n                                        @update:color=\"(c) => updateLandmarkColor(index, c)\"\n                                    ></v-color-picker>\n                                </v-card>\n                            </v-dialog>\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.name=\"{ index, item }\">\n                            <v-text-field\n                                v-model=\"item.name\"\n                                style=\"width: 100px\"\n                                @input=\"(v) => updateLandmarkInfo(index, v, item.comment)\"\n                            />\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.comment=\"{ index, item }\">\n                            <v-text-field\n                                v-model=\"item.comment\"\n                                style=\"width: 130px\"\n                                @input=\"(v) => updateLandmarkInfo(index, item.name, v)\"\n                            />\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.domain=\"{ index, item }\">\n                            <v-select\n                                v-model=\"item.domain\"\n                                :items=\"anatomies.map((a) => a.replace('anatomy_', ''))\"\n                                :disabled=\"item.num_set > 0\"\n                                style=\"width: 80px\"\n                                @input=\"(v) => updateLandmarks()\"\n                            />\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.num_set=\"{ item }\">\n                            <div style=\"width: 60px; text-align: right;\">\n                                {{ item.num_set }} / {{ allSubjectsForDataset.length }}\n                                <v-icon v-if=\"expandedRows.includes(item)\" @click=\"expandedRows=[]\">mdi-menu-up</v-icon>\n                                <v-icon v-else @click=\"expandedRows=[item]\">mdi-menu-down</v-icon>\n                            </div>\n                        </template>\n                        <template v-slot:expanded-item=\"{ item }\">\n                            <div style=\"width: 100%\">\n                                <div\n                                    v-for=\"subject in allSubjectsForDataset\"\n                                    :key=\"subject.id\"\n                                    class=\"d-flex py-1\"\n                                    style=\"align-items: center; justify-content: space-between; width: 100%\"\n                                >\n                                    <span style=\"width: 170px;\">{{ subject.name }}</span>\n                                    <v-btn\n                                        small\n                                        @click=\"toggleSubjectShown(subject.id, item.domain)\"\n                                    >\n                                        {{ isShapeShown(subject.id, item.domain) ? 'Hide' : 'Show' }} subject\n                                    </v-btn>\n                                    <div\n                                        v-if=\"getPlacementStatus(subject, item)\"\n                                        style=\"width: 170px; text-align: right;\"\n                                    >\n                                        <v-btn\n                                            v-if=\"!currentLandmarkPlacement && getPlacementStatus(subject, item) === 'NOT SET' && isShapeShown(subject.id, item.domain)\"\n                                            @click=\"beginPlacement(subject, item)\"\n                                            small\n                                        >\n                                            BEGIN PLACEMENT\n                                        </v-btn>\n                                        <span v-else>\n                                            {{ getPlacementStatus(subject, item) }}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </template>\n                    </v-data-table>\n                    <div class=\"d-flex py-3\" style=\"justify-content: space-between;\">\n                        <v-btn @click=\"newLandmark\">\n                            + New Landmark\n                        </v-btn>\n                        <v-btn v-if=\"changesMade\" color=\"primary\" @click=\"submit\">\n                            Save Landmarks\n                        </v-btn>\n                        <span v-else>Landmarks Saved.</span>\n                    </div>\n                </v-expansion-panel-content>\n            </v-expansion-panel>\n</template>\n\n<style>\n.color-square {\n    height: 20px !important;\n    width: 20px !important;\n    min-width: 15px !important;\n    padding: 0 !important;\n    margin-left: 15px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landmarks.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Landmarks.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Landmarks.vue?vue&type=template&id=addf5cb4\"\nimport script from \"./Landmarks.vue?vue&type=script&lang=js\"\nexport * from \"./Landmarks.vue?vue&type=script&lang=js\"\nimport style0 from \"./Landmarks.vue?vue&type=style&index=0&id=addf5cb4&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\" Constraints \"),_c('v-spacer')],1),(_vm.constraintsLoading)?_c('v-expansion-panel-content',[_c('v-progress-linear',{attrs:{\"indeterminate\":\"\"}})],1):_c('v-expansion-panel-content',[_c('v-data-table',{staticClass:\"contraints-table\",attrs:{\"headers\":_vm.headers,\"items\":_vm.constraintInfo,\"expanded\":_vm.expandedRows,\"item-key\":\"id\",\"disable-pagination\":\"\",\"hide-default-footer\":\"\",\"single-select\":\"\",\"dense\":\"\",\"width\":\"100%\"},scopedSlots:_vm._u([{key:\"item.id\",fn:function({ index, item }){return [_c('v-dialog',{attrs:{\"value\":\"index\",\"width\":\"400\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-icon',_vm._g(_vm._b({staticClass:\"delete-icon\"},'v-icon',attrs,false),on),[_vm._v(\" mdi-trash-can \")])]}}],null,true),model:{value:(_vm.dialogs[index]),callback:function ($$v) {_vm.$set(_vm.dialogs, index, $$v)},expression:\"dialogs[index]\"}},[_c('v-card',[_c('v-card-title',{staticStyle:{\"word-break\":\"break-word\"}},[_vm._v(\" Are you sure you want to remove \"+_vm._s(item.name)+\" on all subjects? \")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"red\"},on:{\"click\":function($event){return _vm.deleteConstraint(item)}}},[_vm._v(\" Yes, Delete This Constraint \")])],1)],1)],1)]}},{key:\"item.show\",fn:function({ index, item }){return [_c('v-icon',{on:{\"click\":function($event){return _vm.toggleConstraintShown(item)}}},[_vm._v(\" \"+_vm._s(_vm.constraintsShown.includes(item.id) ? 'mdi-eye-outline' : 'mdi-eye-off-outline')+\" \")])]}},{key:\"item.name\",fn:function({ index, item }){return [_c('v-text-field',{staticStyle:{\"width\":\"130px\"},on:{\"input\":function($event){_vm.changesMade = true}},model:{value:(item.name),callback:function ($$v) {_vm.$set(item, \"name\", $$v)},expression:\"item.name\"}})]}},{key:\"item.type\",fn:function({ index, item }){return [_c('v-select',{staticStyle:{\"width\":\"100px\"},attrs:{\"items\":['plane', 'paint'],\"disabled\":item.num_set > 0,\"error-messages\":_vm.constraintErrors[item.id]},on:{\"change\":(v) => _vm.validateConstraint(item)},model:{value:(item.type),callback:function ($$v) {_vm.$set(item, \"type\", $$v)},expression:\"item.type\"}})]}},{key:\"item.domain\",fn:function({ index, item }){return [_c('v-select',{staticStyle:{\"width\":\"80px\"},attrs:{\"items\":_vm.anatomies.map((a) => a.replace('anatomy_', '')),\"disabled\":item.num_set > 0},on:{\"change\":(v) => _vm.validateConstraint(item)},model:{value:(item.domain),callback:function ($$v) {_vm.$set(item, \"domain\", $$v)},expression:\"item.domain\"}})]}},{key:\"item.num_set\",fn:function({ item }){return [_c('div',{staticStyle:{\"width\":\"60px\",\"text-align\":\"right\"}},[_vm._v(\" \"+_vm._s(item.num_set)+\" / \"+_vm._s(_vm.allSubjectsForDataset.length)+\" \"),(_vm.expandedRows.includes(item))?_c('v-icon',{on:{\"click\":function($event){_vm.expandedRows=[]}}},[_vm._v(\"mdi-menu-up\")]):_c('v-icon',{on:{\"click\":function($event){_vm.expandedRows=[item]}}},[_vm._v(\"mdi-menu-down\")])],1)]}},{key:\"expanded-item\",fn:function({ item }){return [_c('div',{staticStyle:{\"width\":\"calc(100% - 20px)\"}},_vm._l((_vm.allSubjectsForDataset),function(subject){return _c('div',{key:subject.id,staticClass:\"d-flex py-1\",staticStyle:{\"align-items\":\"center\",\"justify-content\":\"space-between\",\"width\":\"100%\"}},[_c('span',{staticStyle:{\"width\":\"150px\"}},[_vm._v(_vm._s(subject.name))]),(!_vm.currentConstraintPlacement)?_c('v-btn',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.toggleSubjectShown(subject.id, item.domain)}}},[_vm._v(\" \"+_vm._s(_vm.isShapeShown(subject.id, item.domain) ? 'Hide' : 'Show')+\" subject \")]):(_vm.getPlacementStatus(subject, item) === 'PLACING' && item.type === 'paint')?_c('div',{staticStyle:{\"width\":\"200px\",\"text-align\":\"center\"}},[_c('v-text-field',{staticStyle:{\"max-width\":\"70px\",\"display\":\"inline-block\",\"margin-right\":\"10px\"},attrs:{\"label\":\"Brush Size\",\"type\":\"number\",\"min\":\"1\",\"max\":\"15\"},on:{\"click\":function($event){$event.stopPropagation();}},model:{value:(_vm.constraintPaintRadius),callback:function ($$v) {_vm.constraintPaintRadius=_vm._n($$v)},expression:\"constraintPaintRadius\"}}),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('div',_vm._g(_vm._b({staticStyle:{\"max-width\":\"70px\",\"display\":\"inline-block\",\"margin-right\":\"10px\"}},'div',attrs,false),on),[_c('v-switch',{attrs:{\"label\":\"Exclude\"},model:{value:(_vm.constraintPaintExclusion),callback:function ($$v) {_vm.constraintPaintExclusion=$$v},expression:\"constraintPaintExclusion\"}})],1)]}}],null,true)},[_c('span',[_vm._v(\"Enable to paint exclusion area. Disable to erase exclusion area.\")])])],1):_c('v-spacer'),_c('div',{staticStyle:{\"width\":\"140px\",\"text-align\":\"right\"}},[(_vm.getPlacementStatus(subject, item) === 'INVALID')?_c('span',[_vm._v(\" INVALID \")]):(_vm.isShapeShown(subject.id, item.domain) && !_vm.constraintsShown.includes(item.id))?_c('span',[_vm._v(\" Not visible \")]):(_vm.isShapeShown(subject.id, item.domain) && _vm.getPlacementStatus(subject, item) !== 'plane placed')?_c('v-btn',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.toggleCurrentPlacement(subject, item)}}},[(_vm.getPlacementStatus(subject, item) === 'NOT SET')?_c('span',[_vm._v(\"BEGIN PLACEMENT\")]):_vm._e(),(_vm.getPlacementStatus(subject, item) === 'PLACING')?_c('span',[_vm._v(\"DONE\")]):_vm._e(),(_vm.getPlacementStatus(subject, item) === 'paint placed')?_c('span',[_vm._v(\"EDIT PAINT\")]):_vm._e()]):_c('span',[_vm._v(\" \"+_vm._s(_vm.getPlacementStatus(subject, item)))])],1)],1)}),0)]}}])}),_c('div',{staticClass:\"d-flex py-3\",staticStyle:{\"justify-content\":\"space-between\"}},[_c('v-btn',{on:{\"click\":_vm.newConstraint}},[_vm._v(\" + New Constraint \")]),(_vm.changesMade)?_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\" Save Constraints \")]):_c('span',[_vm._v(\"Constraints Saved.\")])],1),(!_vm.changesMade && _vm.saveWarning)?_c('span',{staticStyle:{\"color\":\"orange\"}},[_vm._v(\" \"+_vm._s(_vm.saveWarning)+\" \")]):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { ref, watch } from 'vue';\nimport {\n    constraintInfo,\n    constraintsLoading,\n    constraintsShown,\n    constraintPaintRadius,\n    constraintPaintExclusion,\n    selectedProject,\n    allSubjectsForDataset,\n    anatomies,\n    allSetConstraints,\n    currentConstraintPlacement,\n    reassignConstraintIDsByIndex,\n} from '@/store';\nimport { getConstraintLocation, getWidgetInfo, isShapeShown, setConstraintLocation, toggleSubjectShown } from '../store/methods';\nimport { saveConstraintData } from '@/api/rest';\nimport { convertConstraintDataForDB } from '@/reader/constraints';\nimport { groupBy } from '@/helper';\n\nexport default {\n    setup() {\n        const headers =  [\n            {text: '', value: 'id', width: '10px', sortable: false},\n            {text: 'Show', value: 'show', width: '10px', sortable: false},\n            {text: 'Name', value: 'name', width: '150px'},\n            {text: 'Type', value: 'type', width: '120px'},\n            {text: 'Domain', value: 'domain', width: '100px'},\n            {text: '# set', value: 'num_set', width: '60px', sortable: false, align: 'end'},\n        ];\n\n        const changesMade = ref(false);\n\n        const expandedRows = ref([]);\n\n        const dialogs = ref([]);\n\n        const constraintErrors = ref({});\n\n        const saveWarning = ref();\n\n        function getPlacementStatus(subject, item) {\n            const placement = getConstraintLocation(subject, item)\n            if (JSON.stringify(currentConstraintPlacement.value) === JSON.stringify(getWidgetInfo(subject, item))) {\n                return 'PLACING'\n            } else if (placement) {\n                return item.type + ' placed'\n            } else if (constraintErrors.value[item.id]) {\n                return 'INVALID'\n            }\n            return 'NOT SET'\n        }\n\n        function toggleConstraintShown(item) {\n            if (constraintsShown.value.includes(item.id)) {\n                constraintsShown.value = constraintsShown.value.filter((c) => c !== item.id)\n            } else {\n                constraintsShown.value = [\n                    ...constraintsShown.value,\n                    item.id\n                ]\n            }\n        }\n\n        function toggleCurrentPlacement(subject, item) {\n            if (currentConstraintPlacement.value) currentConstraintPlacement.value = undefined\n            else currentConstraintPlacement.value = getWidgetInfo(subject, item)\n        }\n\n        function validateConstraint(cInfo) {\n            if (cInfo.type === 'paint' && constraintInfo.value.some((c) => {\n                return c.id !== cInfo.id && c.domain === cInfo.domain && c.type === cInfo.type\n            })) {\n                constraintErrors.value[cInfo.id] = 'Only one paint constraint can exist per domain. Edit the existing paint constraint.'\n            } else {\n                constraintErrors.value[cInfo.id] = undefined\n            }\n        }\n\n        function newConstraint() {\n            const newID = constraintInfo.value?.length || 0\n            const constraint = {\n                type: 'plane',\n                domain: anatomies.value[0].replace('anatomy_', ''),\n                id: newID,\n                num_set: 0,\n                visible: true,\n            }\n            if (constraintInfo.value?.length) {\n                constraintInfo.value = [\n                    ...constraintInfo.value,\n                    constraint\n                ]\n            } else {\n                constraintInfo.value = [constraint]\n            }\n            reassignConstraintIDsByIndex()\n            expandedRows.value = [constraint]\n            toggleConstraintShown(constraint)\n            selectedProject.value.constraints = [\n                ...selectedProject.value.constraints,\n                { newAddition: true }\n            ]\n            changesMade.value = true\n        }\n\n        function deleteConstraint(item) {\n            toggleConstraintShown(item)\n            allSubjectsForDataset.value.forEach((subject) => {\n                setConstraintLocation(subject, item, undefined)\n            })\n            constraintInfo.value.splice(item.id, 1)\n            reassignConstraintIDsByIndex()\n            currentConstraintPlacement.value = undefined\n            dialogs.value = []\n            expandedRows.value = []\n            changesMade.value = true\n        }\n\n        function submit() {\n            const locationData = Object.fromEntries(\n                allSubjectsForDataset.value.map((subject) => {\n                    return [subject.id, Object.fromEntries(\n                        Object.entries(groupBy(constraintInfo.value, 'domain'))\n                        .map(([domain, shapeInfos]) => {\n                            let shapeLocations = []\n                            if (allSetConstraints.value[subject.name] && allSetConstraints.value[subject.name][domain]) {\n                                shapeLocations = Object.values(\n                                    allSetConstraints.value[subject.name][domain]\n                                )\n                            }\n                            const shapeRecords = convertConstraintDataForDB(\n                                shapeLocations,\n                                shapeInfos,\n                            )\n                            return [domain, shapeRecords]\n                        })\n                    )]\n                })\n            )\n            const noneSetConstraints = constraintInfo.value.filter((cInfo) => cInfo.num_set === 0)\n            if (noneSetConstraints.length > 0) {\n                const plural = noneSetConstraints.length > 1\n                const constraintLabels = noneSetConstraints.map((cInfo) => cInfo.name || cInfo.id)\n                saveWarning.value = (\n                    `Constraint${plural ? 's': ''}\n                    ${constraintLabels.join(\", \")}\n                    ${plural ? 'do' : 'does' }\n                    not have any placements and will not be saved.`\n                )\n            }\n            saveConstraintData(\n                selectedProject.value.id,\n                locationData\n            ).then((response) => {\n                if (response.id === selectedProject.value.id) {\n                    selectedProject.value = response\n                    changesMade.value = false\n                }\n            })\n        }\n\n        watch(allSetConstraints, () => {\n            changesMade.value = true\n            saveWarning.value = undefined\n        }, {deep: true})\n\n        return {\n            headers,\n            changesMade,\n            dialogs,\n            constraintsLoading,\n            constraintErrors,\n            saveWarning,\n            expandedRows,\n            constraintInfo,\n            constraintsShown,\n            anatomies,\n            allSubjectsForDataset,\n            constraintPaintRadius,\n            constraintPaintExclusion,\n            currentConstraintPlacement,\n            isShapeShown,\n            toggleSubjectShown,\n            getPlacementStatus,\n            validateConstraint,\n            toggleConstraintShown,\n            toggleCurrentPlacement,\n            newConstraint,\n            deleteConstraint,\n            submit,\n        }\n    }\n}\n</script>\n\n<template>\n    <v-expansion-panel>\n                <v-expansion-panel-header>\n                    Constraints\n                    <v-spacer/>\n                </v-expansion-panel-header>\n                <v-expansion-panel-content v-if=\"constraintsLoading\">\n                    <v-progress-linear indeterminate/>\n                </v-expansion-panel-content>\n                <v-expansion-panel-content v-else>\n                    <v-data-table\n                        :headers=\"headers\"\n                        :items=\"constraintInfo\"\n                        :expanded=\"expandedRows\"\n                        class=\"contraints-table\"\n                        item-key=\"id\"\n                        disable-pagination\n                        hide-default-footer\n                        single-select\n                        dense\n                        width=\"100%\"\n                    >\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.id=\"{ index, item }\">\n                            <v-dialog\n                                v-model=\"dialogs[index]\"\n                                value=\"index\"\n                                width=\"400\"\n                            >\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <v-icon class=\"delete-icon\" v-bind=\"attrs\" v-on=\"on\">\n                                        mdi-trash-can\n                                    </v-icon>\n                                </template>\n                                <v-card>\n                                    <v-card-title style=\"word-break: break-word;\">\n                                        Are you sure you want to remove {{ item.name }}\n                                        on all subjects?\n                                    </v-card-title>\n                                    <v-card-actions>\n                                        <v-spacer/>\n                                        <v-btn color=\"red\" @click=\"deleteConstraint(item)\">\n                                            Yes, Delete This Constraint\n                                        </v-btn>\n                                    </v-card-actions>\n                                </v-card>\n                            </v-dialog>\n                        </template>\n                         <!-- eslint-disable-next-line -->\n                         <template v-slot:item.show=\"{ index, item }\">\n                            <v-icon @click=\"toggleConstraintShown(item)\">\n                                {{ constraintsShown.includes(item.id) ? 'mdi-eye-outline' : 'mdi-eye-off-outline' }}\n                            </v-icon>\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.name=\"{ index, item }\">\n                            <v-text-field\n                                v-model=\"item.name\"\n                                style=\"width: 130px\"\n                                @input=\"changesMade = true\"\n                            />\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.type=\"{ index, item }\">\n                            <v-select\n                                v-model=\"item.type\"\n                                :items=\"['plane', 'paint']\"\n                                :disabled=\"item.num_set > 0\"\n                                :error-messages=\"constraintErrors[item.id]\"\n                                @change=\"(v) => validateConstraint(item)\"\n                                style=\"width: 100px\"\n                            />\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.domain=\"{ index, item }\">\n                            <v-select\n                                v-model=\"item.domain\"\n                                :items=\"anatomies.map((a) => a.replace('anatomy_', ''))\"\n                                :disabled=\"item.num_set > 0\"\n                                @change=\"(v) => validateConstraint(item)\"\n                                style=\"width: 80px\"\n                            />\n                        </template>\n                        <!-- eslint-disable-next-line -->\n                        <template v-slot:item.num_set=\"{ item }\">\n                            <div style=\"width: 60px; text-align: right;\">\n                                {{ item.num_set }} / {{ allSubjectsForDataset.length }}\n                                <v-icon v-if=\"expandedRows.includes(item)\" @click=\"expandedRows=[]\">mdi-menu-up</v-icon>\n                                <v-icon v-else @click=\"expandedRows=[item]\">mdi-menu-down</v-icon>\n                            </div>\n                        </template>\n                        <template v-slot:expanded-item=\"{ item }\">\n                            <div style=\"width: calc(100% - 20px)\">\n                                <div\n                                    v-for=\"subject in allSubjectsForDataset\"\n                                    :key=\"subject.id\"\n                                    class=\"d-flex py-1\"\n                                    style=\"align-items: center; justify-content: space-between; width: 100%\"\n                                >\n                                    <span style=\"width: 150px;\">{{ subject.name }}</span>\n                                    <v-btn\n                                        small\n                                        v-if=\"!currentConstraintPlacement\"\n                                        @click=\"toggleSubjectShown(subject.id, item.domain)\"\n                                    >\n                                        {{ isShapeShown(subject.id, item.domain) ? 'Hide' : 'Show' }} subject\n                                    </v-btn>\n                                    <div\n                                        v-else-if=\"getPlacementStatus(subject, item) === 'PLACING' && item.type === 'paint'\"\n                                        style=\"width: 200px; text-align: center;\"\n                                    >\n                                        <v-text-field\n                                            v-model.number=\"constraintPaintRadius\"\n                                            label=\"Brush Size\"\n                                            type=\"number\"\n                                            min=\"1\"\n                                            max=\"15\"\n                                            style=\"max-width: 70px; display: inline-block; margin-right: 10px\"\n                                            @click.stop\n                                        />\n                                        <v-tooltip top>\n                                            <template v-slot:activator=\"{ on, attrs }\">\n                                                <div\n                                                    v-bind=\"attrs\"\n                                                    v-on=\"on\"\n                                                    style=\"max-width: 70px; display: inline-block; margin-right: 10px\"\n                                                >\n                                                    <v-switch v-model=\"constraintPaintExclusion\" label=\"Exclude\" />\n                                                </div>\n                                            </template>\n                                            <span>Enable to paint exclusion area. Disable to erase exclusion area.</span>\n                                        </v-tooltip>\n                                    </div>\n                                    <v-spacer v-else />\n                                    <div style=\"width: 140px; text-align: right;\">\n                                        <span v-if=\"getPlacementStatus(subject, item) === 'INVALID'\">\n                                            INVALID\n                                        </span>\n                                        <span v-else-if=\"isShapeShown(subject.id, item.domain) && !constraintsShown.includes(item.id)\">\n                                            Not visible\n                                        </span>\n                                        <v-btn\n                                            v-else-if=\"isShapeShown(subject.id, item.domain) && getPlacementStatus(subject, item) !== 'plane placed'\"\n                                            @click=\"toggleCurrentPlacement(subject, item)\"\n                                            small\n                                        >\n                                            <span v-if=\"getPlacementStatus(subject, item) === 'NOT SET'\">BEGIN PLACEMENT</span>\n                                            <span v-if=\"getPlacementStatus(subject, item) === 'PLACING'\">DONE</span>\n                                            <span v-if=\"getPlacementStatus(subject, item) === 'paint placed'\">EDIT PAINT</span>\n                                        </v-btn>\n                                        <span v-else> {{ getPlacementStatus(subject, item) }}</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </template>\n                    </v-data-table>\n                    <div class=\"d-flex py-3\" style=\"justify-content: space-between;\">\n                        <v-btn @click=\"newConstraint\">\n                            + New Constraint\n                        </v-btn>\n                        <v-btn v-if=\"changesMade\" color=\"primary\" @click=\"submit\">\n                            Save Constraints\n                        </v-btn>\n                        <span v-else>Constraints Saved.</span>\n                    </div>\n                    <span\n                        v-if=\"!changesMade && saveWarning\"\n                        style=\"color: orange\"\n                    >\n                        {{ saveWarning }}\n                    </span>\n                </v-expansion-panel-content>\n            </v-expansion-panel>\n</template>\n\n<style>\n.file-column {\n    width: 100px!important;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n.contraints-table .v-data-table tr {\n    position: relative;\n    display: block;\n    padding-left: 15px;\n}\n.contraints-table th {\n    padding-left: 5px !important;\n}\n.contraints-table .v-data-table td {\n    border-bottom: none !important;\n    padding: 0px 10px !important;\n}\n.contraints-table .v-data-table__expanded {\n    width: 100%\n}\n.contraints-table .v-row-group__header {\n    background: none !important;\n    border-top: 1px solid white !important;\n}\n.delete-icon {\n    position: absolute !important;\n    left: 5px;\n    bottom: 30%\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Constraints.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Constraints.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Constraints.vue?vue&type=template&id=2d1be46d\"\nimport script from \"./Constraints.vue?vue&type=script&lang=js\"\nexport * from \"./Constraints.vue?vue&type=script&lang=js\"\nimport style0 from \"./Constraints.vue?vue&type=style&index=0&id=2d1be46d&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport { onMounted, ref, watch } from 'vue'\nimport Landmarks from '@/components/Landmarks.vue';\nimport Constraints from '@/components/Constraints.vue';\nimport { layers, layersShown } from '@/store';\n\n\nexport default {\n    components: {\n        Landmarks,\n        Constraints\n    },\n    setup() {\n        const openPanel = ref(0)\n\n        function updateLayersShown() {\n            layersShown.value = layers.value.filter((l) => {\n                if (l.name === 'Landmarks') {\n                    return openPanel.value === 0\n                } else if (l.name === 'Constraints') {\n                    return openPanel.value === 1\n                }\n                return layersShown.value.includes(l.name)\n            }).map((l) => l.name)\n        }\n\n        watch(openPanel, updateLayersShown)\n        onMounted(updateLayersShown)\n\n        return {\n            openPanel,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoTab.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoTab.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./InfoTab.vue?vue&type=template&id=3dd413fa\"\nimport script from \"./InfoTab.vue?vue&type=script&lang=ts\"\nexport * from \"./InfoTab.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"pa-3\"},[_c('task-info',{attrs:{\"taskName\":\"deepssm\",\"formData\":_vm.formData},on:{\"resetForm\":_vm.resetForm}}),_c('div',{staticClass:\"loading-dialog\"},[_c('v-dialog',{attrs:{\"width\":\"10%\"},model:{value:(_vm.deepSSMLoadingData),callback:function ($$v) {_vm.deepSSMLoadingData=$$v},expression:\"deepSSMLoadingData\"}},[_vm._v(\"Fetching results... \"),_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"align-center\":\"\"}})],1)],1),_c('v-expansion-panels',{model:{value:(_vm.openExpansionPanel),callback:function ($$v) {_vm.openExpansionPanel=$$v},expression:\"openExpansionPanel\"}},[(_vm.selectedProject && !_vm.selectedProject.readonly)?_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\"Controls\")]),_c('v-expansion-panel-content',[_c('v-tabs',{model:{value:(_vm.controlsTabs),callback:function ($$v) {_vm.controlsTabs=$$v},expression:\"controlsTabs\"}},[_c('v-tab',[_vm._v(\"Prep\")]),_c('v-tab',[_vm._v(\"Augmentation\")]),_c('v-tab',[_vm._v(\"Training\")])],1),_c('v-tabs-items',{model:{value:(_vm.controlsTabs),callback:function ($$v) {_vm.controlsTabs=$$v},expression:\"controlsTabs\"}},[_c('v-tab-item',[_c('div',[_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Test Split\",\"suffix\":\"%\"},model:{value:(_vm.prepData.testing_split.value),callback:function ($$v) {_vm.$set(_vm.prepData.testing_split, \"value\", _vm._n($$v))},expression:\"prepData.testing_split.value\"}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Validation Split\",\"suffix\":\"%\"},model:{value:(_vm.prepData.validation_split.value),callback:function ($$v) {_vm.$set(_vm.prepData.validation_split, \"value\", _vm._n($$v))},expression:\"prepData.validation_split.value\"}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Percent Variablity Preserved\",\"min\":\"0.0\",\"max\":\"100.0\",\"suffix\":\"%\"},model:{value:(_vm.prepData.percent_variability.value),callback:function ($$v) {_vm.$set(_vm.prepData.percent_variability, \"value\", _vm._n($$v))},expression:\"prepData.percent_variability.value\"}}),_c('div',{staticClass:\"image-spacing\"},[_c('v-label',{staticClass:\"spacing-label\"},[_vm._v(\"Image Spacing\")]),_c('v-text-field',{staticClass:\"spacing-input\",attrs:{\"type\":\"number\",\"label\":\"X\"},model:{value:(_vm.prepData.image_spacing.value.x),callback:function ($$v) {_vm.$set(_vm.prepData.image_spacing.value, \"x\", _vm._n($$v))},expression:\"prepData.image_spacing.value.x\"}}),_c('v-text-field',{staticClass:\"spacing-input\",attrs:{\"type\":\"number\",\"label\":\"Y\"},model:{value:(_vm.prepData.image_spacing.value.y),callback:function ($$v) {_vm.$set(_vm.prepData.image_spacing.value, \"y\", _vm._n($$v))},expression:\"prepData.image_spacing.value.y\"}}),_c('v-text-field',{staticClass:\"spacing-input\",attrs:{\"type\":\"number\",\"label\":\"Z\"},model:{value:(_vm.prepData.image_spacing.value.z),callback:function ($$v) {_vm.$set(_vm.prepData.image_spacing.value, \"z\", _vm._n($$v))},expression:\"prepData.image_spacing.value.z\"}})],1)],1)]),_c('v-tab-item',[_c('div',[_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Number of Samples\",\"min\":\"1\"},model:{value:(_vm.augmentationData.aug_num_samples.value),callback:function ($$v) {_vm.$set(_vm.augmentationData.aug_num_samples, \"value\", _vm._n($$v))},expression:\"augmentationData.aug_num_samples.value\"}}),_c('v-select',{attrs:{\"items\":Object.values(_vm.Sampler),\"label\":\"Sampler Type\"},model:{value:(_vm.augmentationData.aug_sampler_type.value),callback:function ($$v) {_vm.$set(_vm.augmentationData.aug_sampler_type, \"value\", $$v)},expression:\"augmentationData.aug_sampler_type.value\"}})],1)]),_c('v-tab-item',[_c('div',[_c('v-select',{attrs:{\"items\":Object.values(_vm.LossFunction),\"label\":\"Loss Function\"},model:{value:(_vm.trainingData.train_loss_function.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_loss_function, \"value\", $$v)},expression:\"trainingData.train_loss_function.value\"}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Epochs\",\"min\":\"0\"},model:{value:(_vm.trainingData.train_epochs.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_epochs, \"value\", _vm._n($$v))},expression:\"trainingData.train_epochs.value\"}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Learning Rate\",\"min\":\"0\"},model:{value:(_vm.trainingData.train_learning_rate.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_learning_rate, \"value\", _vm._n($$v))},expression:\"trainingData.train_learning_rate.value\"}}),_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":\"Batch Size\",\"min\":\"1\"},model:{value:(_vm.trainingData.train_batch_size.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_batch_size, \"value\", _vm._n($$v))},expression:\"trainingData.train_batch_size.value\"}}),_c('v-checkbox',{attrs:{\"label\":\"Decay Learning Rate\"},model:{value:(_vm.trainingData.train_decay_learning_rate.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_decay_learning_rate, \"value\", $$v)},expression:\"trainingData.train_decay_learning_rate.value\"}}),_c('v-checkbox',{attrs:{\"label\":\"Fine Tuning\"},model:{value:(_vm.trainingData.train_fine_tuning.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_fine_tuning, \"value\", $$v)},expression:\"trainingData.train_fine_tuning.value\"}}),_c('v-text-field',{attrs:{\"disabled\":!_vm.trainingData.train_fine_tuning,\"type\":\"number\",\"label\":\"Fine Tuning Epochs\",\"min\":\"1\"},model:{value:(_vm.trainingData.train_fine_tuning_epochs.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_fine_tuning_epochs, \"value\", _vm._n($$v))},expression:\"trainingData.train_fine_tuning_epochs.value\"}}),_c('v-text-field',{attrs:{\"disabled\":!_vm.trainingData.train_fine_tuning,\"type\":\"number\",\"label\":\"Fine Tuning Learning Rate\",\"min\":\"0\"},model:{value:(_vm.trainingData.train_fine_tuning_learning_rate.value),callback:function ($$v) {_vm.$set(_vm.trainingData.train_fine_tuning_learning_rate, \"value\", _vm._n($$v))},expression:\"trainingData.train_fine_tuning_learning_rate.value\"}})],1)])],1)],1)],1):_vm._e(),(_vm.deepSSMResult && _vm.deepSSMResult.result)?_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\"Data\")]),_c('v-expansion-panel-content',[_c('v-tabs',{model:{value:(_vm.deepSSMDataTab),callback:function ($$v) {_vm.deepSSMDataTab=$$v},expression:\"deepSSMDataTab\"}},[_c('v-tab',[_vm._v(\"Augmentation\")]),_c('v-tab',[_vm._v(\"Training\")]),_c('v-tab',[_vm._v(\"Testing\")])],1),_c('v-tabs-items',{model:{value:(_vm.deepSSMDataTab),callback:function ($$v) {_vm.deepSSMDataTab=$$v},expression:\"deepSSMDataTab\"}},[_c('v-tab-item',[_c('div',[_c('div',{staticClass:\"aug-data-checkboxes\"},[_c('v-radio-group',{model:{value:(_vm.deepSSMAugDataShown),callback:function ($$v) {_vm.deepSSMAugDataShown=$$v},expression:\"deepSSMAugDataShown\"}},[_c('v-radio',{attrs:{\"value\":\"Original\",\"label\":\"Original Data\"}}),_c('v-radio',{attrs:{\"value\":\"Generated\",\"label\":\"Generated Data\"}})],1)],1),_c('v-data-table',{attrs:{\"items\":_vm.dataTables.aug_table.value,\"headers\":_vm.dataTables.aug_headers.value}}),_c('h4',[_vm._v(\"Violin Plot\")]),_c('v-img',{attrs:{\"src\":_vm.deepSSMResult.result?.aug_visualization,\"alt\":\"Augmented Data Violin Plot\"}})],1)]),_c('v-tab-item',[_c('div',[_c('v-data-table',{attrs:{\"items\":_vm.dataTables.training_table.value,\"headers\":_vm.dataTables.training_headers.value}}),_vm._v(\" Training Plot \"),_c('v-img',{attrs:{\"src\":_vm.deepSSMResult.result?.training_visualization,\"alt\":\"Training Plot\"}}),(_vm.deepSSMResult.result?.training_visualization_ft)?_c('div',[_vm._v(\" Fine Tuning Plot \"),_c('v-img',{attrs:{\"src\":_vm.deepSSMResult.result?.training_visualization_ft,\"alt\":\"Fine Tuning Plot\"}})],1):_vm._e()],1)]),_c('v-tab-item',[_c('div',[_c('v-data-table',{attrs:{\"items\":_vm.dataTables.testing_table.value,\"headers\":_vm.dataTables.testing_headers.value}})],1)])],1)],1)],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n/* eslint-disable no-unused-vars */\nimport {\n    selectedProject,\n    abort,\n    deepSSMDataTab,\n    deepSSMResult,\n    deepSSMAugDataShown,\n    groomFormData,\n    optimizationFormData,\n    loadDeepSSMDataForProject,\n    deepSSMLoadingData,\n    deepSSMErrorGlobalRange,\n} from '@/store';\nimport { Ref, onMounted, ref, watch } from 'vue';\nimport { parseCSVFromURL } from '@/helper';\nimport TaskInfo from './TaskInfo.vue';\n\n\nexport default {\n  components: { TaskInfo },\n    setup() {\n        enum Sampler {\n            Gaussian = \"Gaussian\",\n            Mixture = \"mixture\",\n            KDE = \"KDE\",\n        }\n\n        enum LossFunction {\n            MSE = \"MSE\",\n            Focal = \"Focal\",\n        }\n\n        const openExpansionPanel = ref<number>(0);\n        const controlsTabs = ref();\n        const showAbortConfirmation = ref(false);\n        const formData = ref();\n        const formDefaults = ref({});\n\n        const prepData = {\n            testing_split: ref<number>(20),\n            validation_split: ref<number>(20),\n            percent_variability: ref<number>(95),\n            image_spacing: ref<{x: number, y: number, z: number}>({x: 1, y: 1, z: 1})\n        }\n\n        // Augmentation\n        const augmentationData = {\n            aug_num_samples: ref<number>(300),\n            aug_sampler_type : ref<Sampler>(Sampler.Gaussian),\n        }\n\n        // Training\n        const trainingData = {\n            train_loss_function: ref<LossFunction>(LossFunction.MSE),\n            train_epochs: ref<number>(100),\n            train_learning_rate: ref<number>(0.001),\n            train_batch_size: ref<number>(8),\n            train_decay_learning_rate: ref<boolean>(true),\n            train_fine_tuning: ref<boolean>(true),\n            train_fine_tuning_epochs: ref<number>(100),\n            train_fine_tuning_learning_rate: ref<number>(0.001),\n        }\n\n        // headers are assigned from the parseCSV function's output\n        const dataTables = {\n            aug_table: ref<any>(undefined),\n            aug_headers: ref<any>(undefined),\n            training_table: ref<any>(undefined),\n            training_headers: ref<any>([\n                {text: \"Training Stage\", value: '0'},\n                {text: \"Epoch\", value: '1'},\n                {text: \"LR\", value: '2'},\n                {text: \"Train_Err\", value: '3'},\n                {text: \"Train_Rel_Err\", value: '4'},\n                {text: \"Val_Err\", value: '5'},\n                {text: \"Val_Rel_Err\", value: '6'},\n                {text: \"Sec\", value: '7'},\n            ]),\n            testing_table: ref<any>(undefined),\n            testing_headers: ref<any>([{text: \"Name\", value: '0'}, {text: \"Distance\", value: '1'}]),\n        }\n\n        /**\n         * Converts an object of reactive properties to a plain object for use in api formData fields.\n         */\n        function getFormSection(object: {[key: string]: Ref<any>}) {\n            return (\n                Object.entries(object)\n                    .map(([key, value]) => [key, value.value])\n                    .reduce((obj, [key, value]) => {\n                        obj[key] = value;\n                        return obj;\n                    }, {} as any)\n            )\n        }\n\n        function getFormData() {\n            const prepFormData = getFormSection(prepData);\n            const augFormData = getFormSection(augmentationData);\n            const trainFormData = getFormSection(trainingData);\n\n            return {\n                ...prepFormData,\n                ...augFormData,\n                ...trainFormData,\n                ...groomFormData.value,\n                ...optimizationFormData.value,\n            }\n        }\n\n        function resetForm() {\n            formData.value = formDefaults.value\n            Object.entries(formData.value).forEach(([key, value]) => {\n                if (prepData[key]) prepData[key].value = value\n                if (augmentationData[key]) augmentationData[key].value = value\n                if (trainingData[key]) trainingData[key].value = value\n            })\n        }\n\n        function overwriteFormDefaultsFromProjectFile() {\n            const file_contents = selectedProject.value?.file_contents\n            if (file_contents) {\n                const section = file_contents['deepssm']\n                formDefaults.value = Object.fromEntries(\n                    Object.entries(formDefaults.value).map(([key, value]) => {\n                        if (section[key]) value = section[key]\n                        if (value === \"True\") value = true\n                        else if (value === \"False\") value = false\n                        else if (typeof value === 'string' && !isNaN(parseFloat(value))) value = parseFloat(value)\n                        return [key, value]\n                    })\n                )\n            }\n        }\n\n        async function getCSVDataFromURL(url: string) {\n            return await parseCSVFromURL(url);\n        }\n\n        onMounted(async () => {\n            formDefaults.value = getFormData()\n            overwriteFormDefaultsFromProjectFile()\n            resetForm()\n            if (!deepSSMResult.value && selectedProject.value) {\n                deepSSMLoadingData.value = true;\n                await loadDeepSSMDataForProject();\n                deepSSMLoadingData.value = false;\n            }\n            if (deepSSMResult.value && deepSSMResult.value.result) {\n                try {\n                    Promise.all([\n                        await getCSVDataFromURL(deepSSMResult.value.result.aug_total_data),\n                        await getCSVDataFromURL(deepSSMResult.value.result.training_data_table),\n                        await getCSVDataFromURL(deepSSMResult.value.result.testing_distances),\n                    ]).then((res) => {\n                        // get only the filename rather than the full path\n                        const aug_values = res[0].map((row: any) => {\n                            const newRow = {};\n                            Object.keys(row).forEach((key: string) => {\n                                const value = row[key];\n                                if (typeof value === 'string') {\n                                    newRow[key] = value.split('/').pop();\n                                } else {\n                                    newRow[key] = value;\n                                }\n                            });\n                            return newRow;\n                        });\n\n                        dataTables.aug_table.value = aug_values;\n                        dataTables.training_table.value = res[1];\n                        dataTables.testing_table.value = res[2];\n\n                        // Augmentation data table doesn't have headers, only a numbered list\n                        dataTables.aug_headers.value = Object.keys(dataTables.aug_table.value[0]).map((_: string, index: number) => {\n                            return {text: `${index+1}`, value: `${index}`}\n                        });\n                    });\n                }\n                catch (e) {\n                    console.error(e);\n                }\n            }\n        });\n\n        watch(openExpansionPanel, () => {\n            if (openExpansionPanel.value === 1 && deepSSMDataTab.value === -1) {\n                deepSSMDataTab.value = 0;\n            }\n        });\n\n        watch(deepSSMDataTab, () => {\n            deepSSMErrorGlobalRange.value = [0, 1];\n        });\n\n        watch([\n            augmentationData.aug_num_samples,\n            augmentationData.aug_sampler_type,\n            trainingData.train_loss_function,\n            trainingData.train_epochs,\n            trainingData.train_learning_rate,\n            trainingData.train_batch_size,\n            trainingData.train_decay_learning_rate,\n            trainingData.train_fine_tuning,\n            trainingData.train_fine_tuning_epochs,\n            trainingData.train_fine_tuning_learning_rate,\n         ], () => {\n            formData.value = getFormData();\n        })\n\n        return {\n            selectedProject,\n            openExpansionPanel,\n            controlsTabs,\n            prepData,\n            formData,\n            resetForm,\n            augmentationData,\n            trainingData,\n            Sampler,\n            LossFunction,\n            abort,\n            showAbortConfirmation,\n            deepSSMDataTab,\n            deepSSMResult,\n            deepSSMAugDataShown,\n            deepSSMLoadingData,\n            dataTables,\n        }\n    },\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeepSSMTab.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeepSSMTab.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./DeepSSMTab.vue?vue&type=template&id=44107574\"\nimport script from \"./DeepSSMTab.vue?vue&type=script&lang=ts\"\nexport * from \"./DeepSSMTab.vue?vue&type=script&lang=ts\"\nimport style0 from \"./DeepSSMTab.vue?vue&type=style&index=0&id=44107574&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport {\n    onMounted, ref,\n    watch, computed, nextTick,\n    onBeforeUnmount,\n} from 'vue';\nimport _ from 'lodash';\nimport imageReader from '../reader/image';\nimport pointsReader from '../reader/points';\nimport { groupBy, shortFileName } from '../helper';\nimport { AugmentationPair, DataObject, DeepSSMImage, ShapeData, TestingData, TrainingPair } from '@/types';\nimport ShapeViewer from '../components/ShapeViewer/viewer.vue';\nimport DataList from '../components/DataList.vue'\nimport RenderControls from '../components/RenderControls.vue'\nimport vtkImageData from 'vtk.js/Sources/Common/DataModel/ImageData';\nimport vtkPolyData from 'vtk.js/Sources/Common/DataModel/PolyData';\nimport {\n    renderLoading,\n    selectedDataset,\n    allSubjectsForDataset,\n    selectedDataObjects,\n    loadDataset,\n    particleSize,\n    particlesForOriginalDataObjects,\n    layersShown,\n    groomedShapesForOriginalDataObjects,\n    selectedProject,\n    loadProjectForDataset,\n    reconstructionsForOriginalDataObjects,\n    analysisFilesShown,\n    meanAnalysisParticlesFiles,\n    currentAnalysisParticlesFiles,\n    switchTab,\n    jobAlreadyDone,\n    analysisExpandedTab,\n    allProjectsForDataset,\n    loadProjectsForDataset,\n    getLandmarks,\n    allSetLandmarks,\n    getConstraints,\n    allSetConstraints,\n    landmarksLoading,\n    constraintsLoading,\n    imageViewMode,\n    deepSSMDataTab,\n    deepSSMResult,\n    deepSSMAugDataShown,\n    allDataObjectsInDataset,\n    uniformScale,\n    deepSSMSamplePage,\n    DEEPSSM_SAMPLES_PER_PAGE,\n} from '@/store';\nimport router from '@/router';\nimport TabForm from '@/components/TabForm.vue';\nimport AnalysisTab from '@/components/Analysis/AnalysisTab.vue';\nimport InfoTab from '@/components/InfoTab.vue';\nimport DeepSSMTab from '@/components/DeepSSMTab.vue';\nimport { loadingState } from '../store/index';\n\n\nexport default {\n    components: {\n        ShapeViewer,\n        DataList,\n        InfoTab,\n        RenderControls,\n        TabForm,\n        AnalysisTab,\n        DeepSSMTab,\n    },\n    props: {\n        dataset: {\n            type: Number,\n            required: true,\n        },\n        project: {\n            type: Number,\n            required: true,\n        }\n    },\n    setup(props) {\n        const drawerWidth = ref<number>(600);\n        const drawer = ref();\n        const renderAreaStyle = computed(() => {\n            let width = `calc(100% - ${drawerWidth.value}px)`\n            return {\n                width,\n                position: 'absolute',\n                left: `${drawerWidth.value}px`,\n                top: imageViewMode.value ? '140px' : '70px',\n                height: imageViewMode.value ? 'calc(100% - 140px)' : 'calc(100% - 70px)'\n            }\n        })\n\n        const tab = ref();\n        const rows = ref<number>(1);\n        const cols = ref<number>(1);\n        const renderData = ref<Record<string, ShapeData[]>>({});\n        const renderMetaData = ref<Record<string, ShapeData[]>>({});\n\n        onMounted(async () => {\n            try {\n                await loadDataset(props.dataset);\n                await loadProjectForDataset(props.project);\n            } catch(e) {\n                console.log(e);\n                toSelectPage();\n            }\n            nextTick(() => {\n                window.addEventListener('resize', onResize);\n            })\n        })\n\n        onBeforeUnmount(() => {\n            window.removeEventListener('resize', onResize);\n        })\n\n        function onResize() {\n            refreshRender()\n        }\n\n        async function toSelectPage() {\n            selectedProject.value = undefined;\n            analysisFilesShown.value = undefined;\n            if (allProjectsForDataset.value.length === 0 && selectedDataset.value) {\n                loadProjectsForDataset(selectedDataset.value.id);\n            }\n            router.push('/dataset/'+selectedDataset.value?.id);\n        }\n\n        function prepareDrawer() {\n            if (drawer.value && drawer.value.$el) {\n                let i = drawer.value.$el.querySelector(\n                    \".v-navigation-drawer__border\"\n                );\n                i.style.width = \"10px\";\n                i.style.cursor = \"ew-resize\";\n                i.addEventListener(\n                    \"mousedown\",\n                    function(e: MouseEvent) {\n                        e.preventDefault()\n                        if (e.offsetX < 300) {\n                            drawer.value.$el.style.transition ='initial';\n                            document.addEventListener(\"mousemove\", setDrawerWidth, false);\n                        }\n                    },\n                    false\n                );\n                document.addEventListener(\n                    \"mouseup\",\n                    function() {\n                        if (drawer.value) {\n                            drawer.value.$el.style.transition = '';\n                        }\n                        document.body.style.cursor = \"\";\n                        document.removeEventListener(\"mousemove\", setDrawerWidth, false);\n                    },\n                    false\n                );\n            }\n        }\n\n        function setDrawerWidth(e: MouseEvent) {\n            document.body.style.cursor = \"ew-resize\";\n            drawer.value.$el.style.width =  e.clientX + \"px\";\n            drawerWidth.value = e.clientX\n        }\n\n        async function refreshRender() {\n            // Get landmarks and constraints the first time each layer is enabled,\n            // regardless of whether there are objects to render\n            let landmarksPromise;\n            if(\n                layersShown.value.includes(\"Landmarks\") &&\n                !allSetLandmarks.value\n            ) {\n                landmarksPromise = getLandmarks().then(() => {\n                    landmarksLoading.value = false\n                })\n            }\n\n            let constraintsPromise;\n            if(\n                layersShown.value.includes(\"Constraints\") &&\n                !allSetConstraints.value\n            ) {\n                constraintsPromise = getConstraints().then(() => {\n                    constraintsLoading.value = false\n                })\n            }\n\n            if (selectedDataObjects.value.length == 0) {\n                return Promise.all([\n                    landmarksPromise,\n                    constraintsPromise,\n                ])\n            }\n            renderLoading.value = true\n            imageViewMode.value = false\n            let newRenderData = {}\n            let newRenderMetaData = {}\n            const groupedSelections: Record<string, DataObject[]> = groupBy(selectedDataObjects.value, 'subject')\n            if (\n                analysisFilesShown.value?.length &&\n                currentAnalysisParticlesFiles.value?.length &&\n                meanAnalysisParticlesFiles.value?.length\n            ) {\n                // populate newRenderData and renderMetaData\n                await Promise.all(\n                    analysisFilesShown.value.map(async (f, i) => {\n                        if(meanAnalysisParticlesFiles.value && currentAnalysisParticlesFiles.value){\n                            const key = analysisExpandedTab.value === 0 ? \"PCA\": \"GROUP\"\n                            if (!newRenderData[key]) {\n                                newRenderData[key] = []\n                            }\n                            newRenderData[key].push({\n                                shape: [  // only one layer, no overlapping shapes\n                                    await imageReader(f, shortFileName(f))\n                                ],\n                                points: await pointsReader(currentAnalysisParticlesFiles.value[i])\n                            })\n\n                            if (!newRenderMetaData[key]) {\n                                newRenderMetaData[key] = []\n                            }\n                            const meanParticles = await pointsReader(\n                                meanAnalysisParticlesFiles.value[i]\n                            )\n                            const currParticles = await pointsReader(\n                                currentAnalysisParticlesFiles.value[i]\n                            )\n                            newRenderMetaData[key].push({\n                                \"mean\": {\n                                    shape: await imageReader(undefined),\n                                    points: meanParticles,\n                                },\n                                \"current\": {\n                                    shape: await imageReader(undefined),\n                                    points: currParticles,\n                                }\n                            })\n                        }\n                    })\n                )\n            }\n            else if (tab.value === \"deepssm\" && deepSSMResult.value) {\n                // defaults to subjects selected\n                let labelledGroups: Record<string, any> = groupedSelections;\n                const trainingImages: DeepSSMImage[] = deepSSMResult.value.images\n                const augImages: AugmentationPair[] = deepSSMResult.value.aug_pairs\n\n                switch(deepSSMDataTab.value) {\n                    case 0:  // augmentation\n                        // populate labelledGroups from aug_pairs\n                        // if generated data is shown. Else pass groupedSelections\n                        if (deepSSMAugDataShown.value === 'Generated') {\n                            const paginatedAugPairs = augImages.slice(DEEPSSM_SAMPLES_PER_PAGE * (deepSSMSamplePage.value - 1), DEEPSSM_SAMPLES_PER_PAGE * deepSSMSamplePage.value)\n                            labelledGroups = groupBy(paginatedAugPairs, 'sample_num')\n                        }\n                        else {\n                            labelledGroups = groupedSelections;\n                        }\n                        break;\n                    case 1:  // training\n                        // populate from training_pairs\n                        labelledGroups = deepSSMResult.value.training_pairs.reduce((acc, obj) => {\n                            const key = `${obj.example_type}_${(obj.validation)}`;\n                            if (!acc[key]) {\n                                acc[key] = [];\n                            }\n                            acc[key].push(obj);\n                            return acc;\n                        }, {});\n\n                        // sort labelledGroups where it should go: best true, median true, worst true, best false, median false, worst false\n                        // eslint-disable-next-line\n                        const order = ['best', 'median', 'worst'];\n                        labelledGroups = Object.fromEntries(\n                            Object.entries(labelledGroups).sort(\n                                // eslint-disable-next-line\n                                ([aKey, aVal], [bKey, bVal]) => {\n                                    const a = aKey.split('_');\n                                    const b = bKey.split('_');\n                                    if (a[1] === 'true' && b[1] === 'true') {\n                                        return order.indexOf(a[0]) - order.indexOf(b[0]);\n                                    } else if (a[1] === 'true') {\n                                        return -1;\n                                    } else if (b[1] === 'true') {\n                                        return 1;\n                                    } else {\n                                        return order.indexOf(a[0]) - order.indexOf(b[0]);\n                                    }\n                                }\n                            )\n                        )\n                        break;\n                    case 2:  // testing\n                        labelledGroups = groupBy(deepSSMResult.value.test_pairs, 'image_id')\n                        // filter labelled groups to use only items which have \"image_type\" == world\n                        labelledGroups = Object.fromEntries(\n                            Object.entries(labelledGroups).map(([subjectId, dataObjects]) => {\n                                const filteredDataObjects = dataObjects.filter((obj) => obj.image_type === 'world');\n                                return [subjectId, filteredDataObjects];\n                            })\n                        );\n\n                        break;\n                    default:\n                        break;\n                }\n\n                newRenderData = Object.fromEntries(\n                    await Promise.all(Object.entries(labelledGroups).map(\n                        async ([subjectId, dataObjects]) => {\n                            let label = subjectId;\n                            // prepend \"Generated_Sample_\" to label is dataObjects is AugmentationPair\n                            if ((dataObjects[0] as TrainingPair).example_type) {\n                                label = `${dataObjects[0].example_type} ${dataObjects[0].validation ? 'validation' : 'training'}`;\n                            }\n                            if((dataObjects[0] as AugmentationPair).sample_num) {\n                                label = \"Generated_Sample_\" + subjectId;\n                            }\n                            if(allSubjectsForDataset.value){\n                                const subject = allSubjectsForDataset.value.find(\n                                    (subject) => subject.id.toString() === subjectId\n                                )\n                                if (subject) label = subject.name\n                            }\n                            const shapeDatas = (await Promise.all(dataObjects.map(\n                                (dataObject: DataObject | DeepSSMImage | AugmentationPair | TrainingPair | TestingData) => {\n                                    const shapePromises: Promise<any>[] = [];\n                                    let shapeURL;\n                                    let imageURL;\n                                    let particleURL;\n                                    // Augmentation\n                                    if ('sample_num' in dataObject) {\n                                        const d = dataObject as AugmentationPair\n                                        shapeURL = d.mesh\n                                        imageURL = d.image\n                                        particleURL = d.particles\n                                        shapePromises.push(\n                                            imageReader(imageURL, `${label}.nrrd`)\n                                        )\n                                        shapePromises.push(\n                                            imageReader(shapeURL, `${label}.vtk`)\n                                        )\n                                    }\n                                    // Training\n                                    else if ('example_type' in dataObject) {\n                                        const d = dataObject as TrainingPair\n                                        shapeURL = d.mesh\n                                        particleURL = d.particles\n\n                                        if (d.index.startsWith('Generated_sample_')) {\n                                            const sample_num = parseInt(d.index.split('_')[2])\n                                            imageURL = augImages.find((i) => i.sample_num === sample_num)?.image\n                                        } else {\n                                            imageURL = trainingImages.find((i) => i.index === d.index)?.image\n                                        }\n\n                                        shapePromises.push(\n                                            imageReader(imageURL, `${label}.nrrd`)\n                                        )\n                                        shapePromises.push(\n                                            imageReader(shapeURL, `${label}.vtk`, 'DeepSSM')\n                                        )\n                                    }\n                                    // Testing\n                                    else if ('image_id' in dataObject) {\n                                        const d = dataObject as TestingData\n                                        shapeURL = d.mesh\n                                        particleURL = d.particles\n                                        const image_id = d.image_id\n\n                                        // get subject name from allSubjectsForDataset\n                                        const subjectID = allSubjectsForDataset.value.find(\n                                            (subject) => subject.name.toString() === image_id\n                                        )?.id\n\n                                        // get dataObject for subjectID\n                                        const fetchedDataObject = allDataObjectsInDataset.value.find(\n                                            (dataObject) => dataObject.subject === subjectID\n                                        )\n\n                                        const imageURL = fetchedDataObject?.file\n\n                                        shapePromises.push(\n                                            imageReader(imageURL, `${label}.nrrd`)\n                                        )\n                                        shapePromises.push(\n                                            imageReader(shapeURL, `${label}.vtk`, 'DeepSSM')\n                                        )\n                                    }\n                                    else {\n                                        shapeURL = (dataObject as DataObject).file\n                                        if (\"anatomy_type\" in dataObject) {\n                                            shapePromises.push(\n                                                imageReader(shapeURL, `${label}.vtk`, 'Original')\n                                            )\n                                        } else {\n                                            shapePromises.push(\n                                                imageReader(shapeURL, `${label}.nrrd`, 'Original')\n                                            )\n                                        }\n                                    }\n\n                                    return Promise.all([\n                                        Promise.all(shapePromises),\n                                        pointsReader(particleURL),\n                                    ])\n                                }\n                            )))\n                            .map((e: any) => ({\n                                shape: e[0],\n                                points: e[1],\n                            }))\n                            return [\n                                label, shapeDatas\n                            ]\n                        }\n                    )\n                ))\n            } else {\n                newRenderData = Object.fromEntries(\n                    await Promise.all(Object.entries(groupedSelections).map(\n                        async ([subjectId, dataObjects]) => {\n                            let subjectName = subjectId;\n                            if(allSubjectsForDataset.value){\n                                const subject = allSubjectsForDataset.value.find(\n                                    (subject) => subject.id.toString() === subjectId\n                                )\n                                if (subject) subjectName = subject.name\n                            }\n                            const shapeDatas = (await Promise.all(dataObjects.map(\n                                (dataObject) => {\n                                    const shapePromises: Promise<vtkPolyData | vtkImageData>[] = [];\n                                    if(layersShown.value.includes(\"Original\")){\n                                        const layerLabel = dataObject.anatomy_type ? 'Original' : 'Original - Image'\n                                        shapePromises.push(\n                                            imageReader(\n                                                dataObject.file,\n                                                shortFileName(dataObject.file),\n                                                layerLabel,\n                                                dataObject.anatomy_type && { domain: dataObject.anatomy_type.replace('anatomy_', '') }\n                                            )\n                                        )\n                                    }\n                                    if(layersShown.value.includes(\"Groomed\")){\n                                        if (\n                                            groomedShapesForOriginalDataObjects.value[dataObject.type] &&\n                                            groomedShapesForOriginalDataObjects.value[dataObject.type][dataObject.id]\n                                        ) {\n                                            const shapeURL = groomedShapesForOriginalDataObjects.value[\n                                                dataObject.type\n                                            ][dataObject.id]?.file\n                                            if(shapeURL) {\n                                                shapePromises.push(\n                                                    imageReader(\n                                                        shapeURL,\n                                                        shortFileName(shapeURL),\n                                                        \"Groomed\",\n                                                        { domain: dataObject.anatomy_type.replace('anatomy_', '') }\n                                                    )\n                                                )\n                                            }\n                                        }\n                                    }\n                                    if(layersShown.value.includes(\"Reconstructed\")){\n                                        const targetReconstruction = reconstructionsForOriginalDataObjects.value.find(\n                                            (reconstructed) => {\n                                                const particles = reconstructed.particles\n                                                let originalId;\n                                                if(dataObject.type === 'mesh'){\n                                                    originalId = particles.groomed_mesh.mesh\n                                                } else if (dataObject.type === 'segmentation'){\n                                                    originalId = particles.groomed_segmentation.segmentation\n                                                }\n                                                return originalId === dataObject.id\n                                            }\n                                        )\n                                        if (targetReconstruction) {\n                                            const shapeURL = targetReconstruction.file\n                                            shapePromises.push(\n                                                imageReader(\n                                                    shapeURL,\n                                                    shortFileName(shapeURL),\n                                                    \"Reconstructed\",\n                                                    { domain: targetReconstruction.anatomy_type.replace('anatomy_', '') }\n                                                )\n                                            )\n                                        }\n                                    }\n\n                                    let particleURL;\n                                    if(layersShown.value.includes(\"Particles\")){\n                                        particleURL = particlesForOriginalDataObjects.value[dataObject.type][dataObject.id]?.local\n                                    }\n\n                                    return Promise.all([\n                                        Promise.all(shapePromises),\n                                        pointsReader(particleURL),\n                                        landmarksPromise,\n                                        constraintsPromise,\n                                    ])\n                                }\n                            )))\n                            .map(([imageData, particleData, landmarkData, constraintData]) => ({\n                                shape: imageData,\n                                points: particleData,\n                                landmarks: landmarkData,\n                                constraints: constraintData\n                            }))\n                            return [\n                                subjectName, shapeDatas\n                            ]\n                        }\n                    )\n                ))\n            }\n\n            const n = Object.keys(newRenderData).length;\n            const sqrt = Math.ceil(Math.sqrt(n));\n            const numGroups = Math.min(sqrt, 5)\n            const renderAreaWidth = window.innerWidth - drawerWidth.value\n            const renderAreaHeight = window.innerHeight - 120\n            const renderAreaRatio = renderAreaWidth / renderAreaHeight\n            if (renderAreaRatio > 1) {\n                rows.value = Math.ceil(n / numGroups);\n                cols.value = numGroups;\n            } else {\n                cols.value = Math.ceil(n / numGroups);\n                rows.value = numGroups;\n            }\n            renderData.value = newRenderData\n            renderMetaData.value = newRenderMetaData\n        }\n\n        const debouncedRefreshRender = _.debounce(refreshRender, 300)\n\n        watch(drawer, prepareDrawer)\n        watch(selectedDataObjects, debouncedRefreshRender)\n        watch(layersShown, debouncedRefreshRender)\n        watch(analysisFilesShown, debouncedRefreshRender, {deep: true})\n        watch(meanAnalysisParticlesFiles, debouncedRefreshRender, {deep: true})\n        watch(deepSSMDataTab, debouncedRefreshRender)\n        watch(deepSSMAugDataShown, debouncedRefreshRender)\n        watch(uniformScale, debouncedRefreshRender)\n        watch(deepSSMSamplePage, debouncedRefreshRender)\n        watch(tab, switchTab)\n\n        return {\n            loadingState,\n            renderLoading,\n            drawer,\n            drawerWidth,\n            setDrawerWidth,\n            renderAreaStyle,\n            tab,\n            rows,\n            cols,\n            renderData,\n            renderMetaData,\n            selectedDataset,\n            selectedProject,\n            selectedDataObjects,\n            toSelectPage,\n            refreshRender,\n            jobAlreadyDone,\n            particleSize,\n            analysisFilesShown,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=598efbd3\"\nimport script from \"./Main.vue?vue&type=script&lang=ts\"\nexport * from \"./Main.vue?vue&type=script&lang=ts\"\nimport style0 from \"./Main.vue?vue&type=style&index=0&id=598efbd3&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.selectedDataset)?_c('div',{staticClass:\"flex-container pa-5\"},[_c('div',{staticStyle:{\"width\":\"100%\"}},[_c('v-icon',{on:{\"click\":_vm.back}},[_vm._v(\" mdi-arrow-left \")]),_vm._v(\" \"+_vm._s(_vm.selectedDataset.name)+\" \")],1),((_vm.allProjectsForDataset === undefined || _vm.allProjectsForDataset.length === 0) && !_vm.loadingState)?_c('v-card',{attrs:{\"width\":\"100%\"}},[_c('v-card-title',[_vm._v(\"No projects.\")])],1):_vm._e(),_vm._l((_vm.sortedProjects),function(project){return _c('div',{key:'project_'+project.id,on:{\"click\":() => _vm.selectOrDeselectProject(project)}},[(_vm.editingProject === project)?_c('project-form',{attrs:{\"editMode\":\"\"},on:{\"cancel\":() => _vm.editingProject = undefined}}):_c('v-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.selectedProject || _vm.selectedProject == project),expression:\"!selectedProject || selectedProject == project\"}],class:project.thumbnail? 'selectable-card with-thumbnail': 'selectable-card',attrs:{\"width\":_vm.selectedProject == project ? '100%' :''}},[_c('div',{staticClass:\"text-overline mb-4\"},[_vm._v(\" PROJECT (\"+_vm._s(project.created ? project.created.split('T')[0] : 'No creation time')+\") FOR DATASET \"+_vm._s(_vm.selectedDataset.id)+\" \"),(project.readonly)?_c('span',{staticClass:\"blue--text\"},[_vm._v(\" (READ ONLY) \")]):_vm._e(),(project.private)?_c('span',{staticClass:\"red--text\"},[_vm._v(\" (PRIVATE) \")]):_vm._e()]),_c('div',{staticClass:\"card-contents\"},[_c('div',[_c('v-list-item-title',{staticClass:\"text-h5 mb-1\"},[_vm._v(\" \"+_vm._s(project.name)+\" \")]),_c('v-list-item-subtitle',[_vm._v(\" \"+_vm._s(project.description)+\" \")]),(project.keywords)?_c('v-list-item-subtitle',_vm._l((project.keywords.split(',')),function(keyword){return _c('v-chip',{key:keyword,attrs:{\"small\":\"\"}},[_c('i',[_vm._v(_vm._s(keyword))])])}),1):_vm._e()],1),(project.thumbnail)?_c('div',[_c('v-img',{attrs:{\"src\":project.thumbnail,\"width\":\"100\"}})],1):_vm._e()]),_c('v-card-actions',{staticClass:\"action-buttons\"},[_c('v-btn',{staticStyle:{\"width\":\"40%\",\"margin-left\":\"8px\"},attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return (() => _vm.cloneProj(project)).apply(null, arguments)}}},[_vm._v(\" Clone \")]),_c('v-btn',{staticStyle:{\"width\":\"40%\"},attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.editingProject = project}}},[_vm._v(\" Edit \")]),_c('v-btn',{staticStyle:{\"width\":\"40%\"},attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\",\"color\":\"blue\"},on:{\"click\":function($event){$event.stopPropagation();return (() => _vm.selectOrDeselectProject(project)).apply(null, arguments)}}},[_vm._v(\" Select \")]),_c('v-btn',{staticStyle:{\"width\":\"40%\"},attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\",\"color\":\"red\"},on:{\"click\":function($event){$event.stopPropagation();_vm.deleting = project}}},[_vm._v(\" Delete \")])],1)],1)],1)}),_c('project-form'),_c('v-dialog',{attrs:{\"value\":_vm.deleting,\"width\":\"500\"}},[(_vm.deleting)?_c('v-card',[_c('v-card-title',{staticClass:\"text-h5\"},[_vm._v(\" Confirmation \")]),_c('v-card-text',[_vm._v(\" Are you sure you want to delete project \\\"\"+_vm._s(_vm.deleting.name)+\"\\\"? \")]),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.deleting = undefined}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"red\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.deleteProj.apply(null, arguments)}}},[_vm._v(\" Delete \")])],1)],1):_vm._e()],1)],2):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(!_vm.creating && !_vm.editMode)?_c('v-btn',{staticClass:\"new-button\",on:{\"click\":function($event){$event.stopPropagation();_vm.creating = true}}},[_vm._v(\" + New Project \")]):_c('v-card',{staticClass:\"selectable-card\",attrs:{\"ripple\":false},on:{\"click\":function($event){$event.stopPropagation();}}},[(!_vm.editMode)?_c('div',{staticClass:\"text-overline mb-4\"},[_vm._v(\" NEW PROJECT FOR DATASET \"+_vm._s(_vm.selectedDataset.id)+\" \")]):_vm._e(),_c('form',{attrs:{\"submit\":_vm.submit}},[_c('v-text-field',{staticClass:\"text-h5 mb-1\",attrs:{\"autofocus\":\"\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('v-text-field',{attrs:{\"label\":\"Description\"},model:{value:(_vm.description),callback:function ($$v) {_vm.description=$$v},expression:\"description\"}}),_c('v-text-field',{attrs:{\"label\":\"Keywords\"},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}}),_c('v-checkbox',{attrs:{\"dense\":\"\",\"label\":\"Make this project read only\"},model:{value:(_vm.readonly),callback:function ($$v) {_vm.readonly=$$v},expression:\"readonly\"}}),(_vm.creating)?_c('v-checkbox',{attrs:{\"dense\":\"\",\"label\":\"Make this project private\"},model:{value:(_vm.privated),callback:function ($$v) {_vm.privated=$$v},expression:\"privated\"}}):_vm._e(),_c('v-card-actions',{staticClass:\"action-buttons\"},[_c('v-btn',{attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\",\"type\":\"submit\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.submit.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s((_vm.editMode) ? \"Save\" : \"Create\")+\" \")]),_c('v-btn',{attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.cancel.apply(null, arguments)}}},[_vm._v(\" Cancel \")])],1)],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { ref } from 'vue';\nimport { createProject, editProject } from '../api/rest'\nimport {\n    selectedDataset,\n    loadingState,\n    editingProject,\n    loadProjectsForDataset,\n} from '@/store';\n\nexport default {\n  props: {\n    editMode: {\n        type: Boolean,\n        default: false\n    },\n  },\n  setup(props, { emit }) {\n    const creating = ref(false)\n    const name = ref('My Project')\n    const description = ref('')\n    const keywords = ref('')\n    const privated = ref(false);\n    const readonly = ref(false);\n\n    function reset() {\n        creating.value = false\n        description.value = ''\n        keywords.value = ''\n    }\n\n    function cancel() {\n        if(props.editMode) {\n            emit('cancel')\n        } else {\n            creating.value = false\n        }\n    }\n\n    function submit(e) {\n        e.preventDefault()\n        loadingState.value = true\n\n        const formData = {\n            name: name.value,\n            private: privated.value,\n            dataset: selectedDataset.value.id,\n            description: description.value,\n            keywords: keywords.value,\n            readonly: readonly.value,\n        };\n\n        let submitFunction = async () => {\n           return await createProject(formData);\n        }\n\n        if (props.editMode) {\n            submitFunction = async () => {\n                return await editProject(editingProject.value.id, formData);\n            }\n        }\n\n        submitFunction().then(async (response) => {\n            if(response.status === 201){\n                loadProjectsForDataset(selectedDataset.value.id);\n            } else if (response.status === 200) {\n                loadProjectsForDataset(selectedDataset.value.id);\n                editingProject.value = undefined;\n            }\n\n            loadingState.value = false\n            reset()\n        }).catch((error) => {\n            console.log(error)\n            loadingState.value = false\n        })\n    }\n\n    if (props.editMode) {\n        name.value = editingProject.value.name;\n        description.value = editingProject.value.description;\n        keywords.value = editingProject.value.keywords;\n        privated.value = editingProject.value.private;\n        readonly.value = editingProject.value.readonly;\n    }\n\n    return {\n        creating,\n        name,\n        selectedDataset,\n        loadingState,\n        description,\n        keywords,\n        privated,\n        readonly,\n        editingProject,\n        cancel,\n        submit,\n    }\n  }\n}\n</script>\n\n<template>\n    <div>\n    <v-btn\n        v-if=\"!creating && !editMode\"\n        class=\"new-button\"\n        @click.stop=\"creating = true\"\n    >\n        + New Project\n    </v-btn>\n    <v-card\n        v-else\n        class=\"selectable-card\"\n        @click.stop\n        :ripple=\"false\"\n    >\n        <div v-if=\"!editMode\" class=\"text-overline mb-4\">\n            NEW PROJECT FOR DATASET {{selectedDataset.id}}\n        </div>\n\n        <form :submit=\"submit\">\n            <v-text-field autofocus v-model=\"name\" class=\"text-h5 mb-1\"/>\n            <v-text-field label=\"Description\" v-model=\"description\" />\n            <v-text-field label=\"Keywords\" v-model=\"keywords\" />\n            <v-checkbox dense label=\"Make this project read only\" v-model=\"readonly\" />\n            <v-checkbox  dense v-if=\"creating\" label=\"Make this project private\" v-model=\"privated\" />\n            <v-card-actions class=\"action-buttons\">\n                <v-btn\n                    outlined\n                    rounded\n                    text\n                    type=\"submit\"\n                    @click.stop=\"submit\"\n                >\n                    {{ (editMode) ? \"Save\" : \"Create\" }}\n                </v-btn>\n                <v-btn\n                    outlined\n                    rounded\n                    text\n                    @click.stop=\"cancel\"\n                >\n                    Cancel\n                </v-btn>\n            </v-card-actions>\n        </form>\n    </v-card>\n    </div>\n</template>\n\n<style scoped>\n.new-button {\n    height: 100%!important;\n    width: 150px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectForm.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectForm.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ProjectForm.vue?vue&type=template&id=102049a3&scoped=true\"\nimport script from \"./ProjectForm.vue?vue&type=script&lang=js\"\nexport * from \"./ProjectForm.vue?vue&type=script&lang=js\"\nimport style0 from \"./ProjectForm.vue?vue&type=style&index=0&id=102049a3&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"102049a3\",\n  null\n  \n)\n\nexport default component.exports","\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { cloneProject, deleteProject } from '@/api/rest'\nimport {\n    selectedDataset,\n    loadingState,\n    allProjectsForDataset,\n    selectedProject,\n    editingProject,\n    selectProject,\n    selectedDataObjects,\n    getAllDatasets,\n    loadDataset,\n    loadProjectsForDataset,\n    sortAscending,\n    sortOption,\n    filters,\n} from '@/store';\nimport ProjectForm from '@/components/ProjectForm.vue';\nimport { Project } from '@/types';\nimport router from '@/router';\n\nexport default {\n    components: { ProjectForm },\n    props: {\n        dataset: {\n            type: Number,\n            required: true\n        },\n        searchText: {\n            type: String,\n            required: false\n        }\n    },\n    setup(props) {\n        const deleting = ref();\n\n        const sortedProjects = computed(() => {\n            if (allProjectsForDataset.value) {\n                let projects = allProjectsForDataset.value.sort((a, b) => {\n                    let sortA = a[sortOption.value];\n                    let sortB = b[sortOption.value];\n\n                    if ((!sortA || !sortB)) {\n                        return 0;\n                    }\n\n                    if (sortA < sortB) {\n                        return (sortAscending.value === true) ? -1 : 1;\n                    }\n                    if (sortA > sortB) {\n                        return (sortAscending.value === true) ? 1 : -1;\n                    }\n                    return 0;\n                });\n\n                projects = projects.filter((p) => {\n                    if (filters.value.private && filters.value.readonly) {\n                        return !p.private && !p.readonly;\n                    }\n                    if (filters.value.private) {\n                        return !p.private;\n                    }\n                    if (filters.value.readonly) {\n                        return !p.readonly;\n                    }\n\n                    return true;\n                })\n\n                return projects;\n            }\n            return [];\n        });\n\n        async function selectOrDeselectProject (project: Project) {\n            if(!selectedProject.value){\n                selectProject(project.id);\n                router.push(`/dataset/${props.dataset}/project/${project.id}`);\n            } else {\n                selectedProject.value = undefined;\n                selectedDataObjects.value = [];\n                await getAllDatasets();\n            }\n        }\n\n        function cloneProj(project: Project) {\n            loadingState.value = true\n            cloneProject(project.id)\n            .then(() => {\n                loadProjectsForDataset(props.dataset);\n                loadingState.value = false;\n            })\n        }\n\n        function deleteProj() {\n            loadingState.value = true\n            deleteProject(deleting.value.id).then(\n                () => {\n                    deleting.value = undefined\n                    loadProjectsForDataset(props.dataset);\n                    if(selectedDataset.value){\n                        selectedProject.value = undefined;\n                    }\n                    loadingState.value = false\n                }\n            )\n        }\n\n        function back() {\n            selectedDataset.value = undefined;\n            router.push(\"/\");\n        }\n\n        function updateSelectedDataset() {\n            if (selectedDataset.value === undefined\n            || selectedDataset.value.id !== props.dataset\n            ) {\n                loadDataset(props.dataset);\n                loadProjectsForDataset(props.dataset);\n            }\n        }\n\n        onMounted(updateSelectedDataset);\n\n        watch(() => props.dataset, updateSelectedDataset);\n        watch(() => props.searchText, () => loadProjectsForDataset(props.dataset));\n\n\n        return {\n            selectedDataset,\n            allProjectsForDataset,\n            selectedProject,\n            selectOrDeselectProject,\n            cloneProj,\n            deleting,\n            deleteProj,\n            editingProject,\n            selectProject,\n            back,\n            loadingState,\n            sortedProjects,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectSelect.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectSelect.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./ProjectSelect.vue?vue&type=template&id=b9c52108\"\nimport script from \"./ProjectSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./ProjectSelect.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(!_vm.selectedDataset)?_c('div',{staticClass:\"flex-container pa-5\",style:(_vm.selectingSubsetOf ? 'width: calc(100% - 500px)' : '')},[(_vm.allDatasets.length === 0 && !_vm.loadingState)?_c('v-card',{attrs:{\"width\":\"100%\"}},[_c('v-card-title',[_vm._v(\"No datasets.\")])],1):_vm._e(),_vm._l((_vm.sortedDatasets),function(dataset){return _c('v-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.selectedDataset || _vm.selectedDataset == dataset),expression:\"!selectedDataset || selectedDataset == dataset\"}],key:'dataset_'+dataset.id,class:dataset.thumbnail? 'selectable-card with-thumbnail': 'selectable-card',attrs:{\"width\":_vm.selectedDataset == dataset ? '100%' :''},on:{\"click\":() => _vm.selectOrDeselectDataset(dataset)}},[_c('div',{staticClass:\"text-overline mb-4\"},[_vm._v(\" DATASET (\"+_vm._s(dataset.created ? dataset.created.split('T')[0] : 'No creation time')+\") \"),(dataset.private)?_c('span',{staticClass:\"red--text\"},[_vm._v(\" (PRIVATE) \")]):_vm._e()]),_c('div',{staticClass:\"card-contents\"},[_c('div',[_c('v-list-item-title',{staticClass:\"text-h5 mb-1\"},[_vm._v(\" \"+_vm._s(dataset.name)+\" \")]),_c('v-list-item-subtitle',[_vm._v(\" \"+_vm._s(dataset.description)+\" \")]),_c('div',{staticClass:\"text-overline\"},[_vm._v(\" \"+_vm._s(dataset.summary)+\" \")]),(dataset.keywords)?_c('v-list-item-subtitle',_vm._l((dataset.keywords.split(',')),function(keyword){return _c('v-chip',{key:keyword,attrs:{\"small\":\"\"}},[_c('i',[_vm._v(_vm._s(keyword))])])}),1):_vm._e()],1),(dataset.thumbnail)?_c('div',[_c('v-img',{attrs:{\"src\":dataset.thumbnail,\"width\":\"100\"}})],1):_vm._e()]),_c('v-card-actions',{staticClass:\"action-buttons\"},[_c('v-btn',{attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return (() => _vm.selectOrDeselectDataset(dataset)).apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.selectedDataset ?'Deselect' :'Select')+\" \")]),_c('v-btn',{attrs:{\"outlined\":\"\",\"rounded\":\"\",\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return (() => _vm.selectingSubsetOf = dataset).apply(null, arguments)}}},[_vm._v(\" Create subset \")])],1)],1)})],2):_vm._e(),_c('v-navigation-drawer',{attrs:{\"right\":\"\",\"absolute\":\"\",\"width\":\"500px\",\"value\":_vm.selectingSubsetOf !== undefined && !_vm.selectedDataset}},[_c('v-btn',{staticClass:\"pa-3 pt-8\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.selectingSubsetOf = undefined}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),(_vm.selectingSubsetOf)?_c('subset-selection',{attrs:{\"targetDataset\":_vm.selectingSubsetOf},on:{\"close\":function($event){_vm.selectingSubsetOf = undefined}}}):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"px-3 pt-10\",staticStyle:{\"position\":\"relative\"}},[_c('div',{staticClass:\"submitButton\"},[_c('div',{staticClass:\"text-overline mb-4\"},[_vm._v(\" CREATE NEW DATASET FROM SUBSET OF \"+_vm._s(_vm.targetDataset.name)+\" \")]),_c('v-btn',{staticClass:\"mt-3\",attrs:{\"color\":\"primary\",\"disabled\":_vm.name === '' || _vm.selectedDataObjects.length === 0},on:{\"click\":_vm.submitForm}},[_vm._v(\" Create subset \")])],1),_c('br'),_c('v-text-field',{attrs:{\"autofocus\":\"\",\"label\":\"Subset name\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('v-text-field',{attrs:{\"label\":\"Description\"},model:{value:(_vm.description),callback:function ($$v) {_vm.description=$$v},expression:\"description\"}}),_c('v-text-field',{attrs:{\"label\":\"Keywords\"},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}}),_vm._v(\" Select anatomies and subjects from \"+_vm._s(_vm.targetDataset.name)+\" to include in new dataset: \"),_c('data-list',{attrs:{\"autoSelectAll\":\"\",\"dataset\":_vm.targetDataset.id}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { DataObject, Dataset } from '@/types'\nimport { ref } from 'vue'\nimport DataList from './DataList.vue'\nimport { selectedDataObjects, allDatasets } from '@/store';\nimport { subsetDataset } from '@/api/rest';\n\n\nexport default {\n    components: {\n        DataList\n    },\n    props: {\n        targetDataset: {\n            type: Object as () => Dataset,\n            required: true,\n        },\n    },\n    setup(props, context) {\n        const name = ref('')\n        const description = ref('')\n        const keywords = ref('')\n\n        async function submitForm() {\n            const selected = selectedDataObjects.value.map(\n                (dataObject: DataObject) => ({\n                    id: dataObject.id,\n                    subject: dataObject.subject,\n                    type: dataObject.type,\n                })\n            )\n            const newDataset = await subsetDataset(\n                props.targetDataset.id,\n                {\n                    name: name.value,\n                    description: description.value,\n                    keywords: keywords.value,\n                    selected,\n                }\n            )\n            if(newDataset){\n                allDatasets.value.push(newDataset)\n                context.emit('close')\n            }\n        }\n\n        return {\n            name,\n            description,\n            keywords,\n            submitForm,\n            selectedDataObjects,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubsetSelection.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubsetSelection.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./SubsetSelection.vue?vue&type=template&id=2a5819ca\"\nimport script from \"./SubsetSelection.vue?vue&type=script&lang=ts\"\nexport * from \"./SubsetSelection.vue?vue&type=script&lang=ts\"\nimport style0 from \"./SubsetSelection.vue?vue&type=style&index=0&id=2a5819ca&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport { computed, onMounted, ref, watch } from 'vue';\nimport {\n    allDatasets,\n    selectedDataset,\n    loadingState,\n    selectedDataObjects,\n    loadProjectsForDataset,\n    getAllDatasets,\nsortOption,\nsortAscending,\n} from '@/store';\nimport { Dataset } from '@/types';\nimport SubsetSelection from '@/components/SubsetSelection.vue';\nimport router from '@/router';\n\nexport default {\n  components: { SubsetSelection },\n  props: {\n    searchText: {\n        type: String,\n        required: false\n    }\n  },\n    setup(props) {\n        const selectingSubsetOf = ref();\n        selectedDataset.value = undefined;\n\n        const sortedDatasets = computed(() => {\n            if (allDatasets.value) {\n                const datasets = allDatasets.value.sort((a, b) => {\n                    let sortA = a[sortOption.value];\n                    let sortB = b[sortOption.value];\n\n                    if ((!sortA || !sortB)) {\n                        return 0;\n                    }\n\n                    if (sortA < sortB) {\n                        return (sortAscending.value === true) ? -1 : 1;\n                    }\n                    if (sortA > sortB) {\n                        return (sortAscending.value === true) ? 1 : -1;\n                    }\n                    return 0;\n                });\n\n                return datasets;\n            }\n            return [];\n        });\n\n        async function selectOrDeselectDataset (dataset: Dataset | undefined) {\n            if(!selectedDataset.value && dataset) {\n                selectedDataset.value = dataset;\n\n                router.push(\"/dataset/\"+dataset.id);\n                loadProjectsForDataset(dataset.id);\n            } else {\n                selectedDataset.value = undefined;\n                selectedDataObjects.value = [];\n                await getAllDatasets();\n            }\n        }\n\n        onMounted(async () => {\n            await getAllDatasets();\n            if(selectedDataset.value){\n                const datasetId = selectedDataset.value.id;\n                // reset selectedDataset to maintain updates from latest fetch of all datasets\n                selectedDataset.value = allDatasets.value.find(\n                    (d) => d.id == datasetId\n                )\n            }\n        })\n\n        watch(() => props, () => {\n            getAllDatasets();\n            selectedDataset.value = undefined;\n        }, {deep:true});\n\n        return {\n            allDatasets,\n            selectedDataset,\n            selectOrDeselectDataset,\n            selectingSubsetOf,\n            loadingState,\n            sortedDatasets,\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DatasetSelect.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DatasetSelect.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./DatasetSelect.vue?vue&type=template&id=13c28144\"\nimport script from \"./DatasetSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./DatasetSelect.vue?vue&type=script&lang=ts\"\nimport style0 from \"./DatasetSelect.vue?vue&type=style&index=0&id=13c28144&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter, { Route, RouteConfig } from 'vue-router'\nimport Main from './views/Main.vue'\nimport ProjectSelect from './views/ProjectSelect.vue'\nimport DatasetSelect from './views/DatasetSelect.vue'\n\n\nVue.use(VueRouter)\n\nconst castDatasetAndSubjectProps = (route: Route) => ({\n    dataset: (route.params.dataset) ? parseInt(route.params.dataset): undefined,\n    project: (route.params.project) ? parseInt(route.params.project): undefined,\n    searchText: route.params.searchText,\n  });\n\nconst routes: Array<RouteConfig> = [\n  {\n    path: '/dataset/:dataset/project/:project',\n    name: 'main',\n    props: castDatasetAndSubjectProps,\n    component: Main\n  },\n  {\n    path: '/dataset/:dataset/search/:searchText',\n    name: 'project-search',\n    props: castDatasetAndSubjectProps,\n    component: ProjectSelect,\n  },\n  {\n    path: '/search/:searchText',\n    name: 'dataset-search',\n    props: castDatasetAndSubjectProps,\n    component: DatasetSelect,\n  },\n  {\n    path: '/dataset/:dataset',\n    name: 'project-select',\n    props: castDatasetAndSubjectProps,\n    component: ProjectSelect\n  },\n  {\n    path: '/',\n    name: 'dataset-select',\n    props: castDatasetAndSubjectProps,\n    component: DatasetSelect,\n  },\n  {\n    path: '*',\n    redirect: '/',\n  },\n]\n\nconst router = new VueRouter({\n  routes\n})\n\nexport default router\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=style&index=0&id=384595f8&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Constraints.vue?vue&type=style&index=0&id=2d1be46d&prod&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RenderControls.vue?vue&type=style&index=0&id=359b5e24&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabForm.vue?vue&type=style&index=0&id=283c19b6&prod&lang=css\"","import vtkXMLPolyDataReader from 'vtk.js/Sources/IO/XML/XMLPolyDataReader';\n\nexport default async function (url: string) {\n    const reader = vtkXMLPolyDataReader.newInstance();\n    await reader.setUrl(url, { binary: true });\n    const data = reader.getOutputData();\n    data.getPointData().setActiveScalars('does-not-exist');\n    return data;\n}\n","import vtkImageData from 'vtk.js/Sources/Common/DataModel/ImageData';\nimport vtkPolyData from 'vtk.js/Sources/Common/DataModel/PolyData';\nimport vtkPLYReader from 'vtk.js/Sources/IO/Geometry/PLYReader';\nimport vtkSTLReader from 'vtk.js/Sources/IO/Geometry/STLReader';\nimport vtkPolyDataReader from 'vtk.js/Sources/IO/Legacy/PolyDataReader';\nimport vtkStringArray from 'vtk.js/Sources/Common/Core/StringArray'\nimport vtkDataArray from 'vtk.js/Sources/Common/Core/DataArray';\nimport readImageArrayBuffer from 'itk/readImageArrayBuffer';\nimport ITKHelper from 'vtk.js/Sources/Common/DataModel/ITKHelper';\nimport axios from 'axios';\nimport shapeReader from './shape'\n\n\nimport { vtkShapesByType, deepSSMErrorGlobalRange } from '@/store';\n\nconst { convertItkToVtkImage } = ITKHelper;\n\n\nasync function readDeepSSMScalars(url: string | undefined) {\n    if(!url) return vtkDataArray.newInstance({\n        name: 'deepssm_error'\n    })\n\n    const reader = vtkPolyDataReader.newInstance();\n    await reader.setUrl(url);\n    const data = reader.getOutputData();\n\n    const content = (await axios.get(url)).data;\n    const values: number[] = []\n    content.split('\\r\\n\\r').forEach((section) => {\n        if (section.includes('deepssm_error')) {\n            const [header, data] = section.split('deepssm_error')\n            const line_values = data.slice(1).split('\\r\\n').map((line) => {\n                return line.split(' ').map((v) => parseFloat(v)).filter((v) => v)\n            }).pop()\n            if (line_values) {\n                values.push(...line_values)\n            }\n        }\n    })\n    const dataRange = [\n        Math.min(...values),\n        Math.max(...values),\n    ]\n    deepSSMErrorGlobalRange.value = [\n        Math.min(deepSSMErrorGlobalRange.value[0], dataRange[0]),\n        Math.max(deepSSMErrorGlobalRange.value[1], dataRange[1]),\n    ]\n\n    const arr = vtkDataArray.newInstance({\n        name: 'deepssm_error',\n        values\n    })\n    return arr \n}\n\n\nexport default async function (\n    url: string | undefined, filename='', type=\"Original\", metadata={},\n): Promise<vtkImageData | vtkPolyData> {\n    let shape: vtkImageData | vtkPolyData = vtkPolyData.newInstance()\n    if(!url) return shape\n\n    const arrayBuffer = (await axios.get(url, {\n        responseType: 'arraybuffer'\n    })).data;\n\n    if(filename.toLowerCase().endsWith('ply')){\n        const reader = vtkPLYReader.newInstance();\n        await reader.parseAsArrayBuffer(arrayBuffer)\n        shape =  reader.getOutputData();\n    } else if (\n        filename.toLowerCase().endsWith('nrrd') ||\n        filename.toLowerCase().endsWith('nii') ||\n        filename.toLowerCase().endsWith('nii.gz')\n    ) {\n        const { image } = await readImageArrayBuffer(null, arrayBuffer, filename)\n        shape = convertItkToVtkImage(image)\n    } else if (filename.toLowerCase().endsWith('vtp')) {\n        shape = await shapeReader(url)\n    } else if (filename.toLowerCase().endsWith('vtk')) {\n        const reader = vtkPolyDataReader.newInstance();\n        await reader.setUrl(url)\n        shape = reader.getOutputData();\n    } else if (filename.toLowerCase().endsWith('stl')) {\n        const reader = vtkSTLReader.newInstance();\n        await reader.parseAsArrayBuffer(arrayBuffer)\n        shape =  reader.getOutputData();\n    } else {\n        console.log('Unknown file type for', filename)\n        shape = vtkPolyData.newInstance()\n    }\n\n    // Add metadata to field data\n    const fieldData = shape.getFieldData()\n    Object.entries(metadata).forEach(([key, value]) => {\n        // @ts-ignore\n        const str: string = value.toString()\n        const arr = vtkStringArray.newInstance({\n            name: key,\n            size: 1,\n        })\n        arr.setData([str], 1)\n        // @ts-ignore\n        fieldData.addArray(arr)\n    })\n    if (type === 'DeepSSM') {\n        const arr = await readDeepSSMScalars(url)\n        shape.getPointData().addArray(arr)\n    }\n\n    vtkShapesByType.value[type].push(shape)\n    return shape\n  }\n","import axios from 'axios';\nimport OauthClient from '@girder/oauth-client';\nimport { currentError } from '@/store';\nimport router from '@/router';\n\n\nexport const apiClient = axios.create({\n  baseURL: `${process.env.VUE_APP_API_ROOT}api/v1/`,\n});\nexport const oauthClient = new OauthClient(\n  process.env.VUE_APP_OAUTH_API_ROOT,\n  process.env.VUE_APP_OAUTH_CLIENT_ID,\n);\n\nexport async function restoreLogin() {\n  if (!oauthClient) {\n    return;\n  }\n  await oauthClient.maybeRestoreLogin();\n}\n\napiClient.interceptors.request.use((config) => ({\n  ...config,\n  headers: {\n    ...oauthClient?.authHeaders,\n    ...config.headers,\n  },\n}));\n\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if(error.response?.status === 500) {\n      currentError.value = 'Server error; see server logs for details.'\n    } else if(error.response?.status === 404) {\n      currentError.value = 'Not found.'\n    } else if (error.response) {\n      currentError.value = error.response?.data;\n    } else {\n      currentError.value = 'An error occurred.'\n    }\n    return { data: undefined }\n  }\n)\n\nexport const logout = async () => {\n  try {\n    await apiClient.post('/logout/', null, { withCredentials: true });\n  } finally {\n    await oauthClient.logout();\n    router.push('/')\n  }\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnalysisTab.vue?vue&type=style&index=0&id=3ba8df00&prod&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"pa-3\"},[(_vm.taskData)?_c('div',[(_vm.taskData.message && !_vm.taskData.error)?_c('div',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(_vm._s(_vm.taskData.message))]):_vm._e(),(_vm.taskData.error)?_c('div',{staticClass:\"red--text\",staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"Error: \"+_vm._s(_vm.taskData.error))]):_c('v-progress-linear',{attrs:{\"value\":_vm.taskData.percent_complete}}),(!_vm.taskData.abort)?_c('div',{staticClass:\"d-flex pa-3\",staticStyle:{\"width\":\"100%\",\"justify-content\":\"space-around\"}},[_c('v-btn',{attrs:{\"color\":\"red\"},on:{\"click\":() => _vm.showAbortConfirmation = true}},[_vm._v(\" Abort \")])],1):_vm._e(),_c('br')],1):_vm._e(),_c('div',{staticStyle:{\"display\":\"flex\",\"width\":\"100%\",\"justify-content\":\"space-between\"}},[_c('v-btn',{attrs:{\"disabled\":_vm.resetDisabled},on:{\"click\":_vm.resetForm}},[_vm._v(\" Reset form \")]),_c('v-btn',{staticStyle:{\"float\":\"right\"},attrs:{\"color\":\"primary\",\"disabled\":_vm.submitDisabled},on:{\"click\":_vm.submitForm}},[_vm._v(\" \"+_vm._s(_vm.alreadyDone ? 'Rerun': 'Run')+\" \"+_vm._s(_vm.props.taskName)+\" \")])],1),_c('v-dialog',{attrs:{\"width\":\"500\"},model:{value:(_vm.showSubmissionConfirmation),callback:function ($$v) {_vm.showSubmissionConfirmation=$$v},expression:\"showSubmissionConfirmation\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\" Confirmation \")]),_c('v-card-text',[_vm._v(\" Are you sure you want to re-run the \"+_vm._s(_vm.props.taskName)+\" job? The previous results will be overwritten. \")]),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":() => {_vm.showSubmissionConfirmation = false}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":() => {_vm.showSubmissionConfirmation = false, _vm.submitForm(undefined, true)}}},[_vm._v(\" Yes, Rerun \")])],1)],1)],1),_c('v-dialog',{attrs:{\"width\":\"500\"},model:{value:(_vm.showAbortConfirmation),callback:function ($$v) {_vm.showAbortConfirmation=$$v},expression:\"showAbortConfirmation\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\" Confirmation \")]),_c('v-card-text',[_vm._v(\" Are you sure you want to abort this task? This will cancel any related tasks in this project. \")]),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":() => {_vm.showAbortConfirmation = false}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"color\":\"red\",\"text\":\"\"},on:{\"click\":() => {_vm.showAbortConfirmation = false, _vm.abort(_vm.taskData)}}},[_vm._v(\" Abort \")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { computed, ref, watch } from 'vue';\nimport {\n    selectedProject,\n    currentTasks,\n    jobAlreadyDone,\n    fetchJobResults,\n    spawnJob,\n    abort,\n} from '@/store';\n\nexport default {\n  props: {\n    taskName: {\n        type: String,\n        required: true\n    },\n    formData: {\n        type: Object,\n        required: false,\n    },\n    formDefaults: {\n        type: Object,\n        required: false,\n    },\n    disabled: {\n        type: Boolean,\n        required: false,\n    },\n  },\n  setup(props, { emit }) {\n    const showSubmissionConfirmation = ref(false);\n    const showAbortConfirmation = ref(false);\n    const alreadyDone = ref(jobAlreadyDone(props.taskName))\n\n    const taskData = computed(\n        () => {\n            if(!selectedProject.value?.id ||\n            !currentTasks.value[selectedProject.value.id]) return undefined\n            return currentTasks.value[selectedProject.value.id][props.taskName]\n        }\n    )\n\n    watch(taskData, async (value, oldValue) => {\n        if (value === undefined && oldValue !== undefined) {\n            await fetchJobResults(props.taskName)\n            alreadyDone.value = jobAlreadyDone(props.taskName)\n        }\n    })\n\n    const submitDisabled = computed(() => props.disabled ? props.disabled : !!taskData.value)\n\n    const resetDisabled = computed(() => !!props.disabled)\n\n    function resetForm() {\n        emit('resetForm')\n    }\n\n    async function submitForm(_: Event | undefined, confirmed=false){\n        if (!selectedProject.value) return\n        if(alreadyDone.value && !confirmed){\n            showSubmissionConfirmation.value = true\n            return\n        }\n        await spawnJob(props.taskName, props.formData || {})\n    }\n\n    return {\n        props,\n        alreadyDone,\n        showSubmissionConfirmation,\n        showAbortConfirmation,\n        submitDisabled,\n        taskData,\n        resetForm,\n        submitForm,\n        abort,\n        resetDisabled,\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskInfo.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskInfo.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./TaskInfo.vue?vue&type=template&id=692056fc&scoped=true\"\nimport script from \"./TaskInfo.vue?vue&type=script&lang=ts\"\nexport * from \"./TaskInfo.vue?vue&type=script&lang=ts\"\nimport style0 from \"./TaskInfo.vue?vue&type=style&index=0&id=692056fc&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"692056fc\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PCA.vue?vue&type=style&index=0&id=5bc3af8a&prod&lang=css\"","import { AnalysisParams, DataObject, Dataset, LandmarkInfo, Project, Subject, Task } from \"@/types\";\nimport { apiClient } from \"./auth\";\nimport { loadGroomedShapeForObject, loadParticlesForObject } from \"@/store\";\n\n\nexport async function getDatasets(search: string | undefined): Promise<Dataset[]>{\n    const results: Dataset[] = []\n    let page = 1\n    let response = (await apiClient.get('/datasets', {\n        params: { page, search }\n    })).data\n    results.push(...response.results)\n    while(response.next){\n        page += 1\n        response = (await apiClient.get('/datasets', {\n            params: { page, search }\n        })).data\n        results.push(...response.results)\n    }\n    return results\n}\n\nexport async function getDataset(datasetId: number): Promise<Dataset>{\n    return (await apiClient.get(`/datasets/${datasetId}`)).data\n}\n\nexport async function subsetDataset(datasetId: number, formData: Object): Promise<Dataset>{\n    return (await apiClient.post(`/datasets/${datasetId}/subset/`, formData)).data\n}\n\nexport async function setDatasetThumbnail(datasetId: number, encoding: string) {\n    return (await apiClient.post(`/datasets/${datasetId}/thumbnail/`, {\n        encoding\n    })).data\n}\n\nexport async function setProjectThumbnail(projectId: number, encoding: string) {\n    return (await apiClient.post(`/projects/${projectId}/thumbnail/`, {\n        encoding\n    })).data\n}\n\nexport async function getSubjectsForDataset(datasetId: number): Promise<Subject[]> {\n    return (await apiClient.get('/subjects', {\n        params: {dataset: datasetId}\n    })).data?.results\n}\n\nexport async function getProjectsForDataset(search: string | undefined, datasetId: number): Promise<Project[]>{\n    const results: Project[] = []\n    let page = 1\n    let response = (await apiClient.get(`/projects`, {\n        params: { page, search, dataset: datasetId }\n    })).data\n    results.push(...response.results)\n    while(response.next){\n        page += 1\n        response = (await apiClient.get(`/projects`, {\n            params: { page, search, dataset: datasetId }\n        })).data\n        results.push(...response.results)\n    }\n    return results\n}\n\nexport async function refreshProject(projectId: number) {\n    return (await apiClient.get(`/projects/${projectId}`)).data\n}\n\nexport async function getProjectFileContents(projectFileURL: string) {\n    const resp = await fetch(projectFileURL);\n    return (await resp.json())\n}\n\nexport async function getTasksForProject(projectId: number): Promise<Task[]> {\n    return (await apiClient.get('/task-progress', {\n        params: { project: projectId}\n    })).data?.results\n}\n\nexport async function getSubject(subjectId: number): Promise<Subject>{\n    return (await apiClient.get(`/subjects/${subjectId}`)).data\n}\n\nexport async function getDataObjectsForSubject(subjectId: number): Promise<DataObject[]> {\n    const dataTypes = ['image', 'segmentation', 'mesh']\n    return (await Promise.all(dataTypes.map((type) => {\n        return apiClient.get(`/${type}${type == 'mesh' ?'es' :'s'}/`, {\n            params: {subject: subjectId}\n        })\n    }))).map((response, index) => {\n        return response.data?.results.map((result: DataObject) => {\n            const type = dataTypes[index]\n            if(type !== 'image'){\n                // don't await this, let particles and groomed shapes load in after\n                loadParticlesForObject(type, result.id)\n                loadGroomedShapeForObject(type, result.id)\n            }\n            return Object.assign(result, {type})\n        })\n    }).flat(2)\n}\n\nexport async function getOptimizedParticlesForDataObject(\n    type: string, id: number, projectId: number|undefined\n){\n    return (await apiClient.get('/optimized-particles', {\n        params: {[`original_${type}`]: id, project: projectId}\n    })).data?.results\n}\n\nexport async function getGroomedShapeForDataObject(\n    type: string, id: number, projectId: number|undefined\n) {\n    if (type !== 'image') {\n        const plural = `${type}${type == 'mesh' ?'es' :'s'}`\n        return (await apiClient.get(`/groomed-${plural}`, {\n            params: {[type]: id, project: projectId}\n        })).data?.results\n    }\n}\n\nexport async function getReconstructedSamplesForProject(\n    type: string, id: number, projectId: number|undefined\n){\n    return (await apiClient.get(`/reconstructed-samples/`, {\n        params: {project: projectId}\n    })).data?.results\n}\n\nexport async function getDeepSSMResultForProject(\n    projectId: number|undefined\n){\n    return (await apiClient.get(`/deepssm-result/`, {\n        params: {project: projectId}\n    })).data?.results\n}\n\nexport async function getDeepSSMAugPairsForProject(\n    projectId: number|undefined\n){\n    return (await apiClient.get(`/deepssm-aug-pair/`, {\n        params: {project: projectId}\n    })).data?.results\n}\n\nexport async function getDeepSSMTrainingPairsForProject(\n    projectId: number|undefined\n){\n    return (await apiClient.get(`/deepssm-training-pair/`, {\n        params: {project: projectId}\n    })).data?.results\n}\n\nexport async function getDeepSSMTrainingImagesForProject(\n    projectId: number|undefined\n){\n    return (await apiClient.get(`/deepssm-training-image/`, {\n        params: {project: projectId, page_size: 100}\n    })).data?.results\n}\n\nexport async function getDeepSSMTestImagesForProject(\n    projectId: number|undefined\n){\n    return (await apiClient.get(`/deepssm-testing-data/`, {\n        params: {project: projectId}\n    })).data?.results\n}\n\nexport async function createProject(formData: Record<string, any>){\n    return (await apiClient.post(`/projects/`, formData))\n}\n\nexport async function cloneProject(projectId: number){\n    return (await apiClient.post(`/projects/${projectId}/clone/`))\n}\n\nexport async function deleteProject(projectId: number){\n    return (await apiClient.delete(`/projects/${projectId}/`))\n}\n\nexport async function editProject(projectId: number, formData: Record<string, any>){\n    return (await apiClient.put(`/projects/${projectId}/`, formData));\n}\n\nexport async function groomProject(projectId: number, formData: Record<string, any>){\n    return (await apiClient.post(`/projects/${projectId}/groom/`, formData))\n}\n\nexport async function optimizeProject(projectId: number, formData: Record<string, any>){\n    return (await apiClient.post(`/projects/${projectId}/optimize/`, formData))\n}\n\nexport async function analyzeProject(projectId: number, params: AnalysisParams){\n    return (await apiClient.post(`/projects/${projectId}/analyze/`, params))\n}\n\nexport async function deepssmRunProject(projectId: number, formData: Record<string, any>) {\n    return (await apiClient.post(`/projects/${projectId}/deepssm-run/`, formData))\n}\n\nexport async function getTaskProgress(taskId: number){\n    return (await apiClient.get(`/task-progress/${taskId}`)).data\n}\n\nexport async function abortTask(taskId: number) {\n    return (await apiClient.post(`/task-progress/${taskId}/abort/`)).data\n}\n\nexport async function saveLandmarkData(\n    projectId: number,\n    landmarkInfo: LandmarkInfo[],\n    landmarkLocations: Record<number, Record<number, number[][]>>\n) {\n    return (await apiClient.post(`/projects/${projectId}/landmarks/`, {\n        info: landmarkInfo,\n        locations: landmarkLocations,\n    })).data\n}\n\nexport async function saveConstraintData(\n    projectId: number,\n    constraintLocations: Record<number, Record<number, number[][]>>\n) {\n    return (await apiClient.post(`/projects/${projectId}/constraints/`, {\n        locations: constraintLocations,\n    })).data\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-app',[_c('nav-bar'),_c('v-main',[_c('router-view')],1),_c('v-overlay',{attrs:{\"absolute\":\"\",\"value\":!_vm.oauthClient.isLoggedIn,\"opacity\":0.8}},[_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.logIn}},[_vm._v(\" Log in to Continue \")])],1),_c('v-overlay',{attrs:{\"absolute\":\"\",\"value\":_vm.loadingState,\"opacity\":0.8}},[_c('v-card',{attrs:{\"flat\":\"\",\"width\":\"200px\"}},[_c('v-progress-linear',{staticClass:\"mb-0\",attrs:{\"indeterminate\":\"\",\"color\":\"white\"}})],1)],1),_c('v-overlay',{attrs:{\"absolute\":\"\",\"value\":_vm.currentError !== undefined,\"opacity\":0.8}},[_c('v-card',{staticClass:\"pa-5\"},[_c('v-btn',{staticClass:\"pa-3\",staticStyle:{\"float\":\"right\"},attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.currentError = undefined}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),_c('v-card-title',[_vm._v(\" Error: \")]),(_vm.currentError && _vm.currentError.length)?_c('v-card-text',[_vm._v(\" \"+_vm._s(_vm.currentError)+\" \")]):_c('v-card-text',[_vm._v(\" An error has occurred. \")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-app-bar',{attrs:{\"app\":\"\",\"height\":\"50px\"}},[_c('div',{staticClass:\"d-flex align-center px-5\",on:{\"click\":_vm.navigateToHome}},[_c('v-img',{attrs:{\"alt\":\"ShapeWorks Logo\",\"src\":\"favicon.ico\",\"transition\":\"scale-transition\",\"width\":\"55px\"}}),_c('v-toolbar-title',{staticClass:\"text-h6\"},[_vm._v(\"ShapeWorks\")])],1),_c('v-spacer'),(!(_vm.selectedDataset && _vm.selectedProject) && !(_vm.router.currentRoute.params.dataset && _vm.router.currentRoute.params.project))?_c('filter-search'):_vm._e(),_c('v-menu',{attrs:{\"offset-y\":\"\",\"close-on-content-click\":false},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [(!(_vm.selectedDataset && _vm.selectedProject) && !(_vm.router.currentRoute.params.dataset && _vm.router.currentRoute.params.project))?_c('v-btn',_vm._g(_vm._b({staticClass:\"ma-5\",attrs:{\"hover\":\"\",\"icon\":\"\"}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\" mdi-filter-variant \")])],1):_vm._e()]}}])},[_c('v-card',[_c('v-expansion-panels',[_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\"Sort\")]),_c('v-expansion-panel-content',[_c('v-card-text',[_c('div',{staticClass:\"flex\"},[_c('v-select',{attrs:{\"items\":Object.values(_vm.SORT_OPTION),\"label\":\"Sort by\"},model:{value:(_vm.sortOption),callback:function ($$v) {_vm.sortOption=$$v},expression:\"sortOption\"}}),_c('v-switch',{attrs:{\"label\":_vm.ascendingLabel},model:{value:(_vm.sortAscending),callback:function ($$v) {_vm.sortAscending=$$v},expression:\"sortAscending\"}})],1)])],1)],1),(_vm.selectedDataset)?_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\"Filter\")]),_c('v-expansion-panel-content',[_c('v-card-text',[_c('v-switch',{attrs:{\"label\":\"Hide private\"},model:{value:(_vm.filters.private),callback:function ($$v) {_vm.$set(_vm.filters, \"private\", $$v)},expression:\"filters.private\"}}),_c('v-switch',{attrs:{\"label\":\"Hide read only\"},model:{value:(_vm.filters.readonly),callback:function ($$v) {_vm.$set(_vm.filters, \"readonly\", $$v)},expression:\"filters.readonly\"}})],1)],1)],1):_vm._e()],1)],1)],1),_c('v-spacer'),(_vm.oauthClient.isLoggedIn)?_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.logInOrOut}},[_vm._v(\" Logout \")]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-chip',[_c('v-text-field',{attrs:{\"autofocus\":\"\",\"rounded\":\"\",\"hide-details\":\"\"},on:{\"input\":_vm.navigateToResults},scopedSlots:_vm._u([{key:\"prepend-inner\",fn:function(){return [_c('v-icon',[_vm._v(\" mdi-magnify \")])]},proxy:true},{key:\"append\",fn:function(){return [_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('span',_vm._g(_vm._b({},'span',attrs,false),on),[_c('v-icon',[_vm._v(\" mdi-information-outline \")])],1)]}}])},[_c('span',[_vm._v(\"Search ShapeWorks \"+_vm._s((_vm.selectedDataset) ? \"projects\" : \"datasets\")+\" by name, description, and keywords\")])])]},proxy:true}]),model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { ref } from 'vue'\nimport router from '@/router';\nimport { selectedDataset, selectedProject } from '@/store';\n\nexport default {\n    setup() {\n      const searchText = ref(router.currentRoute.params.searchText)\n\n      async function navigateToResults() {\n        // use store functions\n        let targetUrl = \"/\"\n        if (selectedDataset.value) {\n            targetUrl = `/dataset/${selectedDataset.value.id}/`\n        }\n\n        if (searchText.value) {\n            targetUrl = targetUrl + `search/${searchText.value}`\n        }\n\n        router.push(targetUrl);\n      }\n\n      router.beforeEach(async (to, from, next) => {\n        if (!to.params.searchText) searchText.value = ''\n        else searchText.value = to.params.searchText;\n        next()\n      })\n\n      return {\n        searchText,\n        selectedDataset,\n        selectedProject,\n        navigateToResults\n      }\n    },\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilterSearch.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilterSearch.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./FilterSearch.vue?vue&type=template&id=0af564f2\"\nimport script from \"./FilterSearch.vue?vue&type=script&lang=ts\"\nexport * from \"./FilterSearch.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport { computed } from 'vue'\nimport { logout, oauthClient } from '@/api/auth';\nimport { allDatasets, loadingState, sortOption, sortAscending, selectedDataset, selectedProject, filters, SORT_OPTION } from '@/store';\nimport FilterSearch from './FilterSearch.vue';\nimport router from '@/router';\nimport { getDatasets } from '@/api/rest';\n\n\nexport default {\n    components: {\n      FilterSearch\n    },\n    setup() {\n      const params = computed(() => ({\n        dataset: selectedDataset.value?.id,\n        project: selectedProject.value?.id\n      }))\n\n      const ascendingLabel = computed(() => {\n        return sortOption.value !== 'modified' ? \"A to Z\" : \"Oldest\"\n      })\n\n      async function logInOrOut() {\n          if (oauthClient.isLoggedIn) {\n            await logout();\n            window.location.reload();\n          } else {\n            oauthClient.redirectToLogin();\n          }\n      }\n\n      async function navigateToHome() {\n        selectedDataset.value = undefined\n        selectedProject.value = undefined\n        if (router.currentRoute.path !== '/') {\n          router.push('/')\n        }\n        loadingState.value = true;\n        allDatasets.value = (await getDatasets(undefined)).sort((a, b) => {\n            if(a.created < b.created) return 1;\n            if(a.created > b.created) return -1;\n            return 0;\n        });\n        loadingState.value = false;\n      }\n\n      return {\n          oauthClient,\n          params,\n          logInOrOut,\n          selectedDataset,\n          selectedProject,\n          navigateToHome,\n          sortOption,\n          sortAscending,\n          ascendingLabel,\n          filters,\n          SORT_OPTION,\n          router,\n      }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./NavBar.vue?vue&type=template&id=384595f8\"\nimport script from \"./NavBar.vue?vue&type=script&lang=ts\"\nexport * from \"./NavBar.vue?vue&type=script&lang=ts\"\nimport style0 from \"./NavBar.vue?vue&type=style&index=0&id=384595f8&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport NavBar from './components/NavBar';\nimport { oauthClient } from './api/auth';\nimport { loadingState, currentError } from './store';\n\nexport default {\n    components: {\n        NavBar,\n    },\n    setup() {\n        const logIn = () => {\n            oauthClient.redirectToLogin();\n        }\n        return {\n            oauthClient,\n            logIn,\n            loadingState,\n            currentError,\n        }\n    },\n}\n</script>\n\n<template>\n    <v-app>\n        <nav-bar />\n        <v-main>\n            <router-view />\n        </v-main>\n\n        <v-overlay\n            absolute\n            :value=\"!oauthClient.isLoggedIn\"\n            :opacity=\"0.8\"\n        >\n            <v-btn\n                color=\"primary\"\n                @click=\"logIn\"\n            >\n              Log in to Continue\n            </v-btn>\n        </v-overlay>\n\n        <v-overlay\n            absolute\n            :value=\"loadingState\"\n            :opacity=\"0.8\"\n        >\n            <v-card flat width=\"200px\">\n              <v-progress-linear\n                indeterminate\n                color=\"white\"\n                class=\"mb-0\"\n              ></v-progress-linear>\n          </v-card>\n        </v-overlay>\n\n        <v-overlay\n            absolute\n            :value=\"currentError !== undefined\"\n            :opacity=\"0.8\"\n        >\n            <v-card class=\"pa-5\">\n                <v-btn\n                    icon\n                    @click.stop=\"currentError = undefined\"\n                    class=\"pa-3\"\n                    style=\"float:right\"\n                >\n                    <v-icon>mdi-close</v-icon>\n                </v-btn>\n                <v-card-title>\n                    Error:\n                </v-card-title>\n                <v-card-text v-if=\"currentError && currentError.length\">\n                    {{ currentError }}\n                </v-card-text>\n                <v-card-text v-else>\n                    An error has occurred.\n                </v-card-text>\n          </v-card>\n        </v-overlay>\n    </v-app>\n</template>\n\n<style>\nhtml {\n    overflow-y: auto !important;\n}\n.v-overlay {\n    top: -100%!important;\n}\n.v-overlay__content {\n    top: 50vh;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4b64ca4f\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=4b64ca4f&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n    theme: {\n        dark: true,\n    },\n});\n","import Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport vuetify from './plugins/vuetify';\nimport { restoreLogin } from './api/auth';\n\n\nasync function login() {\n  return restoreLogin();\n}\n\nlogin().then(() => {\n  new Vue({\n    router,\n    vuetify,\n    render: (h) => h(App),\n  }).$mount('#app');\n});\n","\nimport { ref, watch } from 'vue'\nimport Vue from 'vue'\nimport Vuetify from 'vuetify'\nimport 'vuetify/dist/vuetify.min.css'\nimport VJsf from '@koumoul/vjsf'\nimport '@koumoul/vjsf/dist/main.css'\nimport Ajv from 'ajv';\nimport defaults from 'json-schema-defaults';\nimport {\n    allDataObjectsInDataset, groomFormData, optimizationFormData, selectedProject,\n} from '@/store';\nimport { DataObject } from '../types/index';\nimport TaskInfo from './TaskInfo.vue'\n\nVue.use(Vuetify)\n\n\nexport default {\n    props: {\n        form: {\n            type: String,\n            required: true,\n        },\n        prerequisite: {\n            type: Function,\n            default: () => true\n        },\n        prerequisite_unfulfilled: {\n            type: String,\n            required: false,\n        },\n    },\n    components: {\n        VJsf,\n        TaskInfo,\n    },\n    setup(props) {\n        const ajv = new Ajv();\n        const formDefaults = ref();\n        const formData = ref({});\n        const formSchema = ref();\n        const formValid = ref(false);\n\n        function overwriteFormDefaultsFromProjectFile() {\n            const file_contents = selectedProject.value?.file_contents\n            if (file_contents) {\n                const newDefaults = {}\n                const parseNewDefaults = (data: Object) => {\n                    if (data) {\n                        Object.entries(data).forEach(([key, value]) => {\n                            if (value === \"True\") value = true\n                            else if (value === \"False\") value = false\n                            else if (typeof value === 'string' && !isNaN(parseFloat(value))) value = parseFloat(value)\n                            newDefaults[key] = value\n                        })\n                    }\n                }\n\n                const section: Record<string, Object> = file_contents[props.form]\n                if (section && props.form === 'groom') {\n                    // section organized by anatomies, pick first\n                    const data = Object.values(section)[0] as Object\n                    if (data) parseNewDefaults(data)\n                } else if (section && props.form === 'optimize') {\n                    parseNewDefaults(section)\n                }\n                formDefaults.value = Object.fromEntries(\n                    Object.entries(formDefaults.value).map(([sName, sData]: [string, any]) => {\n                        if (!sData) return [sName, sData]\n                        return [sName, Object.fromEntries(\n                            // @ts-ignore\n                            Object.entries(sData).map(([key, value]) => {\n                                if (newDefaults[key]) return [key, newDefaults[key]]\n                                return [key, value]\n                            })\n                        )]\n                    })\n                )\n            }\n        }\n\n        async function fetchFormSchema() {\n            let formName = props.form\n            if(formName === 'groom'){\n                const types = allDataObjectsInDataset.value.map((obj: DataObject) => obj.type)\n                if(types.some((type: string) => type === 'segmentation')) {\n                    formName += '_segmentation'\n                } else {\n                    formName += '_mesh'\n                }\n            }\n\n            formSchema.value = await (await fetch( `forms/${formName}.json`)).json()\n            formDefaults.value = defaults(formSchema.value)\n            overwriteFormDefaultsFromProjectFile()\n\n            formData.value = formDefaults.value\n        }\n        fetchFormSchema()\n\n        function evaluateExpression (expression: string) {\n            if(expression){\n                // The schemas are trusted source code\n                const expressionFunc = eval(expression)\n                return expressionFunc(formData.value)\n            }\n            return true;\n        }\n\n        const schemaOptions = {\n            rootDisplay: \"expansion-panels\",\n            autoFocus: true,\n            ajv,\n            sliderProps: {\n                thumbLabel: true\n            },\n            tooltipProps: {\n                openOnHover: true,\n                top: true\n            }\n        }\n\n        function simplifyFormData(formData) {\n            let payload;\n            Object.keys(formData).forEach((key) => {\n                if (key.includes(\"section\") || key.includes(\"analysis\")) {\n                    const value = formData[key]\n                    payload = {\n                        ...payload,\n                        ...value,\n                    }\n                } else {\n                    payload[key] = formData[key]\n                }\n            })\n            return payload\n        }\n\n        watch(formData, () => {\n            const payload = simplifyFormData(formData.value)\n            if (props.form === 'optimize') {\n                optimizationFormData.value = payload\n            } else if (props.form === 'groom') {\n                groomFormData.value = payload\n            }\n        }, {deep:true})\n\n        function resetForm() {\n            formData.value = formDefaults.value\n        }\n\n        return {\n            props,\n            schemaOptions,\n            formData,\n            formDefaults,\n            formSchema,\n            formValid,\n            simplifyFormData,\n            resetForm,\n            evaluateExpression,\n        }\n    },\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectForm.vue?vue&type=style&index=0&id=102049a3&prod&scoped=true&lang=css\"","import { ref } from 'vue'\nimport {\n    selectedProject,\n    groomedShapesForOriginalDataObjects,\n    reconstructionsForOriginalDataObjects,\n    particlesForOriginalDataObjects\n} from '.';\n\nexport const layers = ref<Record<string, any>[]>([\n    {\n        name: 'Original',\n        color: 'white',\n        rgb: [1, 1, 1],\n        available: () => true,\n    },\n    {\n        name: 'Groomed',\n        color: 'green',\n        rgb: [0, 1, 0],\n        available: () => {\n            return Object.values(groomedShapesForOriginalDataObjects.value)\n            .map((obj) => Object.values(obj).flat()).flat().length > 0\n        }\n    },\n    {\n        name: 'Reconstructed',\n        color: 'red',\n        rgb: [1, 0, 0],\n        available: () => {\n            return reconstructionsForOriginalDataObjects.value?.length > 0\n        },\n    },\n    {\n        name: 'Particles',\n        color: undefined,\n        rgb: undefined,\n        available: () => {\n            return Object.values(particlesForOriginalDataObjects.value)\n            .map((obj) => Object.values(obj).flat()).flat().length > 0\n        }\n    },\n    {\n        name: 'Landmarks',\n        color: undefined,\n        rgb: undefined,\n        available: () => {\n            return selectedProject.value?.landmarks_info && selectedProject.value.landmarks_info.length > 0\n        }\n    },\n    {\n        name: 'Constraints',\n        color: undefined,\n        rgb: undefined,\n        available: () => {\n            return selectedProject.value?.constraints && selectedProject.value.constraints.length > 0\n        }\n    }\n])\n\nexport const vtkShapesByType = ref<Record<string, any[]>>({\n    \"Original\": [],\n    \"Original - Image\": [],\n    \"Groomed\": [],\n    \"Reconstructed\": [],\n    \"Particles\": [],\n    \"DeepSSM\": [],\n})\n\nexport const SPHERE_RESOLUTION = 32;\n\nexport const COLORS = [\n    [166, 206, 227],\n    [31, 120, 180],\n    [178, 223, 138],\n    [51, 160, 44],\n    [251, 154, 153],\n    [227, 26, 28],\n    [253, 191, 111],\n    [255, 127, 0],\n    [202, 178, 214],\n    [106, 61, 154],\n    [255, 255, 153],\n    [177, 89, 40],\n];\n\nexport const DEEPSSM_SAMPLES_PER_PAGE = 12;\n\nexport enum SORT_OPTION {\n    NAME = 'name',\n    ID = 'id',\n    MODIFIED = 'modified',\n    CREATOR = 'creator',\n}\n","function crossProduct(v1, v2) {\n    return [\n        (v1[1] * v2[2] - v1[2] * v2[1]),\n        (v1[2] * v2[0] - v1[0] * v2[2]),\n        (v1[0] * v2[1] - v1[1] * v2[0]),\n    ]\n}\n\nfunction addVectors(v1, v2) {\n    return [\n        v1[0] + v2[0],\n        v1[1] + v2[1],\n        v1[2] + v2[2],\n    ]\n}\n\nfunction subtractVectors(v1, v2) {\n    return [\n        v1[0] - v2[0],\n        v1[1] - v2[1],\n        v1[2] - v2[2],\n    ]\n}\n\nfunction normalizeVector(v) {\n    const magnitude = Math.sqrt(\n        Math.pow(v[0], 2) +\n        Math.pow(v[1], 2) +\n        Math.pow(v[2], 2)\n    )\n    return [\n        v[0] / magnitude,\n        v[1] / magnitude,\n        v[2] / magnitude,\n    ]\n}\n\nexport default async function (url: string | undefined) {\n    const constraintList: {type: string, data: any, name: string}[] = []\n    if (url) {\n        const resp = await fetch(url);\n        const json = await resp.json()\n        json.planes?.forEach(({points, name}) => {\n            // must contain 3 points\n            if (points && points.length === 3) {\n                const [p1, p2, p3] = points\n                const v1 = subtractVectors(p1, p3)\n                const v2 = subtractVectors(p1, p2)\n                // v1 and v2 are parallel to plane, normal is vector product of v1 and v2\n                const normal = normalizeVector(crossProduct(v1, v2))\n                const origin = p1\n                constraintList.push({\n                    type: 'plane',\n                    data : { origin, normal },\n                    name\n                })\n            }\n        })\n        if (json.free_form_constraints) {\n            constraintList.push({\n                type: 'paint',\n                data: json.free_form_constraints,\n                name: json.free_form_constraints.name,\n            })\n        }\n    }\n    return constraintList\n}\n\n\n\nexport function convertConstraintDataForDB(shapeLocations, shapeInfos) {\n    const constraintJSON: Record<string, any> = {}\n    shapeInfos.forEach((cInfo) => {\n        const indexForShape = shapeInfos\n            .filter((info) => info.type === cInfo.type && info.domain === cInfo.domain)\n            .findIndex((info) => info.id === cInfo.id)\n        const locations = shapeLocations.filter((cData) => cData.type === cInfo.type)\n\n        // location not set, skip this iteration\n        if (locations.length <= indexForShape) return\n        const cData = locations[indexForShape]\n        if (cInfo.type === 'plane') {\n            if (!constraintJSON.planes) constraintJSON.planes = []\n            const { origin, normal } = cData.data\n\n            const v1 = crossProduct(normal, [1, 0, 0])\n            const v2 = crossProduct(normal, [0, 1, 0])\n\n            const p1 = origin;\n            const p2 = addVectors(origin, normal[2] > 0 ? v2 : v1)\n            const p3 = addVectors(origin, normal[2] > 0 ? v1 : v2)\n\n            const planeData: Record<string, any> = {points: [p1, p2, p3]}\n            if (cInfo.name) {\n                planeData.name = cInfo.name\n            }\n            constraintJSON.planes.push(planeData)\n        } else if (cInfo.type === 'paint') {\n            const paintData: Record<string, any> = cData.data\n            if (cInfo.name) {\n                paintData.name = cInfo.name\n            }\n            constraintJSON.free_form_constraints = paintData\n        }\n    })\n\n    return constraintJSON\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataList.vue?vue&type=style&index=0&id=0c2067b9&prod&lang=css\""],"sourceRoot":""}